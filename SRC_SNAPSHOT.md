# Snapshot src/

Generato: 2025-10-12 19:03:25

Root: `src` — Esclusi: node_modules,.git,dist,build,coverage,tmp,www — Binari inclusi: no
Limiti: 120000B/file

## Tree di `src/`

```
Elenco del percorso delle cartelle per il volume OS
Numero di serie del volume: 1A0F-6357
C:.
|   global.scss
|   index.html
|   karma.conf.js
|   main.ts
|   polyfills.ts
|   test.ts
|   zone-flags.ts
|   
+---app
|   |   app.component.html
|   |   app.component.scss
|   |   app.component.spec.ts
|   |   app.component.ts
|   |   app.routes.ts
|   |   app.scss
|   |   
|   +---interfaces
|   |       conference.interfaces.ts
|   |       user-options.ts
|   |       
|   +---pages
|   |   +---about
|   |   |       about.html
|   |   |       about.scss
|   |   |       about.ts
|   |   |       
|   |   +---about-popover
|   |   |       about-popover.ts
|   |   |       
|   |   +---account
|   |   |       account.html
|   |   |       account.scss
|   |   |       account.ts
|   |   |       
|   |   +---comune-castelraimondo
|   |   |       comune-castelraimondo.page.html
|   |   |       comune-castelraimondo.page.scss
|   |   |       comune-castelraimondo.page.ts
|   |   |       
|   |   +---cosmari
|   |   |       cosmari.page.html
|   |   |       cosmari.page.scss
|   |   |       cosmari.page.ts
|   |   |       
|   |   +---cronache-maceratesi
|   |   |       cronache-maceratesi.page.html
|   |   |       cronache-maceratesi.page.scss
|   |   |       cronache-maceratesi.page.ts
|   |   |       
|   |   +---infiorata
|   |   |       infiorata.page.html
|   |   |       infiorata.page.scss
|   |   |       infiorata.page.ts
|   |   |       
|   |   +---login
|   |   |       login.html
|   |   |       login.scss
|   |   |       login.ts
|   |   |       
|   |   +---map
|   |   |       map-dark-style.js
|   |   |       map.html
|   |   |       map.scss
|   |   |       map.ts
|   |   |       
|   |   +---picchio-news
|   |   |       picchio-news.page.html
|   |   |       picchio-news.page.scss
|   |   |       picchio-news.page.ts
|   |   |       
|   |   +---plateform
|   |   |       plateform.page.html
|   |   |       plateform.page.scss
|   |   |       plateform.page.ts
|   |   |       
|   |   +---schedule
|   |   |       schedule.html
|   |   |       schedule.scss
|   |   |       schedule.ts
|   |   |       
|   |   +---schedule-filter
|   |   |       schedule-filter.html
|   |   |       schedule-filter.scss
|   |   |       schedule-filter.ts
|   |   |       
|   |   +---session-detail
|   |   |       session-detail.html
|   |   |       session-detail.scss
|   |   |       session-detail.ts
|   |   |       
|   |   +---signup
|   |   |       signup.html
|   |   |       signup.scss
|   |   |       signup.ts
|   |   |       
|   |   +---speaker-detail
|   |   |       speaker-detail.html
|   |   |       speaker-detail.scss
|   |   |       speaker-detail.ts
|   |   |       
|   |   +---speaker-list
|   |   |       speaker-list.html
|   |   |       speaker-list.scss
|   |   |       speaker-list.ts
|   |   |       
|   |   +---support
|   |   |       support.html
|   |   |       support.scss
|   |   |       support.ts
|   |   |       
|   |   +---tabs-page
|   |   |       routes.ts
|   |   |       tabs-page.html
|   |   |       tabs-page.scss
|   |   |       tabs-page.spec.ts
|   |   |       tabs-page.ts
|   |   |       
|   |   +---turismo
|   |   |       turismo.page.html
|   |   |       turismo.page.scss
|   |   |       turismo.page.ts
|   |   |       
|   |   +---tutorial
|   |   |       tutorial.html
|   |   |       tutorial.scss
|   |   |       tutorial.spec.ts
|   |   |       tutorial.ts
|   |   |       
|   |   \---vivere-camerino
|   |           vivere-camerino.page.html
|   |           vivere-camerino.page.scss
|   |           vivere-camerino.page.ts
|   |           
|   +---providers
|   |       can-deactivate-support.guard.ts
|   |       check-tutorial.guard.ts
|   |       conference.service.ts
|   |       location.service.ts
|   |       user.service.ts
|   |       
|   +---security
|   |       kiosk-whitelist.directive.ts
|   |       kiosk-whitelist.service.ts
|   |       
|   \---services
|           inactivity.service.ts
|           
+---assets
|   |   manifest.webmanifest
|   |   speaker-background_.png
|   |   
|   +---data
|   |       data.json
|   |       
|   +---icon
|   |       favicon.png
|   |       
|   +---icons
|   |       128.png
|   |       144.png
|   |       152.png
|   |       180.png
|   |       192.png
|   |       384.png
|   |       512.png
|   |       72.png
|   |       96.png
|   |       
|   +---img
|   |   |   agos_speaker-background.png
|   |   |   appicon.png
|   |   |   appicon.svg
|   |   |   endri.png
|   |   |   ica-slidebox-img-1.png
|   |   |   ica-slidebox-img-1_originale.png
|   |   |   ica-slidebox-img-2.png
|   |   |   ica-slidebox-img-3.png
|   |   |   ica-slidebox-img-4.png
|   |   |   ionic-logo-white.svg
|   |   |   loghi_enti.png
|   |   |   logo_comune.png
|   |   |   pbc.png
|   |   |   speaker-background.png
|   |   |   speaker-detail2 copy.html
|   |   |   
|   |   +---about
|   |   |       Archive.zip
|   |   |       austin.jpg
|   |   |       chicago.jpg
|   |   |       madison.jpg
|   |   |       seattle.jpg
|   |   |       
|   |   \---speakers
|   |           agos_banner.png
|   |           agos_pizza_avatar.png
|   |           bear.jpg
|   |           bear.psd
|   |           carnevali_banner.png
|   |           carnevali_pizza_avatar.png
|   |           centrale_banner.png
|   |           centrale_pizza_avatar.png
|   |           cheetah.jpg
|   |           conad_banner.png
|   |           conad_pizza_avatar.png
|   |           duck.jpg
|   |           eagle.jpg
|   |           eclissi_banner.png
|   |           eclissi_pizza_avatar.png
|   |           elephant.jpg
|   |           giraffe.jpg
|   |           iguana.jpg
|   |           kitten.jpg
|   |           lanterna_banner.png
|   |           lanterna_pizza_avatar.png
|   |           lion.jpg
|   |           ludwig_banner.png
|   |           ludwig_pizza_avatar.png
|   |           mouse.jpg
|   |           nuovomondo_banner.png
|   |           nuovomondo_pizza_avatar.png
|   |           pizza_banner.png
|   |           pizza_pizza_avatar.png
|   |           puppy.jpg
|   |           rabbit.jpg
|   |           tabaccheria_cerqueti_avatar.png
|   |           tabaccheria_cerqueti_banner.png
|   |           turtle.jpg
|   |           
|   +---poster
|   |       a3_01.jpg
|   |       a3_02.jpg
|   |       a3_03.jpg
|   |       a3_04.jpg
|   |       a3_05.jpg
|   |       a3_06.jpg
|   |       a3_07.jpg
|   |       a3_08.jpg
|   |       a3_09.jpg
|   |       Immagine WhatsApp 2025-10-04 ore 20.19.58_d09cea54.jpg
|   |       locandina a3.pdf
|   |       
|   \---video
|           polveredistelle.mp4
|           
+---environments
|       environment.prod.ts
|       environment.ts
|       
\---theme
        variables.scss
        
```

## Contenuti dei file (ordinati per percorso)

---

### src/app/app.component.html

```html
<ion-app appKioskWhitelist [class.ion-palette-dark]="dark">
  <ion-split-pane contentId="main-content">
    <ion-menu contentId="main-content">
      <ion-content>
        <ion-list lines="none">
          <ion-list-header> Conference </ion-list-header>
          @for(p of appPages; track p.url; let i = $index) {
          <ion-menu-toggle autoHide="false">
            <ion-item
              [routerLink]="p.url"
              routerLinkActive="selected"
              routerDirection="root"
              detail="false"
            >
              <ion-icon slot="start" [name]="p.icon + '-outline'"></ion-icon>
              <ion-label>
                {{ p.title }}
              </ion-label>
            </ion-item>
          </ion-menu-toggle>
          }
        </ion-list>
        @if(loggedIn) {
        <ion-list lines="none">
          <ion-list-header> Account </ion-list-header>

          <ion-menu-toggle autoHide="false">
            <ion-item
              routerLink="/account"
              routerLinkActive="selected"
              routerDirection="root"
              detail="false"
            >
              <ion-icon slot="start" name="person"></ion-icon>
              <ion-label> Account </ion-label>
            </ion-item>
          </ion-menu-toggle>

          <ion-menu-toggle autoHide="false">
            <ion-item
              routerLink="/support"
              routerLinkActive="selected"
              routerDirection="root"
              detail="false"
            >
              <ion-icon slot="start" name="help"></ion-icon>
              <ion-label> Support </ion-label>
            </ion-item>
          </ion-menu-toggle>

          <ion-menu-toggle autoHide="false">
            <ion-item button (click)="logout()" detail="false">
              <ion-icon slot="start" name="log-out"></ion-icon>
              <ion-label> Logout </ion-label>
            </ion-item>
          </ion-menu-toggle>
        </ion-list>
        } @if(!loggedIn) {
        <ion-list lines="none">
          <ion-list-header> Account </ion-list-header>

          <!-- <ion-menu-toggle autoHide="false">
            <ion-item
              routerLink="/login"
              routerLinkActive="selected"
              routerDirection="root"
              detail="false"
            >
              <ion-icon slot="start" name="log-in"></ion-icon>
              <ion-label> Login </ion-label>
            </ion-item>
          </ion-menu-toggle>

          <ion-menu-toggle autoHide="false">
            <ion-item
              routerLink="/support"
              routerLinkActive="selected"
              routerDirection="root"
              detail="false"
            >
              <ion-icon slot="start" name="help"></ion-icon>
              <ion-label> Support </ion-label>
            </ion-item>
          </ion-menu-toggle> 

          <ion-menu-toggle autoHide="false">
            <ion-item
              routerLink="/signup"
              routerLinkActive="selected"
              routerDirection="root"
              detail="false"
            >
              <ion-icon slot="start" name="person-add"></ion-icon>
              <ion-label> Signup </ion-label>
            </ion-item>
          </ion-menu-toggle> -->

          <ion-item>
            <ion-icon slot="start" name="moon-outline"></ion-icon>
            <ion-toggle [(ngModel)]="dark" (ionChange)="toggleDarkMode()">
              Dark Mode
            </ion-toggle>
          </ion-item>
        </ion-list>
        }

        <ion-list lines="none">
          <ion-list-header> Tutorial </ion-list-header>
          <ion-menu-toggle autoHide="false">
            <ion-item button (click)="openTutorial()" detail="false">
              <ion-icon slot="start" name="hammer"></ion-icon>
              <ion-label>Show Tutorial</ion-label>
            </ion-item>
          </ion-menu-toggle>
        </ion-list>
      </ion-content>
    </ion-menu>

    <ion-router-outlet id="main-content"></ion-router-outlet>
  </ion-split-pane>
</ion-app>
```

---

### src/app/app.component.scss

```scss
ion-menu ion-content {
  --padding-top: 20px;
  --padding-bottom: 20px;
  --background: var(--ion-item-background, var(--ion-background-color, #ffffff));
}

/* Remove background transitions for switching themes */
ion-menu ion-item {
  --transition: none;
}

ion-item.selected {
  --color: var(--ion-color-primary);
}

/*
 * Material Design Menu
*/
ion-menu.md ion-list {
  padding: 20px 0;
}

ion-menu.md ion-list-header {
  padding-right: 18px;
  padding-left: 18px;

  font-size: min(0.875rem, 32px);

  font-weight: 450;

  letter-spacing: 0.1em;

  text-transform: uppercase;
}

ion-menu.md ion-item {
  --padding-start: 18px;

  margin-right: 10px;

  border-radius: 0 50px 50px 0;

  font-weight: 500;
}

ion-menu.md ion-item.selected {
  /* stylelint-disable-next-line color-function-notation */
  --background: rgba(var(--ion-color-primary-rgb), 0.14);
}

ion-menu.md ion-item.selected ion-icon {
  color: var(--ion-color-primary);
}

ion-menu.md ion-list-header,
ion-menu.md ion-item ion-icon {
  color: var(--ion-color-step-650, #5f6368);
}

ion-menu.md ion-list:not(:last-of-type) {
  border-bottom: 1px solid var(--ion-color-step-150, #d7d8da);
}

/*
 * iOS Menu
*/
ion-menu.ios ion-list-header {
  margin-bottom: 8px;

  padding-right: 16px;
  padding-left: 16px;

  font-size: clamp(22px, 1.375rem, 40px);
}

ion-menu.ios ion-list {
  padding: 20px 0 0;
}

ion-menu.ios ion-item {
  --padding-start: 16px;
  --min-height: 50px;
}

ion-menu.ios ion-item ion-icon {
  color: #73849a;

  font-size: 24px;
}

ion-menu.ios ion-item.selected ion-icon {
  color: var(--ion-color-primary);
}
```

---

### src/app/app.component.spec.ts

```ts
import { provideHttpClientTesting } from '@angular/common/http/testing';
import { CUSTOM_ELEMENTS_SCHEMA, importProvidersFrom } from '@angular/core';
import { TestBed } from '@angular/core/testing';
import { provideRouter } from '@angular/router';
import { SwUpdate } from '@angular/service-worker';
import { MenuController, provideIonicAngular } from '@ionic/angular/standalone';
import { IonicStorageModule } from '@ionic/storage-angular';
import { AppComponent } from './app.component';
import { routes } from './app.routes';
import { UserService } from './providers/user.service';

describe('AppComponent', () => {
  let menuSpy, userDataSpy, swUpdateSpy, app, fixture;

  beforeEach(async () => {
    menuSpy = jasmine.createSpyObj('MenuController', ['toggle', 'enable']);
    userDataSpy = jasmine.createSpyObj('UserService', ['isLoggedIn', 'logout']);
    userDataSpy.isLoggedIn.and.returnValue(Promise.resolve(false));
    swUpdateSpy = jasmine.createSpyObj('SwUpdate', [
      'available',
      'activateUpdate',
    ]);
    swUpdateSpy.versionUpdates = {
      subscribe: jasmine.createSpy('subscribe').and.returnValue({ unsubscribe: () => {} })
    };

    await TestBed.configureTestingModule({
      imports: [AppComponent],
      schemas: [CUSTOM_ELEMENTS_SCHEMA],
      providers: [
        provideIonicAngular(),
        provideRouter(routes),
        provideHttpClientTesting(),
        importProvidersFrom(IonicStorageModule.forRoot()),
        { provide: MenuController, useValue: menuSpy },
        { provide: UserService, useValue: userDataSpy },
        { provide: SwUpdate, useValue: swUpdateSpy },
      ],
    }).compileComponents();
  });
  beforeEach(() => {
    fixture = TestBed.createComponent(AppComponent);
    app = fixture.debugElement.componentInstance;
    app.storage.create();
    fixture.detectChanges();
  });

  it('should create the app', () => {
    expect(app).toBeTruthy();
  });
});
```

---

### src/app/app.component.ts

```ts
import {
  Component,
  HostListener,
  inject,
  OnInit,
  ViewEncapsulation,
} from "@angular/core";
import { Router, RouterLink, RouterLinkActive } from "@angular/router";
import { SwUpdate } from "@angular/service-worker";
import { addIcons } from "ionicons";



import { SplashScreen } from "@capacitor/splash-screen";
import { StatusBar } from "@capacitor/status-bar";

import { Storage } from "@ionic/storage-angular";

import { FormsModule } from "@angular/forms";
import {
  IonApp,
  IonContent,
  IonIcon,
  IonItem,
  IonLabel,
  IonList,
  IonListHeader,
  IonMenu,
  IonMenuToggle,
  IonRouterOutlet,
  IonSplitPane,
  IonToggle,
  MenuController,
  Platform,
  ToastController,
} from "@ionic/angular/standalone";
import {
  arrowBackOutline,
  calendarOutline,
  hammer,
  help,
  informationCircleOutline,
  logIn,
  logoInstagram,
  logOut,
  mapOutline,
  moonOutline,
  peopleOutline,
  person,
  personAdd,
  informationCircle,
  informationCircleSharp,
  newspaper,
  newspaperOutline,
  leaf,
  leafOutline
  
} from "ionicons/icons";
import { UserService } from "./providers/user.service";

@Component({
  selector: "app-root",
  templateUrl: "./app.component.html",
  styleUrls: ["./app.component.scss"],
  imports: [
    RouterLink,
    RouterLinkActive,
    IonRouterOutlet,
    IonLabel,
    IonIcon,
    IonMenuToggle,
    IonToggle,
    IonList,
    IonListHeader,
    IonItem,
    IonContent,
    IonMenu,
    IonSplitPane,
    IonApp,
    FormsModule,
  ],
  providers: [MenuController, ToastController],
  encapsulation: ViewEncapsulation.None,
})
export class AppComponent implements OnInit {
  private router = inject(Router);
  private storage = inject(Storage);
  private userService = inject(UserService);
  private swUpdate = inject(SwUpdate);
  private toastCtrl = inject(ToastController);
  private menu = inject(MenuController);
  private platform = inject(Platform);

        // { title: "About", url: "/app/tabs/about", icon: "information-circle" },
  appPages = [
    { title: "Eventi", url: "/app/tabs/schedule", icon: "calendar" },
    { title: "Attività", url: "/app/tabs/speakers", icon: "people" },
    { title: "Map", url: "/app/tabs/map", icon: "map" },


    { title: "Turismo", url: "/app/tabs/turismo", icon: "information-circle" },
        { title: "Infiorata", url: "/app/tabs/infiorata", icon: "information-circle" },
    { title: "Vivere Camerino", url: "/app/tabs/vivere-camerino", icon: "newspaper" },
    { title: "Cronache Maceratesi", url: "/app/tabs/cronache-maceratesi", icon: "newspaper" },
    { title: "Picchio News", url: "/app/tabs/picchio-news", icon: "newspaper" },
    { title: "Cosmari", url: "/app/tabs/cosmari", icon: "leaf" }
  ];
  loggedIn = false;
  dark = false;

  private inactivityTimer: any;
  private readonly TIMEOUT = 60000 // 20 secondi reali

  constructor() {
    addIcons({
      calendarOutline,
      peopleOutline,
      mapOutline,
      informationCircleOutline,
      person,
      help,
      logOut,
      logIn,
      personAdd,
      moonOutline,
      hammer,
      logoInstagram,
      informationCircle,
      arrowBackOutline,
      newspaper,
      newspaperOutline,
      informationCircleSharp,
      leaf,leafOutline
    });
  }

  // ========== Inattività: ascolta SOLO gesti reali, non lo scroll ==========
  @HostListener("document:pointerdown")
  @HostListener("document:keydown")
  @HostListener("document:touchstart")
  onUserAction() {
    this.resetInactivityTimer();
  }

  // quando la tab torna visibile / finestra rifocalizzata → reset
  @HostListener("document:visibilitychange")
  onVisibilityChange() {
    if (document.visibilityState === "visible") {
      this.resetInactivityTimer();
    }
  }

  @HostListener("window:focus")
  onFocus() {
    this.resetInactivityTimer();
  }

  private resetInactivityTimer() {
    if (this.inactivityTimer) {
      clearTimeout(this.inactivityTimer);
    }

    this.inactivityTimer = setTimeout(() => {
      // evita redirect se sei già su /tutorial
      if (this.isOnTutorial()) return;

      console.log("⏳ Timeout di inattività, torno al tutorial");
      this.router.navigateByUrl("/tutorial", { replaceUrl: true })
        .catch(() => {});
    }, this.TIMEOUT);
  }

  private isOnTutorial(): boolean {
    // normalizza il path corrente (ignora query/hash)
    const tree = this.router.parseUrl(this.router.url);
    const current =
      "/" +
      (tree.root.children["primary"]?.segments.map((s) => s.path).join("/") ??
        "");
    return current === "/tutorial";
  }

  // ========================================================================

  async ngOnInit() {
    this.initializeApp();
    await this.storage.create();
    this.checkLoginStatus();
    this.listenForLoginEvents();

    // avvia il timer di inattività al boot
    this.resetInactivityTimer();

    // Service Worker update toast
    this.swUpdate.versionUpdates.subscribe(async () => {
      const toast = await this.toastCtrl.create({
        message: "Update available!",
        position: "bottom",
        buttons: [{ role: "cancel", text: "Reload" }],
      });
      await toast.present();
      toast
        .onDidDismiss()
        .then(() => this.swUpdate.activateUpdate())
        .then(() => window.location.reload());
    });
  }

  initializeApp() {
    this.platform.ready().then(() => {
      if (this.platform.is("hybrid")) {
        StatusBar.hide();
        SplashScreen.hide();
      }
    });
  }

  checkLoginStatus() {
    return this.userService.isLoggedIn().then((loggedIn) => {
      return this.updateLoggedInStatus(loggedIn);
    });
  }

  updateLoggedInStatus(loggedIn: boolean) {
    setTimeout(() => {
      this.loggedIn = loggedIn;
    }, 300);
  }

  listenForLoginEvents() {
    window.addEventListener("user:login", () => this.updateLoggedInStatus(true));
    window.addEventListener("user:signup", () => this.updateLoggedInStatus(true));
    window.addEventListener("user:logout", () => this.updateLoggedInStatus(false));
  }

  logout() {
    this.userService.logout().then(() => {
      return this.router.navigateByUrl("/app/tabs/schedule");
    });
  }

  openTutorial() {
    this.menu.enable(false);
    this.storage.set("ion_did_tutorial", false);
    this.router.navigateByUrl("/tutorial");
  }

  toggleDarkMode() {
    document.documentElement.classList.toggle("ion-palette-dark", this.dark);
  }
}
```

---

### src/app/app.routes.ts

```ts
import { Routes } from '@angular/router';
import { canDeactivateSupportPage } from './providers/can-deactivate-support.guard';
import { checkTutorialGuard } from './providers/check-tutorial.guard';

export const routes: Routes = [
  {
    path: '',
    redirectTo: '/tutorial',
    pathMatch: 'full',
  },
  {
    path: 'account',
    loadComponent: () =>
      import('./pages/account/account').then(m => m.AccountPage),
  },
  {
    path: 'support',
    loadComponent: () =>
      import('./pages/support/support').then(m => m.SupportPage),
    canDeactivate: [canDeactivateSupportPage],
  },
  {
    path: 'login',
    loadComponent: () => import('./pages/login/login').then(m => m.LoginPage),
  },
  {
    path: 'signup',
    loadComponent: () =>
      import('./pages/signup/signup').then(m => m.SignupPage),
  },
  {
    path: 'app',
    loadChildren: () =>
      import('./pages/tabs-page/routes').then(m => m.TABS_ROUTES),
  },
  {
    path: 'tutorial',
    loadComponent: () =>
      import('./pages/tutorial/tutorial').then(m => m.TutorialPage),
    canMatch: [checkTutorialGuard],
  },
];
```

---

### src/app/app.scss

```scss
[hidden] {
  /* stylelint-disable-next-line declaration-no-important */
  display: none !important;
}
```

---

### src/app/interfaces/conference.interfaces.ts

```ts
export interface Speaker {
  name: string;
  logo: string;
  profilePic: string;
  instagram: string;
  twitter: string;
  about: string;
  title: string;
  location: string;
  email: string;
  phone: string;
  sito:  string;

  category: string;
  description: string;
  address: string;
  openingHours: string
  id: string;
  sessions?: Session[];
}

export interface Session {
  hide?: boolean;
  name: string;
  location: string;
  description?: string;
  speakerNames: string[];
  timeStart: string;
  timeEnd: string;
  tracks: string[];
  id: string;
  speakers?: Speaker[];
}

export interface Group {
  time: string;
  sessions: Session[];
  hide?: boolean;
}

export interface ScheduleDay {
  date: string;
  groups: Group[];
  shownSessions?: number;
}

export interface Track {
  name: string;
  icon: string;
}

export interface MapLocation {
  name: string;
  lat: number;
  lng: number;
  center?: boolean;   
  icon?: string;     
}

export interface ConferenceData {
  schedule: ScheduleDay[];
  speakers: Speaker[];
  tracks: Track[];
  map: MapLocation[];
}

export interface Location {
  id: number;
  name: string;
  lat: number;
  lng: number;
  center?: boolean;   
  icon?: string;      
}
```

---

### src/app/interfaces/user-options.ts

```ts
export interface UserOptions {
  username: string;
  password: string;
}
```

---

### src/app/pages/about-popover/about-popover.ts

```ts
import { Component, inject } from '@angular/core';
import { Router } from '@angular/router';
import {
  IonItem,
  IonLabel,
  IonList,
  PopoverController,
} from '@ionic/angular/standalone';

@Component({
    template: `
    <ion-list>
      <ion-item
        button
        (click)="close('https://ionicframework.com/getting-started')"
      >
        <ion-label>Learn Ionic</ion-label>
      </ion-item>
      <ion-item button (click)="close('https://ionicframework.com/docs/')">
        <ion-label>Documentation</ion-label>
      </ion-item>
      <ion-item button (click)="close('https://showcase.ionicframework.com')">
        <ion-label>Showcase</ion-label>
      </ion-item>
      <ion-item button (click)="close('https://github.com/ionic-team/ionic')">
        <ion-label>GitHub Repo</ion-label>
      </ion-item>
      <ion-item button (click)="support()">
        <ion-label>Support</ion-label>
      </ion-item>
    </ion-list>
  `,
    imports: [IonList, IonItem, IonLabel],
    providers: [PopoverController]
})
export class PopoverPage {
  private router = inject(Router);
  private popoverCtrl = inject(PopoverController);

  support() {
    this.router.navigate(['/support']);
    this.popoverCtrl.dismiss();
  }

  close(url: string) {
    window.open(url, '_blank');
    this.popoverCtrl.dismiss();
  }
}
```

---

### src/app/pages/about/about.html

```html
<ion-content>
  <ion-header class="ion-no-border">
    <ion-toolbar>
      <ion-buttons slot="start">
        <ion-menu-button></ion-menu-button>
      </ion-buttons>
      <!-- <ion-buttons slot="end">
        <ion-button (click)="presentPopover($event)">
          <ion-icon
            slot="icon-only"
            ios="ellipsis-horizontal"
            md="ellipsis-vertical"
          ></ion-icon>
        </ion-button>
      </ion-buttons> -->
    </ion-toolbar>
  </ion-header>

  <div class="about-header">
    <!-- Instead of loading an image each time the select changes, use opacity to transition them -->
    <div
      class="about-image madison"
      [ngStyle]="location === 'madison' && {'opacity': '1'}"
    ></div>
    <div
      class="about-image austin"
      [ngStyle]="location === 'austin' && {'opacity': '1'}"
    ></div>
    <div
      class="about-image chicago"
      [ngStyle]="location === 'chicago' && {'opacity': '1'}"
    ></div>
    <div
      class="about-image seattle"
      [ngStyle]="location === 'seattle' && {'opacity': '1'}"
    ></div>
  </div>

  <div class="about-info">
    <h3 class="ion-padding-top ion-padding-start">About</h3>

    <p class="ion-padding-start ion-padding-end">
      <!-- The Ionic Conference is a one-day event happening on {{ conferenceDate | date:
      'mediumDate' }}, featuring talks from the Ionic team. The conference focuses on
      building applications with Ionic Framework, including topics such as app migration
      to the latest version, Angular best practices, Webpack, Sass, and other technologies
      commonly used in the Ionic ecosystem. Tickets are completely sold out, and we're expecting
      over 1,000 developers — making this the largest Ionic conference to date! -->
      Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.

    <h3 class="ion-padding-top ion-padding-start">Details</h3>

    <ion-list lines="none">
      <ion-item>
        <ion-select
          label="Location"
          [(ngModel)]="location"
          [interfaceOptions]="selectOptions"
        >
          <ion-select-option value="madison">Madison, WI</ion-select-option>
          <ion-select-option value="austin">Austin, TX</ion-select-option>
          <ion-select-option value="chicago">Chicago, IL</ion-select-option>
          <ion-select-option value="seattle">Seattle, WA</ion-select-option>
        </ion-select>
      </ion-item>
      <ion-item button="true" id="open-date-input">
        <ion-label> Date </ion-label>
        <ion-text slot="end"
          >{{ conferenceDate | date: 'mediumDate' }}</ion-text
        >
        <ion-popover
          id="date-input-popover"
          trigger="open-date-input"
          [showBackdrop]="false"
          side="top"
          alignment="end"
        >
          <ng-template>
            <ion-datetime
              max="2056"
              [(ngModel)]="conferenceDate"
              presentation="date"
            ></ion-datetime>
          </ng-template>
        </ion-popover>
      </ion-item>
    </ion-list>

    <h3 class="ion-padding-top ion-padding-start">Internet</h3>

    <ion-list lines="none">
      <ion-item>
        <ion-label> Wifi network </ion-label>
        <ion-label class="ion-text-end">
          ica{{conferenceDate | date: 'y'}}
        </ion-label>
      </ion-item>
      <ion-item>
        <ion-label> Password </ion-label>
        <ion-label class="ion-text-end"> makegoodthings </ion-label>
      </ion-item>
    </ion-list>
  </div>
</ion-content>
```

---

### src/app/pages/about/about.scss

```scss
ion-toolbar {
  --background: transparent;
  --color: white;
  position: absolute;

  top: 0;
  right: 0;
  left: 0;
}

ion-toolbar ion-button,
ion-toolbar ion-back-button,
ion-toolbar ion-menu-button {
  --color: white;
}

.about-header {
  position: relative;

  width: 100%;
  height: 30%;
}

.about-header .about-image {
  position: absolute;

  inset: 0;

  transition: opacity 500ms ease-in-out;

  background-repeat: no-repeat;

  background-position: center;
  background-size: cover;

  opacity: 0;
}

.about-header .madison {
  background-image: url('/assets/img/about/madison.jpg');
}

.about-header .austin {
  background-image: url('/assets/img/about/austin.jpg');
}

.about-header .chicago {
  background-image: url('/assets/img/about/chicago.jpg');
}

.about-header .seattle {
  background-image: url('/assets/img/about/seattle.jpg');
}

.about-info {
  position: relative;

  margin-top: -10px;

  border-radius: 10px;

  background: var(--ion-background-color, #ffffff);

  z-index: 2; // display rounded border above header image
}

.about-info h3 {
  margin-top: 0;
}

.about-info ion-list {
  padding-top: 0;
}

.about-info p {
  color: var(--ion-color-dark);

  line-height: 130%;
}

.about-info ion-icon {
  margin-inline-end: 32px;
}

#date-input-popover {
  --offset-y: -var(--ion-safe-area-bottom);
  --max-width: 90%;
  --width: 336px;
}

/*
 * iOS Only
 */

.ios .about-info {
  --ion-padding: 19px;
}

.ios .about-info h3 {
  font-weight: 700;
}
```

---

### src/app/pages/about/about.ts

```ts
import { DatePipe, NgStyle } from '@angular/common';
import { Component, inject } from '@angular/core';
import { FormsModule } from '@angular/forms';
import {
  IonButton,
  IonButtons,
  IonContent,
  IonDatetime,
  IonHeader,
  IonIcon,
  IonItem,
  IonLabel,
  IonList,
  IonMenuButton,
  IonPopover,
  IonSelect,
  IonSelectOption,
  IonText,
  IonToolbar,
  PopoverController,
} from '@ionic/angular/standalone';
import { addIcons } from 'ionicons';
import { ellipsisHorizontal, ellipsisVertical } from 'ionicons/icons';
import { PopoverPage } from '../about-popover/about-popover';

@Component({
    selector: 'page-about',
    templateUrl: 'about.html',
    styleUrls: ['./about.scss'],
    imports: [
        NgStyle,
        FormsModule,
        DatePipe,
        IonContent,
        IonHeader,
        IonToolbar,
        IonButtons,
        IonMenuButton,
        IonButton,
        IonIcon,
        IonList,
        IonItem,
        IonLabel,
        IonSelect,
        IonSelectOption,
        IonPopover,
        IonDatetime,
        IonText,
    ],
    providers: [PopoverController]
})
export class AboutPage {
  location = 'madison';
  conferenceDate = '2047-05-17';

  selectOptions = {
    header: 'Select a Location',
  };

  private popoverCtrl = inject(PopoverController);

  constructor() {
    addIcons({ ellipsisHorizontal, ellipsisVertical });
  }

  async presentPopover(event: Event) {
    const popover = await this.popoverCtrl.create({
      component: PopoverPage,
      event,
    });
    await popover.present();
  }
}
```

---

### src/app/pages/account/account.html

```html
<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Account</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  @if(username) {
  <div class="ion-padding-top ion-text-center">
    <img
      ngSrc="https://www.gravatar.com/avatar?d=mm&s=140"
      width="140"
      height="140"
      priority
      alt="User avatar"
      class="user-avatar"
    />
    <h2>{{username}}</h2>

    <ion-list inset>
      <ion-item (click)="updatePicture()">Update Picture</ion-item>
      <ion-item (click)="changeUsername()">Change Username</ion-item>
      <ion-item (click)="changePassword()">Change Password</ion-item>
      <ion-item (click)="support()">Support</ion-item>
      <ion-item (click)="logout()">Logout</ion-item>
    </ion-list>
  </div>
  }
</ion-content>
```

---

### src/app/pages/account/account.scss

```scss
img {
  max-width: 140px;

  border-radius: 50%;
}
```

---

### src/app/pages/account/account.ts

```ts
import { AfterViewInit, Component, inject } from '@angular/core';
import { Router } from '@angular/router';

import { NgOptimizedImage } from '@angular/common';
import {
  AlertController,
  IonButtons,
  IonContent,
  IonHeader,
  IonItem,
  IonList,
  IonMenuButton,
  IonTitle,
  IonToolbar,
} from '@ionic/angular/standalone';
import { UserService } from '../../providers/user.service';

@Component({
    selector: 'page-account',
    templateUrl: 'account.html',
    styleUrls: ['./account.scss'],
    imports: [
        IonHeader,
        IonToolbar,
        IonButtons,
        IonMenuButton,
        IonTitle,
        IonContent,
        IonItem,
        IonList,
        NgOptimizedImage,
    ],
    providers: [AlertController]
})
export class AccountPage implements AfterViewInit {
  private alertCtrl = inject(AlertController);
  private router = inject(Router);
  private user = inject(UserService);

  username: string;

  ngAfterViewInit() {
    this.getUsername();
  }

  updatePicture() {
    console.log('Clicked to update picture');
  }

  // Present an alert with the current username populated
  // clicking OK will update the username and display it
  // clicking Cancel will close the alert and do nothing
  async changeUsername() {
    const alert = await this.alertCtrl.create({
      header: 'Change Username',
      buttons: [
        'Cancel',
        {
          text: 'Ok',
          handler: (data: { username: string }) => {
            this.user.setUsername(data.username);
            this.getUsername();
          },
        },
      ],
      inputs: [
        {
          type: 'text',
          name: 'username',
          value: this.username,
          placeholder: 'username',
        },
      ],
    });
    await alert.present();
  }

  getUsername() {
    this.user.getUsername().then(username => {
      this.username = username;
    });
  }

  changePassword() {
    console.log('Clicked to change password');
  }

  logout() {
    this.user.logout();
    this.router.navigateByUrl('/login');
  }

  support() {
    this.router.navigateByUrl('/support');
  }
}
```

---

### src/app/pages/comune-castelraimondo/comune-castelraimondo.page.html

```html
<ion-header>
  <ion-toolbar>
    <ion-title>Comune di Castelraimondo</ion-title>

    <ion-buttons slot="end">
      <ion-button color="danger" (click)="goBack()">
        <ion-icon slot="start" name="arrow-back-outline"></ion-icon>
        Torna indietro
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content fullscreen>
  <!-- Browser/PWA -->
  <iframe
    *ngIf="isBrowser"
    [src]="safeUrl"
    style="width:100%;height:100%;border:none;"
    title="Comune di Castelraimondo"
  ></iframe>

  <!-- App mobile -->
  <p *ngIf="!isBrowser" style="padding:16px">
    Caricamento sito istituzionale...
  </p>
</ion-content>
```

---

### src/app/pages/comune-castelraimondo/comune-castelraimondo.page.scss

```scss
:host, ion-content, iframe { display:block; width:100%; height:100%; }
```

---

### src/app/pages/comune-castelraimondo/comune-castelraimondo.page.ts

```ts
import { Component, OnInit } from '@angular/core';
import { NgIf } from '@angular/common';
import {
  IonContent, IonHeader, IonToolbar, IonTitle,
  IonButtons, IonButton, IonIcon,
} from '@ionic/angular/standalone';
import { Router } from '@angular/router';
import { DomSanitizer, SafeResourceUrl } from '@angular/platform-browser';

declare var cordova: any;

@Component({
  selector: 'app-comune-castelraimondo',
  standalone: true,
  templateUrl: './comune-castelraimondo.page.html',
  styleUrls: ['./comune-castelraimondo.page.scss'],
  imports: [
    NgIf, IonContent, IonHeader, IonToolbar, IonTitle,
    IonButtons, IonButton, IonIcon,
  ],
})
export class ComuneCastelraimondoPage implements OnInit {
  readonly url = 'https://www.comune.castelraimondo.mc.it/';
  isBrowser = false;
  safeUrl: SafeResourceUrl | null = null;
  private ref: any;

  constructor(private router: Router, private sanitizer: DomSanitizer) {}

  ngOnInit() {
    // Browser/PWA → iframe
    if (!(window as any).cordova) {
      this.isBrowser = true;
      this.safeUrl = this.sanitizer.bypassSecurityTrustResourceUrl(this.url);
      return;
    }

    // Device → ThemeableBrowser
    try {
      this.ref = cordova?.ThemeableBrowser?.open(this.url, '_blank', {
        toolbar: { height: 50, color: '#222222' },
        closeButton: {
          wwwImage: 'assets/icon/close.png',
          align: 'left',
          event: 'closePressed',
        },
      });
      this.ref?.addEventListener?.('closePressed', () => this.ref?.close?.());
    } catch {
      // Fallback: browser di sistema
      window.open(this.url, '_system');
    }
  }

  goBack() {
    try { this.ref?.close?.(); } catch {}
    this.router.navigate(['/app/tabs/speakers']); // cambia destinazione se preferisci
  }
}
```

---

### src/app/pages/cosmari/cosmari.page.html

```html
<ion-header>
  <ion-toolbar>
    <ion-title>
      <ion-icon name="recycle-outline" style="vertical-align:middle;margin-right:6px"></ion-icon>
      Cosmari – Castelraimondo
    </ion-title>

    <ion-buttons slot="end">
      <ion-button color="danger" (click)="goBack()">
        <ion-icon slot="start" name="arrow-back-outline"></ion-icon>
        Torna indietro
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content fullscreen class="cosmari-page">
  <!-- PWA/Browser -->
  <ng-container *ngIf="isBrowser; else deviceTpl">
    <ng-container *ngIf="canIframe; else blockedTpl">
      <iframe
        #frame
        class="ext-frame"
        [src]="safeUrl"
        sandbox="allow-scripts allow-same-origin allow-forms"
        referrerpolicy="no-referrer"
        allow="geolocation 'none'; microphone 'none'; camera 'none'; payment 'none'"
        title="Cosmari Castelraimondo"
        (load)="onIframeLoad()"
      ></iframe>
    </ng-container>

    <ng-template #blockedTpl>
      <div class="blocked">
        <ion-icon name="lock-closed-outline" aria-hidden="true"></ion-icon>
        <h3>Il sito non consente l’apertura dentro l’app</h3>
        <p>Aprilo in una nuova scheda.</p>
        <ion-button expand="block" (click)="openExternal()">Apri in nuova scheda</ion-button>
      </div>
    </ng-template>
  </ng-container>

  <!-- Device ibrido -->
  <ng-template #deviceTpl>
    <p class="loading-msg">Caricamento Cosmari...</p>
  </ng-template>
</ion-content>
```

---

### src/app/pages/cosmari/cosmari.page.scss

```scss
.cosmari-page {
  --background: var(--ion-background-color);

  ion-content::part(scroll) {
    height: 100%;
  }

  .cookie-hint {
    padding: 8px 12px;
    font-size: 0.9rem;
    color: var(--ion-color-step-600, #60646b);
    display: flex;
    gap: 8px;
    align-items: center;
    flex-wrap: wrap;
  }

  .ext-frame {
    display: block;
    width: 100%;
    height: calc(100% - 44px); /* lascia spazio al hint; regola se vuoi */
    border: none;
  }

  .loading-msg {
    padding: 16px;
  }
}
```

---

### src/app/pages/cosmari/cosmari.page.ts

```ts
import { Component, OnInit, ViewChild, ElementRef } from '@angular/core';
import { NgIf } from '@angular/common';
import {
  IonContent, IonHeader, IonToolbar, IonTitle,
  IonButtons, IonButton, IonIcon
} from '@ionic/angular/standalone';
import { Router } from '@angular/router';
import { DomSanitizer, SafeResourceUrl } from '@angular/platform-browser';
import { addIcons } from 'ionicons';
import { arrowBackOutline, lockClosedOutline } from 'ionicons/icons';

declare var cordova: any;

@Component({
  selector: 'app-cosmari',
  standalone: true,
  templateUrl: './cosmari.page.html',
  styleUrls: ['./cosmari.page.scss'],
  imports: [NgIf, IonContent, IonHeader, IonToolbar, IonTitle, IonButtons, IonButton, IonIcon],
})
export class CosmariPage implements OnInit {
  // Prefisso CONSENTITO
  private readonly BASE = 'https://cosmariambiente.it/comuni/castelraimondo';
  private readonly ALLOWED_PREFIXES = [
    'https://cosmariambiente.it/comuni/castelraimondo',
    'https://cosmariambiente.it/comuni/castelraimondo/'
  ];

  @ViewChild('frame', { static: false }) frame?: ElementRef<HTMLIFrameElement>;

  isBrowser = false;
  safeUrl: SafeResourceUrl | null = null;
  canIframe = true;              // fallback se l’iframe non riesce a caricarsi
  private ref: any;
  private iframeLoadTimer?: any; // euristica per capire se l’embed è bloccato

  constructor(private router: Router, private sanitizer: DomSanitizer) {
    addIcons({ arrowBackOutline, lockClosedOutline });
  }

  ngOnInit() {
    // PWA / Browser: prova iframe
    if (!(window as any).cordova) {
      this.isBrowser = true;
      this.safeUrl = this.sanitizer.bypassSecurityTrustResourceUrl(this.BASE);
      // se dopo 2.5s non abbiamo un load “utile”, mostriamo fallback
      this.iframeLoadTimer = setTimeout(() => {
        this.canIframe = false; // probabilmente X-Frame-Options / CSP frame-ancestors
      }, 2500);
      return;
    }

    // Device (Cordova/Capacitor): ThemeableBrowser con filtro per prefisso
    try {
      this.ref = cordova?.ThemeableBrowser?.open(this.BASE, '_blank', {
        toolbar: { height: 50, color: '#222222' },
        closeButton: { wwwImage: 'assets/icon/close.png', align: 'left', event: 'closePressed' },
      });

      this.ref?.addEventListener?.('closePressed', () => this.ref?.close?.());

      this.ref?.addEventListener?.('loadstart', (ev: any) => {
        const url: string = ev?.url || '';
        const allowed = this.ALLOWED_PREFIXES.some(prefix => url.startsWith(prefix));
        if (!allowed) {
          try { this.ref.stop(); } catch {}
          this.ref.executeScript({ code: "alert('Navigazione non consentita in modalità kiosk');" });
          this.ref.executeScript({ code: `window.location.href='${this.BASE}';` });
        }
      });
    } catch {
      window.open(this.BASE, '_system');
    }
  }

  onIframeLoad() {
    // se arriva almeno un load, sospendi il fallback
    if (this.iframeLoadTimer) {
      clearTimeout(this.iframeLoadTimer);
      this.iframeLoadTimer = undefined;
    }
  }

  openExternal() {
    window.open(this.BASE, '_blank', 'noopener');
  }

  goBack() {
    try { this.ref?.close?.(); } catch {}
    this.router.navigate(['/app/tabs/speakers']);
  }
}
```

---

### src/app/pages/cronache-maceratesi/cronache-maceratesi.page.html

```html
<ion-header>
  <ion-toolbar>
    <ion-title>Cronache Maceratesi</ion-title>

    <ion-buttons slot="end">
      <ion-button color="danger" (click)="goBack()">
        <ion-icon slot="start" name="arrow-back-outline"></ion-icon>
        Torna indietro
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content fullscreen class="cm-page">
  <!-- Browser/PWA: iframe SANDBOX per bloccare uscite (popup/top-navigation) -->
  <iframe
    *ngIf="isBrowser"
    class="ext-frame"
    [src]="safeUrl"
    sandbox="allow-scripts allow-same-origin allow-forms"
    referrerpolicy="no-referrer"
    allow="geolocation 'none'; microphone 'none'; camera 'none'; payment 'none'"
    title="Cronache Maceratesi"
  ></iframe>

  <!-- App mobile: placeholder/loader; qui potresti aprire un in-app browser se vuoi -->
  <p *ngIf="!isBrowser" class="loading-msg">
    Caricamento Cronache Maceratesi...
  </p>
</ion-content>
```

---

### src/app/pages/cronache-maceratesi/cronache-maceratesi.page.scss

```scss
// :host, ion-content { display:block; width:100%; height:100%; }
// iframe { display:block; width:100%; height:100%; }


.cm-page {
  --background: var(--ion-background-color);

  /* fa sì che l'area scrollabile riempia l'intero content */
  ion-content::part(scroll) {
    height: 100%;
  }

  .ext-frame {
    display: block;
    width: 100%;
    height: 100%;
    border: none;
  }

  .loading-msg {
    padding: 16px;
  }
}
```

---

### src/app/pages/cronache-maceratesi/cronache-maceratesi.page.ts

```ts
import { Component, OnInit, inject } from '@angular/core';
import { DomSanitizer, SafeResourceUrl } from '@angular/platform-browser';
import { Router } from '@angular/router';

import {
  IonHeader, IonToolbar, IonTitle, IonButtons, IonButton, IonIcon, IonContent
} from '@ionic/angular/standalone';
import { isPlatform, NavController } from '@ionic/angular';
import { CommonModule } from '@angular/common';

import { addIcons } from 'ionicons';
import { arrowBackOutline } from 'ionicons/icons';

@Component({
  standalone: true,
  selector: 'page-cronache-maceratesi',
  templateUrl: './cronache-maceratesi.page.html',
  styleUrls: ['./cronache-maceratesi.page.scss'],
  imports: [
    CommonModule,
    IonHeader, IonToolbar, IonTitle, IonButtons, IonButton, IonIcon, IonContent
  ],
})
export class CronacheMaceratesiPage implements OnInit {
  private sanitizer = inject(DomSanitizer);
  private nav = inject(NavController);
  private router = inject(Router);

  // URL del sito Cronache Maceratesi
  private readonly RAW_URL = 'https://www.cronachemaceratesi.it';

  isBrowser = true;          // true = PWA/desktop browser, false = app ibrida
  safeUrl!: SafeResourceUrl; // URL sanitizzato per l'iframe

  constructor() {
    addIcons({ arrowBackOutline });
    // considera "ibrido" se gira dentro Capacitor/Cordova
    this.isBrowser = !(isPlatform('hybrid') || isPlatform('capacitor') || isPlatform('cordova'));
  }

  ngOnInit(): void {
    this.safeUrl = this.sanitizer.bypassSecurityTrustResourceUrl(this.RAW_URL);
  }

  goBack() {
    // torna indietro nello stack (o usa navigateRoot(...) se vuoi una rotta fissa)
    this.nav.back();
  }
}
```

---

### src/app/pages/infiorata/infiorata.page.html

```html
<ion-header>
  <ion-toolbar>
    <ion-title>Infiorata di Castelraimondo</ion-title>

    <ion-buttons slot="end">
      <ion-button color="danger" (click)="goBack()">
        <ion-icon slot="start" name="arrow-back-outline"></ion-icon>
        Torna indietro
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content fullscreen class="infiorata-page">
  <!-- Browser/PWA: iframe con URL “sanitized” e SANDBOX -->
  <iframe
    *ngIf="isBrowser"
    class="ext-frame"
    [src]="safeUrl"
    sandbox="allow-scripts allow-same-origin allow-forms"
    referrerpolicy="no-referrer"
    allow="geolocation 'none'; microphone 'none'; camera 'none'; payment 'none'"
    title="Sito Infiorata"
  ></iframe>

  <!-- App (Capacitor/Cordova): testo/loader mentre apro ThemeableBrowser -->
  <p *ngIf="!isBrowser" class="loading-msg">
    Caricamento Infiorata...
  </p>
</ion-content>
```

---

### src/app/pages/infiorata/infiorata.page.scss

```scss
.infiorata-page {
  --background: var(--ion-background-color);

  /* assicura che l'area scrollabile riempia il content */
  ion-content::part(scroll) {
    height: 100%;
  }

  .ext-frame {
    display: block;
    width: 100%;
    height: 100%;
    border: none;
  }

  .loading-msg {
    padding: 16px;
  }
}
```

---

### src/app/pages/infiorata/infiorata.page.ts

```ts
import { Component, OnInit } from '@angular/core';
import { NgIf } from '@angular/common';
import {
  IonContent, IonHeader, IonToolbar, IonTitle,
  IonButtons, IonButton, IonIcon
} from '@ionic/angular/standalone';
import { Router } from '@angular/router';
import { DomSanitizer, SafeResourceUrl } from '@angular/platform-browser';

declare var cordova: any;

@Component({
  selector: 'app-infiorata',
  standalone: true,
  templateUrl: './infiorata.page.html',
  styleUrls: ['./infiorata.page.scss'],
  imports: [
    NgIf,
    IonContent,
    IonHeader,
    IonToolbar,
    IonTitle,
    IonButtons,
    IonButton,
    IonIcon,
  ],
})
export class InfiorataPage implements OnInit {
  // ✅ nuovo dominio richiesto
  readonly url = 'https://infioratadicastelraimondo.it/';
  readonly whitelist = [
    'https://infioratadicastelraimondo.it/',
    'https://www.infioratadicastelraimondo.it/',
    'http://localhost:8100' // utile in dev
  ];

  isBrowser = false;
  safeUrl: SafeResourceUrl | null = null;
  private ref: any;

  constructor(private router: Router, private sanitizer: DomSanitizer) {}

  ngOnInit() {
    // Browser/PWA → iframe con URL "sanitized"
    if (!(window as any).cordova) {
      this.isBrowser = true;
      this.safeUrl = this.sanitizer.bypassSecurityTrustResourceUrl(this.url);
      return;
    }

    // Device (Cordova/Capacitor) → ThemeableBrowser con filtro whitelist
    try {
      this.ref = cordova?.ThemeableBrowser?.open(
        this.url,
        '_blank',
        {
          toolbar: { height: 50, color: '#222222' },
          closeButton: {
            wwwImage: 'assets/icon/close.png',
            align: 'left',
            event: 'closePressed',
          },
        }
      );

      // Chiusura con bottone
      this.ref?.addEventListener?.('closePressed', () => this.ref?.close?.());

      // Controllo link (whitelist stretta sul dominio)
      this.ref?.addEventListener?.('loadstart', (event: any) => {
        const url = (event?.url || '').toString();
        const allowed = this.whitelist.some(prefix => url.startsWith(prefix));
        if (!allowed) {
          console.warn('Blocked external URL:', url);
          try { this.ref.stop(); } catch {}
          this.ref?.executeScript?.({
            code: "alert('Navigazione non consentita');"
          });
        }
      });
    } catch (e) {
      // Fallback: se ThemeableBrowser non è disponibile
      window.open(this.url, '_system');
    }
  }

  goBack() {
    try { this.ref?.close?.(); } catch {}
    this.router.navigate(['/app/tabs/speakers']);
  }
}
```

---

### src/app/pages/login/login.html

```html
<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>

    <ion-title>Login</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="login-logo">
    <img src="assets/img/appicon.svg" alt="Ionic Logo" />
  </div>

  <div class="login-form">
    <form #loginForm="ngForm" novalidate>
      <ion-input
        label="Username"
        labelPlacement="stacked"
        fill="solid"
        [(ngModel)]="login.username"
        name="username"
        type="text"
        #username="ngModel"
        spellcheck="false"
        autocapitalize="off"
        errorText="Username is required"
        required
      >
      </ion-input>

      <ion-input
        label="Password"
        labelPlacement="stacked"
        fill="solid"
        [(ngModel)]="login.password"
        name="password"
        type="password"
        #password="ngModel"
        errorText="Password is required"
        required
      >
      </ion-input>

      <ion-row>
        <ion-col>
          <ion-button (click)="onLogin(loginForm)" type="submit" expand="block"
            >Login</ion-button
          >
        </ion-col>
        <ion-col>
          <ion-button (click)="onSignup()" color="light" expand="block"
            >Signup</ion-button
          >
        </ion-col>
      </ion-row>
    </form>
  </div>
</ion-content>
```

---

### src/app/pages/login/login.scss

```scss
.login-logo {
  min-height: 200px;

  padding: 20px 0;

  text-align: center;
}

.login-logo img {
  max-width: 150px;
}

.login-form {
  padding: 16px;
}

ion-input {
  margin-bottom: 10px;
}
```

---

### src/app/pages/login/login.ts

```ts
import { Component, inject } from '@angular/core';
import { FormsModule, NgForm } from '@angular/forms';
import { Router } from '@angular/router';
import {
  IonButton,
  IonButtons,
  IonCol,
  IonContent,
  IonHeader,
  IonInput,
  IonMenuButton,
  IonRow,
  IonTitle,
  IonToolbar,
} from '@ionic/angular/standalone';

import { UserOptions } from '../../interfaces/user-options';
import { UserService } from '../../providers/user.service';

@Component({
  selector: 'page-login',
  templateUrl: 'login.html',
  styleUrls: ['./login.scss'],
  imports: [
    FormsModule,
    IonButton,
    IonButtons,
    IonCol,
    IonContent,
    IonHeader,
    IonInput,
    IonMenuButton,
    IonRow,
    IonTitle,
    IonToolbar,
  ],
})
export class LoginPage {
  private router = inject(Router);
  private user = inject(UserService);

  login: UserOptions = { username: '', password: '' };
  submitted = false;

  onLogin(form: NgForm) {
    this.submitted = true;

    if (form.valid) {
      this.user.login(this.login.username);
      this.router.navigateByUrl('/app/tabs/schedule');
    }
  }

  onSignup() {
    this.router.navigateByUrl('/signup');
  }
}
```

---

### src/app/pages/map/map-dark-style.js

```js
export const darkStyle = [
  {
    elementType: 'geometry',
    stylers: [
      {
        color: '#242f3e',
      },
    ],
  },
  {
    elementType: 'labels.text.fill',
    stylers: [
      {
        color: '#746855',
      },
    ],
  },
  {
    elementType: 'labels.text.stroke',
    stylers: [
      {
        color: '#242f3e',
      },
    ],
  },
  {
    featureType: 'administrative.locality',
    elementType: 'labels.text.fill',
    stylers: [
      {
        color: '#d59563',
      },
    ],
  },
  {
    featureType: 'poi',
    elementType: 'labels.text.fill',
    stylers: [
      {
        color: '#d59563',
      },
    ],
  },
  {
    featureType: 'poi.park',
    elementType: 'geometry',
    stylers: [
      {
        color: '#263c3f',
      },
    ],
  },
  {
    featureType: 'poi.park',
    elementType: 'labels.text.fill',
    stylers: [
      {
        color: '#6b9a76',
      },
    ],
  },
  {
    featureType: 'road',
    elementType: 'geometry',
    stylers: [
      {
        color: '#38414e',
      },
    ],
  },
  {
    featureType: 'road',
    elementType: 'geometry.stroke',
    stylers: [
      {
        color: '#212a37',
      },
    ],
  },
  {
    featureType: 'road',
    elementType: 'labels.text.fill',
    stylers: [
      {
        color: '#9ca5b3',
      },
    ],
  },
  {
    featureType: 'road.highway',
    elementType: 'geometry',
    stylers: [
      {
        color: '#746855',
      },
    ],
  },
  {
    featureType: 'road.highway',
    elementType: 'geometry.stroke',
    stylers: [
      {
        color: '#1f2835',
      },
    ],
  },
  {
    featureType: 'road.highway',
    elementType: 'labels.text.fill',
    stylers: [
      {
        color: '#f3d19c',
      },
    ],
  },
  {
    featureType: 'transit',
    elementType: 'geometry',
    stylers: [
      {
        color: '#2f3948',
      },
    ],
  },
  {
    featureType: 'transit.station',
    elementType: 'labels.text.fill',
    stylers: [
      {
        color: '#d59563',
      },
    ],
  },
  {
    featureType: 'water',
    elementType: 'geometry',
    stylers: [
      {
        color: '#17263c',
      },
    ],
  },
  {
    featureType: 'water',
    elementType: 'labels.text.fill',
    stylers: [
      {
        color: '#515c6d',
      },
    ],
  },
  {
    featureType: 'water',
    elementType: 'labels.text.stroke',
    stylers: [
      {
        color: '#17263c',
      },
    ],
  },
];
```

---

### src/app/pages/map/map.html

```html
<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Map</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div #mapCanvas class="map-canvas"></div>
</ion-content>
```

---

### src/app/pages/map/map.scss

```scss
.map-canvas {
  position: absolute;

  width: 100%;

  height: 100%;

  transition: opacity 150ms ease-in;

  background-color: transparent;

  opacity: 0;
}

.show-map {
  opacity: 1;
}
```

---

### src/app/pages/map/map.ts

```ts
import {
  AfterViewInit,
  Component,
  DestroyRef,
  ElementRef,
  ViewChild,
  inject
} from '@angular/core';
import { takeUntilDestroyed } from '@angular/core/rxjs-interop';
import {
  IonButtons,
  IonContent,
  IonHeader,
  IonMenuButton,
  IonTitle,
  IonToolbar,
} from '@ionic/angular/standalone';
import * as L from 'leaflet';
import { firstValueFrom } from 'rxjs';
import { Location } from '../../interfaces/conference.interfaces';
import { LocationService } from '../../providers/location.service';

@Component({
  selector: 'page-map',
  template: `
    <ion-header>
      <ion-toolbar>
        <ion-buttons slot="start">
          <ion-menu-button></ion-menu-button>
        </ion-buttons>
        <ion-title>Map</ion-title>
      </ion-toolbar>
    </ion-header>

    <ion-content>
      <div #mapCanvas class="map-canvas"></div>
    </ion-content>
  `,
  styleUrls: ['./map.scss'],
  imports: [
    IonHeader,
    IonToolbar,
    IonButtons,
    IonMenuButton,
    IonTitle,
    IonContent,
  ],
  standalone: true,
})
export class MapPage implements AfterViewInit {
  private locationService = inject(LocationService);
  private destroyRef = inject(DestroyRef);

  private map: L.Map | null = null;
  private markers: L.Marker[] = [];

  @ViewChild('mapCanvas', { static: true }) mapElement!: ElementRef<HTMLDivElement>;

  ngAfterViewInit() {
    // Carica inizialmente le locations e crea la mappa
    this.locationService.loadLocations()
      .pipe(takeUntilDestroyed(this.destroyRef))
      .subscribe(() => {
        this.initializeMap();
      });

    // Re-inizializza se cambia l’elenco locations
    this.locationService.getLocations()
      .pipe(takeUntilDestroyed(this.destroyRef))
      .subscribe(() => {
        if (this.map) {
          this.initializeMap();
        }
      });

    // Cleanup
    this.destroyRef.onDestroy(() => {
      if (this.map) this.map.remove();
    });
  }

  private async initializeMap() {
    const mapEle = this.mapElement.nativeElement;

    // Pulisci eventuale mappa precedente
    if (this.map) {
      this.map.remove();
      this.markers.forEach(m => m.remove());
      this.markers = [];
    }

    try {
      // Centro mappa
      const centerLocation = await firstValueFrom(this.locationService.getCenterLocation());
      if (!centerLocation) return;

      // 👇 Disattivo il controllo di attribuzione di default (niente link "Leaflet")
      this.map = L.map(mapEle, {
        center: [centerLocation.lat, centerLocation.lng],
        zoom: 16,
        preferCanvas: true,
        attributionControl: false,   // <<< fondamentale
      });

      // Icone default marker
      L.Marker.prototype.options.icon = L.icon({
        iconUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png',
        iconSize: [25, 41],
        iconAnchor: [12, 41],
        popupAnchor: [1, -34],
        shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',
        shadowSize: [41, 41],
        shadowAnchor: [12, 41]
      });

      // Tile layer (attribution testuale, non link)
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        // puoi tenere l’attribution anche qui (non sarà un link)
        attribution: '© OpenStreetMap contributors'
      }).addTo(this.map);

      // 👇 Attribution control CUSTOM senza prefix/link "Leaflet"
      L.control.attribution({
        position: 'bottomright',
        prefix: false, // <<< NO "Leaflet"
      })
      .addAttribution('© OpenStreetMap contributors') // testo liscio
      .addTo(this.map);

      // Markers
      const locations = await firstValueFrom(this.locationService.getLocations());
      if (this.map && locations?.length) {
        locations.forEach((location: Location) => {
          const marker = L.marker([location.lat, location.lng])
            .addTo(this.map as L.Map)
            .bindPopup(`${location.name}`, { className: 'location-popup' });
          this.markers.push(marker);
        });
      }

      mapEle.classList.add('show-map');

      // Fix rendering
      setTimeout(() => this.map?.invalidateSize(), 100);
    } catch (err) {
      console.error('Error initializing map:', err);
    }
  }
}
```

---

### src/app/pages/picchio-news/picchio-news.page.html

```html
<ion-header>
  <ion-toolbar>
    <ion-title>Picchio News</ion-title>

    <ion-buttons slot="end">
      <ion-button color="danger" (click)="goBack()">
        <ion-icon slot="start" name="arrow-back-outline"></ion-icon>
        Torna indietro
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content fullscreen class="pn-page">
  <!-- Browser/PWA: iframe SANDBOX per bloccare uscite (popup/top-navigation) -->
  <iframe
    *ngIf="isBrowser"
    class="ext-frame"
    [src]="safeUrl"
    sandbox="allow-scripts allow-same-origin allow-forms"
    referrerpolicy="no-referrer"
    allow="geolocation 'none'; microphone 'none'; camera 'none'; payment 'none'"
    title="Picchio News"
  ></iframe>

  <!-- App mobile: placeholder/loader; qui potresti aprire un in-app browser se vuoi -->
  <p *ngIf="!isBrowser" class="loading-msg">
    Caricamento Picchio News...
  </p>
</ion-content>
```

---

### src/app/pages/picchio-news/picchio-news.page.scss

```scss
.pn-page {
  --background: var(--ion-background-color);

  /* fa sì che l'area scrollabile riempia l'intero content */
  ion-content::part(scroll) {
    height: 100%;
  }

  .ext-frame {
    display: block;
    width: 100%;
    height: 100%;
    border: none;
  }

  .loading-msg {
    padding: 16px;
  }
}
```

---

### src/app/pages/picchio-news/picchio-news.page.ts

```ts
import { Component, OnInit, inject } from '@angular/core';
import { DomSanitizer, SafeResourceUrl } from '@angular/platform-browser';
import { Router } from '@angular/router';

import {
  IonHeader, IonToolbar, IonTitle, IonButtons, IonButton, IonIcon, IonContent
} from '@ionic/angular/standalone';
import { isPlatform, NavController } from '@ionic/angular';
import { CommonModule } from '@angular/common';

import { addIcons } from 'ionicons';
import { arrowBackOutline } from 'ionicons/icons';

@Component({
  standalone: true,
  selector: 'page-picchio-news',
  templateUrl: './picchio-news.page.html',
  styleUrls: ['./picchio-news.page.scss'],
  imports: [
    CommonModule,
    IonHeader, IonToolbar, IonTitle, IonButtons, IonButton, IonIcon, IonContent
  ],
})
export class PicchioNewsPage implements OnInit {
  private sanitizer = inject(DomSanitizer);
  private nav = inject(NavController);
  private router = inject(Router);

  // URL del sito Picchio News
  private readonly RAW_URL = 'https://www.picchionews.it';

  isBrowser = true;          // true = PWA/desktop browser, false = app ibrida
  safeUrl!: SafeResourceUrl; // URL sanitizzato per l'iframe

  constructor() {
    addIcons({ arrowBackOutline });
    // considera "ibrido" se gira dentro Capacitor/Cordova
    this.isBrowser = !(isPlatform('hybrid') || isPlatform('capacitor') || isPlatform('cordova'));
  }

  ngOnInit(): void {
    this.safeUrl = this.sanitizer.bypassSecurityTrustResourceUrl(this.RAW_URL);
  }

  goBack() {
    // torna indietro nello stack (oppure usa navigateRoot('/app/tabs/...') se vuoi una rotta fissa)
    this.nav.back();
  }
}
```

---

### src/app/pages/plateform/plateform.page.html

```html
<ion-header>
  <ion-toolbar>
    <ion-title>Plateform</ion-title>
    <ion-buttons slot="end">
      <ion-button color="danger" (click)="goBack()">
        <ion-icon slot="start" name="arrow-back-outline"></ion-icon>
        Torna indietro
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <!-- WEB: preferisci iframe se possibile -->
  <ng-container *ngIf="isBrowser; else deviceTpl">
    <!-- ELFSIGHT WIDGET: Bar L'eclissi -->
    @if (canIframeFeed) {
      <div class="ion-padding">
        <!-- your Elfsight embed goes here -->
        <div
          class="elfsight-app-fe37c329-97cf-45a9-acba-b156affa6f1d"
          data-elfsight-app-lazy
        ></div>
        <div class="elfsight-app-xxx"></div>
      </div>
    }

    <!-- 3A) Instagram POST embeddato -->
    <div
      *ngIf="embedHtml"
      [innerHTML]="embedHtml"
      style="max-width: 540px; margin: 0 auto"
    ></div>

    <!-- 3B) Sito iframabile -->
    <!-- FIX: iframe attivo con sandbox per impedire popups/top-navigation -->
    <iframe
      *ngIf="!embedHtml && canIframe"
      [src]="safeUrl"
      style="width: 100%; height: 100%; border: none"
      title="Ludwig site"
      sandbox="allow-scripts allow-forms allow-same-origin"
      referrerpolicy="strict-origin-when-cross-origin"
    ></iframe>
  </ng-container>

  <!-- DEVICE: ThemeableBrowser già aperto in TS -->
  <ng-template #deviceTpl>
    <p>Caricamento Plateform...</p>
  </ng-template>
</ion-content>
```

---

### src/app/pages/plateform/plateform.page.scss

```scss
```

---

### src/app/pages/plateform/plateform.page.ts

```ts
import { Component, inject, OnInit, AfterViewInit, Renderer2 } from "@angular/core";
import { NgIf } from "@angular/common";
import {
  IonContent, IonHeader, IonToolbar, IonTitle,
  IonButtons, IonButton, IonIcon, IonNote
} from "@ionic/angular/standalone";
import { Router, ActivatedRoute } from "@angular/router";
import { DomSanitizer, SafeResourceUrl, SafeHtml } from "@angular/platform-browser";
import { isPlatform, ToastController } from "@ionic/angular";
import { Browser } from "@capacitor/browser";
import { Speaker } from "../../interfaces/conference.interfaces";
import { ConferenceService } from "../../providers/conference.service";

declare var cordova: any;

@Component({
  selector: "app-plateform",
  templateUrl: "./plateform.page.html",
  styleUrls: ["./plateform.page.scss"],
  standalone: true,
  imports: [IonNote, NgIf, IonContent, IonHeader, IonToolbar, IonTitle, IonButtons, IonButton, IonIcon],
})
export class PlateformPage implements OnInit, AfterViewInit {
  isBrowser = false;
  private ref: any;

  private confData = inject(ConferenceService);
  private toastCtrl = inject(ToastController);
  speakers: Speaker[] = [];

  url = "";
  safeUrl: SafeResourceUrl | null = null;

  canIframe = false;
  embedHtml?: SafeHtml;
  canIframeFeed = false;

  // ⛔ EXACT URL (with or without querystring)
  private readonly BLOCK_RX =
    /https?:\/\/(www\.)?elfsight\.com\/instagram-feed-instashow\/?(?:\?.*)?$/i;
  blockedUrl = false;

  // ✅ Allow these schemes to still work
  private readonly ALLOWED_SCHEMES = new Set(["tel:", "mailto:"]);

  // FIX: flag per attivare la policy “non uscire dall’app” SOLO nel ramo else (site mode)
  private siteModeActive = false; // FIX

  constructor(
    private router: Router,
    private route: ActivatedRoute,
    private sanitizer: DomSanitizer,
    private renderer: Renderer2
  ) {}

  ionViewDidEnter() {
    this.confData.getSpeakers().subscribe((speakers) => (this.speakers = speakers));
  }

  ngOnInit() {
    const encoded = this.route.snapshot.paramMap.get("id");
    console.debug("[Plateform] route param id =", encoded);

    if (encoded === "feed") {
      this.canIframeFeed = true;
      this.ensureElfsightPlatformLoaded().then(() => {
        console.debug("[Plateform] platform.js loaded");
        setTimeout(() => (window as any).eapps?.initialize?.(), 0);
      });
    } else {
      this.url = decodeURIComponent(encoded || "https://ludwigstrasse.plateform.app/");
      console.debug("[Plateform] url =", this.url);

      if (this.BLOCK_RX.test(this.url)) {
        this.blockedUrl = true;
        console.warn("[Plateform] blocked by policy:", this.url);
        this.toast("Navigation blocked by kiosk policy.");
        this.url = "";
      }

      // 👇 AGGIUNTO: rendi visibile l’iframe con la pagina
      this.canIframe = !!this.url; // FIX
      this.safeUrl = this.sanitizer.bypassSecurityTrustResourceUrl(this.url); // FIX

      // 👇 AGGIUNTO: attiva blocco link/bottoni verso fuori SOLO in site mode (questo else)
      this.siteModeActive = true; // FIX
    }

    this.isBrowser = !("cordova" in (window as any));
    console.debug("[Plateform] isBrowser =", this.isBrowser);

    // Intercetta click su <a> (web/PWA)
    if (this.isBrowser) {
      this.renderer.listen(document, "click", (ev: Event) => {
        const el = ev.target as HTMLElement;
        const a = el?.closest?.("a[href]") as HTMLAnchorElement | null;
        if (!a) return;

        const href = a.href;

        // 1) blocco esplicito marketing
        if (this.BLOCK_RX.test(href)) {
          ev.preventDefault();
          ev.stopPropagation();
          console.warn("[Plateform] blocked click (marketing):", href);
          this.toast("Navigation blocked by kiosk policy.");
          return;
        }

        // 2) SOLO quando siamo nel ramo else (site mode) blocca uscite dall'app
        if (this.siteModeActive && this.isGoingOutOfApp(href)) { // FIX
          ev.preventDefault();
          ev.stopPropagation();
          console.warn("[Plateform] blocked external navigation:", href);
          this.toast("Navigation blocked in kiosk.");
          return;
        }
      });
    }
  }

  ngAfterViewInit() {
    if (this.canIframeFeed) {
      setTimeout(() => (window as any).eapps?.initialize?.(), 0);
    }
  }

  /** Load Elfsight platform.js once */
  private ensureElfsightPlatformLoaded(): Promise<void> {
    return new Promise((resolve) => {
      const already = document.querySelector("script[data-elfsight-platform]");
      if (already) {
        console.debug("[Plateform] platform.js already present");
        resolve();
        return;
      }
      const s = this.renderer.createElement("script");
      s.src = "https://elfsightcdn.com/platform.js";
      s.async = true;
      s.defer = true;
      s.setAttribute("data-elfsight-platform", "1");
      s.onload = () => resolve();
      s.onerror = () => {
        console.error("[Plateform] failed to load platform.js");
        resolve();
      };
      this.renderer.appendChild(document.body, s);
    });
  }

  // Guarded opener (usa questo anziché window.open/Browser.open)
  async openExternal(url: string) {
    // blocco esplicito marketing
    if (this.BLOCK_RX.test(url)) {
      console.warn("[Plateform] blocked openExternal (marketing):", url);
      await this.toast("Navigation blocked by kiosk policy.");
      return;
    }

    // FIX: blocca le uscite dall’app SOLO nel ramo else (site mode)
    if (this.siteModeActive && this.isGoingOutOfApp(url)) { // FIX
      console.warn("[Plateform] blocked openExternal (external origin):", url);
      await this.toast("Navigation blocked in kiosk.");
      return;
    }

    if (isPlatform("capacitor"))
      await Browser.open({ url, presentationStyle: "fullscreen" });
    else window.open(url, "_blank", "noopener");
  }

  private async toast(message: string) {
    const t = await this.toastCtrl.create({ message, duration: 1500, color: "danger" });
    await t.present();
  }

  /** true se il link porterebbe fuori dall’origin dell’app */
  private isGoingOutOfApp(href: string): boolean {
    try {
      const proto = href.split(":", 1)[0] + ":";
      if (this.ALLOWED_SCHEMES.has(proto)) return false; // tel/mailto ok

      const target = new URL(href, window.location.href);
      const appOrigin = new URL(window.location.href).origin;

      // stesso origin = consentito
      if (target.origin === appOrigin) return false;

      // altrimenti sta uscendo
      return true;
    } catch {
      return true; // se non parsabile, blocca per sicurezza
    }
  }

  goBack() {
    if (this.ref) this.ref.close();
    this.router.navigate(["/app/tabs/speakers"]);
  }
}
```

---

### src/app/pages/schedule-filter/schedule-filter.html

```html
<ion-header translucent="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      @if (ios) {
      <ion-button (click)="dismiss()">Cancel</ion-button>
      } @else {
      <ion-button (click)="selectAll(false)">Reset</ion-button>
      }
    </ion-buttons>

    <ion-title> Filter Sessions </ion-title>

    <ion-buttons slot="end">
      <ion-button (click)="applyFilters()" strong>Done</ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-list [lines]="ios ? 'inset' : 'full'">
    <ion-list-header>Tracks</ion-list-header>

    @for(track of tracks; track track.name){
    <ion-item [attr.track]="track.name | lowercase">
      @if(ios) {
      <ion-icon slot="start" [name]="track.icon" color="medium"></ion-icon>
      }

      <ion-checkbox
        [(ngModel)]="track.isChecked"
      >
        {{track.name}}
      </ion-checkbox>
    </ion-item>
    }
  </ion-list>
</ion-content>

<ion-footer translucent="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button (click)="selectAll(false)">Deselect All</ion-button>
    </ion-buttons>
    <ion-buttons slot="end">
      <ion-button (click)="selectAll(true)">Select All</ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-footer>
```

---

### src/app/pages/schedule-filter/schedule-filter.scss

```scss
/*
 * Material Design
 */

.md ion-toolbar ion-button {
  letter-spacing: 0;

  text-transform: capitalize;
}

.md ion-checkbox {
  --checkbox-background-checked: transparent;
  --border-color: transparent;
  --border-color-checked: transparent;
  --checkmark-color: var(--ion-color-primary);
}

.md ion-list {
  background: inherit;
}

/*
 * iOS
 */

.ios ion-list-header {
  margin-top: 10px;
}

.ios ion-checkbox {
  color: var(--ion-color-primary);
}
```

---

### src/app/pages/schedule-filter/schedule-filter.ts

```ts
import { LowerCasePipe } from '@angular/common';
import { Component, inject } from '@angular/core';
import { FormsModule } from '@angular/forms';
import {
  Config,
  IonButton,
  IonButtons,
  IonCheckbox,
  IonContent,
  IonFooter,
  IonHeader,
  IonIcon,
  IonItem,
  IonList,
  IonListHeader,
  IonTitle,
  IonToolbar,
  ModalController,
  NavParams,
} from '@ionic/angular/standalone';
import { addIcons } from 'ionicons';
import {
  call,
  cog,
  colorPalette,
  compass,
  construct,
  document,
  hammer,
  logoAngular,
  logoIonic,
  restaurant,
} from 'ionicons/icons';
import { ConferenceService } from '../../providers/conference.service';

@Component({
    selector: 'page-schedule-filter',
    templateUrl: 'schedule-filter.html',
    styleUrls: ['./schedule-filter.scss'],
    imports: [
        IonHeader,
        IonToolbar,
        IonButtons,
        IonButton,
        IonTitle,
        IonContent,
        IonList,
        IonListHeader,
        IonCheckbox,
        IonFooter,
        IonItem,
        FormsModule,
        LowerCasePipe,
        IonIcon,
    ],
    providers: [ModalController]
})
export class ScheduleFilterPage {
  private config = inject(Config);
  private modalCtrl = inject(ModalController);
  private navParams = inject(NavParams);
  private confService = inject(ConferenceService);

  ios: boolean;

  tracks: { name: string; icon: string; isChecked: boolean }[] = [];

  constructor() {
    addIcons({
      logoAngular,
      document,
      restaurant,
      logoIonic,
      hammer,
      colorPalette,
      cog,
      construct,
      call,
      compass,
    });
  }

  ionViewWillEnter() {
    this.ios = this.config.get('mode') === 'ios';

    // passed in array of track names that should be excluded (unchecked)
    const excludedTrackNames = this.navParams.get('excludedTracks');

    this.confService.getTracks().subscribe(tracks => {
      tracks.forEach(track => {
        this.tracks.push({
          name: track.name,
          icon: track.icon,
          isChecked: excludedTrackNames.indexOf(track.name) === -1,
        });
      });
      // Sort tracks alphabetically by name
      this.tracks.sort((a, b) => a.name.localeCompare(b.name));
    });
  }

  selectAll(check: boolean) {
    // set all to checked or unchecked
    this.tracks.forEach(track => {
      track.isChecked = check;
    });
  }

  applyFilters() {
    // Pass back a new array of track names to exclude
    const excludedTrackNames = this.tracks
      .filter(c => !c.isChecked)
      .map(c => c.name);
    this.dismiss(excludedTrackNames);
  }

  dismiss(data?: string[]) {
    // using the injected ModalController this page
    // can "dismiss" itself and pass back data
    this.modalCtrl.dismiss(data);
  }
}
```

---

### src/app/pages/schedule/schedule.html

```html
<ion-header translucent="true">
  <ion-toolbar>
    @if (!showSearchbar) {
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    } @if(ios) {
    <ion-segment [(ngModel)]="segment" (ionChange)="updateSchedule()">
      <ion-segment-button value="all"> All </ion-segment-button>
      <ion-segment-button value="favorites"> Favorites </ion-segment-button>
    </ion-segment>
    } @if (!ios && !showSearchbar) {
    <ion-title>Eventi</ion-title>
    } @if (showSearchbar) {
    <ion-searchbar
      showCancelButton="always"
      [(ngModel)]="queryText"
      (ionInput)="updateSchedule()"
      (ionCancel)="showSearchbar = false"
      placeholder="Search"
    ></ion-searchbar>
    }
    <ion-buttons slot="end">
      @if (!ios && !showSearchbar) {
      <ion-button (click)="showSearchbar = true">
        <ion-icon slot="icon-only" name="search"></ion-icon>
      </ion-button>
      } @if (!showSearchbar) {
      <ion-button (click)="presentFilter()">
        @if (ios) {
        <span>Filter</span>
        } @else {
        <span>
          <ion-icon slot="icon-only" name="options"></ion-icon>
        </span>
        }
      </ion-button>
      }
    </ion-buttons>
  </ion-toolbar>
  @if (!ios) {
  <ion-toolbar>
    <ion-segment [(ngModel)]="segment" (ionChange)="updateSchedule()">
      <ion-segment-button value="all"> All </ion-segment-button>
      <ion-segment-button value="favorites"> Favorites </ion-segment-button>
    </ion-segment>
  </ion-toolbar>
  }
</ion-header>

<ion-content fullscreen="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Schedule</ion-title>
    </ion-toolbar>
    <ion-toolbar>
      <ion-searchbar
        [(ngModel)]="queryText"
        (ionInput)="updateSchedule()"
        placeholder="Search"
      ></ion-searchbar>
    </ion-toolbar>
  </ion-header>

  <ion-list #scheduleList [hidden]="shownSessions === 0">
    @for (group of groups; track $index) {
    <ion-item-group [hidden]="group.hide">
      <ion-item-divider sticky>
        <ion-label> {{group.time}} </ion-label>
      </ion-item-divider>

      @for (session of group.sessions; track session.id) {
      <ion-item-sliding
        #slidingItem
        [attr.track]="session.tracks[0] | lowercase"
        [hidden]="session.hide"
      >
        <ion-item routerLink="/app/tabs/schedule/session/{{session.id}}">
          <ion-label>
            <h3>{{session.name}}</h3>
            <p>
              {{session.timeStart}} &mdash; {{session.timeEnd}}:
              {{session.location}}
            </p>
          </ion-label>
        </ion-item>
        <ion-item-options>
          @if (segment === 'all') {
          <ion-item-option
            color="favorite"
            (click)="addFavorite(slidingItem, session)"
          >
            Favorite
          </ion-item-option>
          } @if (segment === 'favorites') {
          <ion-item-option
            color="danger"
            (click)="removeFavorite(slidingItem, session, 'Remove Favorite')"
          >
            Remove
          </ion-item-option>
          }
        </ion-item-options>
      </ion-item-sliding>
      }
    </ion-item-group>
    }
  </ion-list>

  <ion-list-header [hidden]="shownSessions > 0">
    No Sessions Found
  </ion-list-header>

  <ion-fab slot="fixed" vertical="bottom" horizontal="end" #fab>
    <ion-fab-button>
      <ion-icon name="share-social"></ion-icon>
    </ion-fab-button>
    <ion-fab-list side="top">
      <ion-fab-button color="vimeo" (click)="openSocial('Vimeo', fab)">
        <ion-icon name="logo-vimeo"></ion-icon>
      </ion-fab-button>
      <ion-fab-button color="instagram" (click)="openSocial('Instagram', fab)">
        <ion-icon name="logo-instagram"></ion-icon>
      </ion-fab-button>
      <ion-fab-button color="twitter" (click)="openSocial('Twitter', fab)">
        <ion-icon name="logo-twitter"></ion-icon>
      </ion-fab-button>
      <ion-fab-button color="facebook" (click)="openSocial('Facebook', fab)">
        <ion-icon name="logo-facebook"></ion-icon>
      </ion-fab-button>
    </ion-fab-list>
  </ion-fab>
</ion-content>
```

---

### src/app/pages/schedule/schedule.scss

```scss
@use "sass:map";
@use '../../../theme/variables' as *;

ion-fab-button {
  --background: var(--ion-color-step-150, #ffffff);
  --background-hover: var(--ion-color-step-200, #f2f2f2);
  --background-focused: var(--ion-color-step-250, #d9d9d9);
  --color: var(--ion-color-primary, #3880ff);
}

/*
 * Material Design uses the ripple for activated
 * so only style the iOS activated background
 */
.ios ion-fab-button {
  --background-activated: var(--ion-color-step-250, #d9d9d9);
}

@each $track in $tracks {
  ion-item-sliding[track='#{$track}'] ion-label {
    padding-left: 10px;

    border-left: 2px solid var(--ion-color-#{$track});
  }
}
```

---

### src/app/pages/schedule/schedule.ts

```ts
import { Component, OnInit, ViewChild, inject } from '@angular/core';
import { Router, RouterLink } from '@angular/router';

import { addIcons } from 'ionicons';
import {
  logoFacebook,
  logoInstagram,
  logoTwitter,
  logoVimeo,
  options,
  search,
  shareSocial,
} from 'ionicons/icons';

import { LowerCasePipe } from '@angular/common';
import { FormsModule } from '@angular/forms';
import {
  AlertController,
  Config,
  IonButton,
  IonButtons,
  IonContent,
  IonFab,
  IonFabButton,
  IonFabList,
  IonHeader,
  IonIcon,
  IonItemDivider,
  IonItemGroup,
  IonItemOption,
  IonItemOptions,
  IonItemSliding,
  IonLabel,
  IonList,
  IonListHeader,
  IonMenuButton,
  IonRouterOutlet,
  IonSearchbar,
  IonSegment,
  IonSegmentButton,
  IonTitle,
  IonToolbar,
  LoadingController,
  ModalController,
  ToastController,
} from '@ionic/angular/standalone';
import { Group, Session } from '../../interfaces/conference.interfaces';
import { ConferenceService } from '../../providers/conference.service';
import { UserService } from '../../providers/user.service';
import { ScheduleFilterPage } from '../schedule-filter/schedule-filter';

@Component({
    selector: 'page-schedule',
    templateUrl: 'schedule.html',
    styleUrls: ['./schedule.scss'],
    imports: [
        IonHeader,
        IonToolbar,
        IonButtons,
        IonSegment,
        IonSegmentButton,
        IonContent,
        IonTitle,
        IonSearchbar,
        IonButton,
        IonIcon,
        IonList,
        IonListHeader,
        IonFab,
        IonFabButton,
        IonFabList,
        FormsModule,
        IonItemSliding,
        LowerCasePipe,
        RouterLink,
        IonItemGroup,
        IonItemDivider,
        IonItemOption,
        IonItemOptions,
        IonLabel,
        IonMenuButton,
    ],
    providers: [
        ModalController,
        AlertController,
        LoadingController,
        ToastController,
        Config,
    ]
})
export class SchedulePage implements OnInit {
  alertCtrl = inject(AlertController);
  confService = inject(ConferenceService);
  loadingCtrl = inject(LoadingController);
  modalCtrl = inject(ModalController);
  router = inject(Router);
  routerOutlet = inject(IonRouterOutlet);
  toastCtrl = inject(ToastController);
  user = inject(UserService);
  config = inject(Config);

  // Gets a reference to the list element
  @ViewChild('scheduleList', { static: true }) scheduleList: IonList;

  ios: boolean;
  dayIndex = 0;
  queryText = '';
  segment = 'all';
  excludeTrackNames: string[] = [];
  shownSessions: number;
  groups: Group[] = [];
  confDate: string;
  showSearchbar: boolean;

  constructor() {
    addIcons({
      search,
      options,
      shareSocial,
      logoVimeo,
      logoInstagram,
      logoTwitter,
      logoFacebook,
    });
  }

  ngOnInit() {
    this.updateSchedule();
    this.ios = this.config.get('mode') === 'ios';
  }

  updateSchedule() {
    // Close any open sliding items when the schedule updates
    if (this.scheduleList) {
      this.scheduleList.closeSlidingItems();
    }

    this.confService
      .getTimeline(
        this.dayIndex,
        this.queryText,
        this.excludeTrackNames,
        this.segment
      )
      .subscribe(data => {
        this.shownSessions = data.shownSessions;
        this.groups = data.groups;
      });
  }

  async presentFilter() {
    const modal = await this.modalCtrl.create({
      component: ScheduleFilterPage,
      presentingElement: this.routerOutlet.nativeEl,
      componentProps: { excludedTracks: this.excludeTrackNames },
    });
    await modal.present();

    const { data } = await modal.onWillDismiss();
    if (data) {
      this.excludeTrackNames = data;
      this.updateSchedule();
    }
  }

  async addFavorite(slidingItem: IonItemSliding, sessionData: Session) {
    if (this.user.hasFavorite(sessionData.name)) {
      // Prompt to remove favorite
      this.removeFavorite(slidingItem, sessionData, 'Favorite already added');
    } else {
      // Add as a favorite
      this.user.addFavorite(sessionData.name);

      // Close the open item
      slidingItem.close();

      // Create a toast
      const toast = await this.toastCtrl.create({
        header: `${sessionData.name} was successfully added as a favorite.`,
        duration: 3000,
        buttons: [
          {
            text: 'Close',
            role: 'cancel',
          },
        ],
      });

      // Present the toast at the bottom of the page
      await toast.present();
    }
  }

  async removeFavorite(
    slidingItem: IonItemSliding,
    sessionData: Session,
    title: string
  ) {
    const alert = await this.alertCtrl.create({
      header: title,
      message: 'Would you like to remove this session from your favorites?',
      buttons: [
        {
          text: 'Cancel',
          handler: () => {
            // they clicked the cancel button, do not remove the session
            // close the sliding item and hide the option buttons
            slidingItem.close();
          },
        },
        {
          text: 'Remove',
          handler: () => {
            // they want to remove this session from their favorites
            this.user.removeFavorite(sessionData.name);
            this.updateSchedule();

            // close the sliding item and hide the option buttons
            slidingItem.close();
          },
        },
      ],
    });
    // now present the alert on top of all other content
    await alert.present();
  }

  async openSocial(network: string, fab: IonFab) {
    const loading = await this.loadingCtrl.create({
      message: `Posting to ${network}`,
      duration: Math.random() * 1000 + 500,
    });
    await loading.present();
    await loading.onWillDismiss();
    fab.close();
  }
}
```

---

### src/app/pages/session-detail/session-detail.html

```html
<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button [defaultHref]="defaultHref"></ion-back-button>
    </ion-buttons>
    <ion-buttons slot="end">
      <ion-button (click)="toggleFavorite()">
        @if (!isFavorite) {
        <ion-icon slot="icon-only" name="star-outline"></ion-icon>
        } @if (isFavorite) {
        <ion-icon slot="icon-only" name="star"></ion-icon>
        }
      </ion-button>
      <ion-button (click)="shareSession()">
        <ion-icon slot="icon-only" name="share"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  @if (session) {
  <div class="ion-padding">
    <h1>{{session.name}}</h1>
    @for (track of session?.tracks; track $index) {
    <span [class]="'session-track-'+track.toLowerCase()">{{track}}</span>
    }
    <p>{{session.description}}</p>
    <ion-text color="medium">
      {{session.timeStart}} &ndash; {{session.timeEnd}}
      <br />
      {{session.location}}
    </ion-text>
  </div>
  }

  <ion-list>
    <ion-item (click)="sessionClick('watch')" button>
      <ion-label color="primary">Watch</ion-label>
    </ion-item>
    <ion-item (click)="sessionClick('add to calendar')" button>
      <ion-label color="primary">Add to Calendar</ion-label>
    </ion-item>
    <ion-item (click)="sessionClick('mark as unwatched')" button>
      <ion-label color="primary">Mark as Unwatched</ion-label>
    </ion-item>
    <ion-item (click)="sessionClick('download video')" button>
      <ion-label color="primary">Download Video</ion-label>
      <ion-icon
        slot="end"
        color="primary"
        size="small"
        name="cloud-download"
      ></ion-icon>
    </ion-item>
    <ion-item (click)="sessionClick('leave feedback')" button>
      <ion-label color="primary">Leave Feedback</ion-label>
    </ion-item>
  </ion-list>
</ion-content>
```

---

### src/app/pages/session-detail/session-detail.scss

```scss
@use '../../../theme/variables' as *;

@each $track in $tracks {
  .session-track-#{$track} {
    color: var(--ion-color-#{$track});
  }
}

/* Favorite Icon
 * --------------------------------------------------------
 */

.show-favorite {
  position: relative;
}

.icon-heart-empty,
.icon-heart {
  --border-radius: 50%;
  --padding-start: 0;
  --padding-end: 0;

  position: absolute;

  top: 5px;
  right: 5px;

  width: 48px;
  height: 48px;

  transition: transform 300ms ease;

  font-size: 16px;
}

.icon-heart-empty {
  transform: scale(1);
}

.icon-heart {
  transform: scale(0);
}

.show-favorite .icon-heart {
  transform: scale(1);
}

.show-favorite .icon-heart-empty {
  transform: scale(0);
}

h1 {
  margin: 0;
}
```

---

### src/app/pages/session-detail/session-detail.ts

```ts
import { Component, inject } from '@angular/core';
import { ActivatedRoute } from '@angular/router';
import {
  IonBackButton,
  IonButton,
  IonButtons,
  IonContent,
  IonHeader,
  IonIcon,
  IonItem,
  IonLabel,
  IonList,
  IonText,
  IonToolbar,
} from '@ionic/angular/standalone';
import { addIcons } from 'ionicons';
import {
  cloudDownload,
  share,
  shareOutline,
  star,
  starOutline,
} from 'ionicons/icons';

import { Session } from '../../interfaces/conference.interfaces';
import { ConferenceService } from '../../providers/conference.service';
import { UserService } from '../../providers/user.service';

@Component({
    selector: 'page-session-detail',
    styleUrls: ['./session-detail.scss'],
    templateUrl: 'session-detail.html',
    imports: [
        IonHeader,
        IonToolbar,
        IonButtons,
        IonBackButton,
        IonContent,
        IonButton,
        IonIcon,
        IonList,
        IonItem,
        IonLabel,
        IonText,
    ]
})
export class SessionDetailPage {
  private confService = inject(ConferenceService);
  private userService = inject(UserService);
  private route = inject(ActivatedRoute);

  session: Session;
  isFavorite = false;
  defaultHref = '';

  constructor() {
    addIcons({ shareOutline, starOutline, star, cloudDownload, share });
  }

  ionViewWillEnter() {
    this.confService.load().subscribe(data => {
      if (
        data &&
        data.schedule &&
        data.schedule[0] &&
        data.schedule[0].groups
      ) {
        const sessionId = this.route.snapshot.paramMap.get('sessionId');
        for (const group of data.schedule[0].groups) {
          if (group && group.sessions) {
            for (const session of group.sessions) {
              if (session && session.id === sessionId) {
                this.session = session;

                this.isFavorite = this.userService.hasFavorite(
                  this.session.name
                );

                break;
              }
            }
          }
        }
      }
    });
  }

  ionViewDidEnter() {
    this.defaultHref = '/app/tabs/schedule';
  }

  sessionClick(item: string) {
    console.log('Clicked', item);
  }

  toggleFavorite() {
    const sessionName = this.session.name;
    if (this.userService.hasFavorite(sessionName)) {
      this.userService.removeFavorite(sessionName);
      this.isFavorite = false;
    } else {
      this.userService.addFavorite(this.session.name);
      this.isFavorite = true;
    }
  }

  shareSession() {
    console.log('Clicked share session');
  }
}
```

---

### src/app/pages/signup/signup.html

```html
<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Signup</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="signup-logo">
    <img src="assets/img/appicon.svg" alt="Ionic Logo" />
  </div>

  <div class="signup-form">
    <form #signupForm="ngForm" novalidate>
      <ion-input
        label="Username"
        labelPlacement="stacked"
        fill="solid"
        [(ngModel)]="signup.username"
        name="username"
        type="text"
        #username="ngModel"
        errorText="Username is required"
        required
      >
      </ion-input>

      <ion-input
        label="Password"
        labelPlacement="stacked"
        fill="solid"
        [(ngModel)]="signup.password"
        name="password"
        type="password"
        #password="ngModel"
        errorText="Password is required"
        required
      >
      </ion-input>

      <ion-row>
        <ion-col>
          <ion-button (click)="onSignup(signupForm)" type="submit" expand="block"
          >Create</ion-button
        >
        </ion-col>
      </ion-row>
    </form>
  </div>
</ion-content>
```

---

### src/app/pages/signup/signup.scss

```scss
.signup-logo {
  min-height: 200px;

  padding: 20px 0;

  text-align: center;
}

.signup-logo img {
  max-width: 150px;
}

.signup-form {
  padding: 16px;
}

ion-input {
  margin-bottom: 10px;
}
```

---

### src/app/pages/signup/signup.ts

```ts
import { Component, inject } from '@angular/core';
import { FormsModule, NgForm } from '@angular/forms';
import { Router } from '@angular/router';
import {
  IonButton,
  IonButtons,
  IonContent,
  IonHeader,
  IonInput,
  IonMenuButton,
  IonTitle,
  IonToolbar,
  IonCol,
  IonRow
} from '@ionic/angular/standalone';

import { UserService } from '../../providers/user.service';

import { UserOptions } from '../../interfaces/user-options';

@Component({
  selector: 'page-signup',
  templateUrl: 'signup.html',
  styleUrls: ['./signup.scss'],
  imports: [
    IonRow,
    IonCol,
    FormsModule,
    IonHeader,
    IonToolbar,
    IonButtons,
    IonMenuButton,
    IonTitle,
    IonContent,
    IonInput,
    IonButton,
  ]
})
export class SignupPage {
  router = inject(Router);
  userService = inject(UserService);

  signup: UserOptions = { username: '', password: '' };
  submitted = false;

  onSignup(form: NgForm) {
    this.submitted = true;

    if (form.valid) {
      this.userService.signup(this.signup.username);
      this.router.navigateByUrl('/app/tabs/schedule');
    }
  }
}
```

---

### src/app/pages/speaker-detail/speaker-detail.html

```html
<ion-content class="speaker-detail">
  <ion-header class="ion-no-border">
    <ion-toolbar>
      <ion-buttons slot="start">
        <ion-back-button defaultHref="/app/tabs/speakers"></ion-back-button>
      </ion-buttons>

      @if (speaker) {
      <ion-buttons slot="end">
        <ion-button (click)="openContact(speaker)">
          <ion-icon slot="icon-only" [ios]="'call-outline'" [md]="'call-sharp'"></ion-icon>
        </ion-button>
        <ion-button (click)="openSpeakerShare(speaker)">
          <ion-icon slot="icon-only" [ios]="'share-outline'" [md]="'share-sharp'"></ion-icon>
        </ion-button>
      </ion-buttons>
      }
    </ion-toolbar>
  </ion-header>

  <div class="speaker-background">
    <img
      [ngSrc]="speaker?.profilePic || 'assets/placeholder.jpg'"
      [alt]="speaker?.name || 'Speaker profile'"
      width="70"
      height="70"
      priority
    />
    <h2 class="custom-title">{{speaker?.name ?? 'Loading...'}}</h2>
  </div>

  <div class="ion-padding speaker-detail">
    <img [src]="speaker?.logo" style="max-height:150px; display:block; margin:auto;">
<!-- @if (speaker?.name === 'Ludwig' || speaker?.name === 'Gelateria Carnevali' || speaker?.name === 'Bar L\'eclissi') { -->
@if (speaker?.name === 'Ludwig' || speaker?.name === 'Gelateria Carnevali' ) {
  <div class="ion-padding">
    <ion-button
      expand="block"
      color="primary"
      [routerLink]="['/app/tabs/plateform', speaker?.sito]"
    >
      VISITA IL NOSTRO SITO!
    </ion-button>
  </div>
}
    <div class="about-text" [innerHTML]="speaker?.about || 'Loading biography...'"></div>

    <hr />

    @if (speaker) {
    <div class="social-links">
      <ion-chip color="twitter" button>
        <ion-icon name="logo-twitter"></ion-icon>
        <ion-label>Twitter</ion-label>
      </ion-chip>

      <ion-chip color="dark" button>
        <ion-icon name="logo-facebook"></ion-icon>
        <ion-label>Facebook</ion-label>
      </ion-chip>

      <ion-chip color="instagram" button>
        <ion-icon name="logo-instagram"></ion-icon>
        <ion-label>Instagram</ion-label>
      </ion-chip>
    </div>
    }

    <h2>{{speaker?.category }}</h2>
    <p>{{speaker?.description}}</p>

    <ion-item><ion-label>📍 {{speaker?.address}}</ion-label></ion-item>
    <ion-item><ion-label>📞 {{speaker?.phone}}</ion-label></ion-item>
    <ion-item><ion-label>🕒 {{speaker?.openingHours}}</ion-label></ion-item>
  </div>



</ion-content>
```

---

### src/app/pages/speaker-detail/speaker-detail.scss

```scss
h2.custom-title {
  font-weight: bold;
  color: #ffffff;
}


.about-text {
  white-space: pre-line;
  line-height: 1.6;
  font-size: 1rem;
  margin: 12px;
  color: #333;
}



.info-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px;
    font-size: 1.2em;
    background-color: #f4f4f4;
    border-bottom: 1px solid #ccc;
  }
  .time, .weather {
    padding: 0 10px;
    font-weight: bold;
  }

/*
 * Speaker Background
 */

ion-toolbar {
  --background: transparent;
  --color: white;

  position: absolute;

  top: 0;
  right: 0;
  left: 0;
}

ion-toolbar ion-button,
ion-toolbar ion-back-button,
ion-toolbar ion-menu-button {
  --color: white;
}

.speaker-background {
  display: flex;
  position: relative;

  flex-direction: column;

  align-items: center;
  justify-content: center;

  height: calc(250px + var(--ion-safe-area-top));

  padding-top: var(--ion-safe-area-top);

  background: center / cover url('/assets/img/speaker-background.png') no-repeat;
}

.speaker-background img {
  width: 70px;
  height: auto;

  margin-top: calc(-1 * var(--ion-safe-area-top));

  border-radius: 50%;
}

.speaker-background h2 {
  position: absolute;

  bottom: 10px;

  // color: white;
}

.md .speaker-background {
  box-shadow: rgb(0 0 0 / 20%) 0 3px 1px -2px, rgb(0 0 0 / 14%) 0 2px 2px 0,
    rgb(0 0 0 / 12%) 0 1px 5px 0;
}

.ios .speaker-background {
  box-shadow: rgb(0 0 0 / 12%) 0 4px 16px;
}

/*
 * Speaker Details
 */

.speaker-detail p {
  margin-right: 6px;
  margin-left: 6px;
}

.speaker-detail hr {
  margin-top: 20px;
  margin-bottom: 20px;

  background: var(--ion-color-step-150, #d7d8da);
}
```

---

### src/app/pages/speaker-detail/speaker-detail.ts

```ts
import { NgOptimizedImage } from '@angular/common';
import { Component, inject } from '@angular/core';
import { ActivatedRoute, RouterLink } from '@angular/router';
import { Browser } from '@capacitor/browser';
import {
  ActionSheetController,
  IonBackButton,
  IonButton,
  IonButtons,
  IonChip,
  IonContent,
  IonHeader,
  IonIcon,
  IonLabel,
  IonToolbar,
  IonText,
  IonItem,
  IonFabButton,
  IonFab,
} from '@ionic/angular/standalone';
import { addIcons } from 'ionicons';
import {
  callOutline,
  callSharp,
  logoGithub,
  logoInstagram,
  logoTwitter,
  shareOutline,
  shareSharp,
} from 'ionicons/icons';
import { Speaker } from '../../interfaces/conference.interfaces';
import { ConferenceService } from '../../providers/conference.service';

@Component({
  selector: 'page-speaker-detail',
  templateUrl: 'speaker-detail.html',
  styleUrls: ['./speaker-detail.scss'],
  standalone: true,
  imports: [
    IonFab,
    IonFabButton,
    IonItem,
    IonText,
    RouterLink,
    IonContent,
    IonHeader,
    IonToolbar,
    IonButtons,
    IonBackButton,
    IonButton,
    IonIcon,
    IonChip,
    IonLabel,
    NgOptimizedImage,
  ],
  providers: [ActionSheetController],
})
export class SpeakerDetailPage {
  speaker!: Speaker;

  private confService = inject(ConferenceService);
  private route = inject(ActivatedRoute);
  private actionSheetCtrl = inject(ActionSheetController);

  constructor() {
    addIcons({
      callOutline,
      callSharp,
      shareOutline,
      shareSharp,
      logoTwitter,
      logoGithub,
      logoInstagram,
    });
  }

  ionViewWillEnter(): void {
    this.confService.load().subscribe((data) => {
      const speakerId = this.route.snapshot.paramMap.get('speakerId');
      if (!speakerId || !data?.speakers) return;
      const found = data.speakers.find((s) => s?.id === speakerId);
      if (found) this.speaker = found;
    });
  }

  // Link esterni http/https con Capacitor Browser
  async openExternalUrl(url: string): Promise<void> {
    await Browser.open({ url });
  }

  async openSpeakerShare(speaker: any): Promise<void> {
    const actionSheet = await this.actionSheetCtrl.create({
      header: 'Share ' + speaker.name,
      buttons: [
        {
          text: 'Copy Link',
          handler: () => {
            const anyWindow = window as any;
            if (anyWindow.cordova?.plugins?.clipboard) {
              anyWindow.cordova.plugins.clipboard.copy(
                'https://twitter.com/' + speaker.twitter
              );
            }
            // non ritorno nulla -> void (fix TS)
          },
        },
        {
          text: 'Share via ...',
        },
        {
          text: 'Cancel',
          role: 'cancel',
        },
      ],
    });

    await actionSheet.present();
  }

  async openContact(speaker: Speaker): Promise<void> {
    const mode = 'ios';

    const actionSheet = await this.actionSheetCtrl.create({
      header: 'Contact ' + speaker.name,
      buttons: [
        {
          text: `Email ( ${speaker.email} )`,
          icon: mode !== 'ios' ? 'mail' : undefined,
          handler: () => {
            // evita di restituire Window: usa "void" (fix TS)
            void window.open(`mailto:${speaker.email}`, '_self');
          },
        },
        {
          text: `Call ( ${speaker.phone} )`,
          icon: mode !== 'ios' ? 'call' : undefined,
          handler: () => {
            void window.open(`tel:${speaker.phone}`, '_self');
          },
        },
        {
          text: 'Cancel',
          role: 'cancel',
        },
      ],
    });

    await actionSheet.present();
  }
}
```

---

### src/app/pages/speaker-list/speaker-list.html

```html
<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Attività</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content fullscreen="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Attività</ion-title>
    </ion-toolbar>
  </ion-header>

  <ion-grid fixed>
    <ion-row>
      @for (speaker of speakers; track speaker.id) {
      <ion-col size="12" size-md="6">
        <ion-card class="speaker-card">
          <ion-card-header>
            <ion-item
              detail="false"
              lines="none"
              class="speaker-item"
              routerLink="/app/tabs/speakers/speaker-details/{{speaker.id}}"
            >
              <ion-avatar slot="start">
                <img
                  [src]="speaker.profilePic"
                  [alt]="speaker.name + ' profile picture'"
                />
              </ion-avatar>
              <ion-label>
                <h2>{{speaker.name}}</h2>
                <p>{{speaker.category}}</p>
              </ion-label>
            </ion-item>
          </ion-card-header>

          <ion-card-content>
            <ion-list lines="none">
              @for (session of speaker.sessions; track session.id) {
              <ion-item
                detail="false"
                routerLink="/app/tabs/speakers/session/{{session.id}}"
              >
                <ion-label>
                  <h3>{{session.name}}</h3>
                </ion-label>
              </ion-item>
              }

              <ion-item
                detail="false"
                routerLink="/app/tabs/speakers/speaker-details/{{speaker.id}}"
              >
                <ion-label>
                  <h3>{{speaker.name}}</h3>
                </ion-label>
              </ion-item>
            </ion-list>
          </ion-card-content>
        </ion-card>
      </ion-col>
      }
    </ion-row>
  </ion-grid>
</ion-content>
```

---

### src/app/pages/speaker-list/speaker-list.scss

```scss
.speaker-card {
  display: flex;

  flex-direction: column;
}

/* Due to the fact the cards are inside of columns the margins don't overlap
 * properly so we want to remove the extra margin between cards
 */
ion-col:not(:last-of-type) .speaker-card {
  margin-bottom: 0;
}

.speaker-card .speaker-item {
  --min-height: 85px;
}

.speaker-card .speaker-item h2 {
  font-size: 18px;
  font-weight: 500;

  letter-spacing: 0.02em;
}

.speaker-card .speaker-item p {
  font-size: 13px;

  letter-spacing: 0.02em;
}

.speaker-card ion-card-header {
  padding: 0;
}

.speaker-card ion-card-content {
  flex: 1 1 auto;

  padding: 0;
}

.ios ion-list {
  margin-bottom: 10px;
}

.md ion-list {
  padding: 0;

  border-top: 1px solid var(--ion-color-step-150, #d7d8da);
}
```

---

### src/app/pages/speaker-list/speaker-list.ts

```ts
import { Component, inject } from '@angular/core';
import { RouterLink } from '@angular/router';
import {
  IonAvatar,
  IonButtons,
  IonCard,
  IonCardContent,
  IonCardHeader,
  IonCol,
  IonContent,
  IonGrid,
  IonHeader,
  IonItem,
  IonLabel,
  IonList,
  IonMenuButton,
  IonRow,
  IonTitle,
  IonToolbar,
} from '@ionic/angular/standalone';
import { Speaker } from '../../interfaces/conference.interfaces';
import { ConferenceService } from '../../providers/conference.service';

@Component({
    selector: 'page-speaker-list',
    templateUrl: 'speaker-list.html',
    styleUrls: ['./speaker-list.scss'],
    imports: [
        IonHeader,
        IonToolbar,
        IonButtons,
        IonMenuButton,
        IonTitle,
        IonContent,
        IonGrid,
        IonRow,
        IonCol,
        IonCard,
        IonCardHeader,
        IonItem,
        IonAvatar,
        IonLabel,
        IonCardContent,
        IonList,
        RouterLink,
    ]
})
export class SpeakerListPage {
  private confData = inject(ConferenceService);

  speakers: Speaker[] = [];

  ionViewDidEnter() {
    this.confData.getSpeakers().subscribe(speakers => {
      this.speakers = speakers;
    });
  }
}
```

---

### src/app/pages/support/support.html

```html
<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Support</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="support-logo">
    <img src="assets/img/appicon.svg" alt="Ionic Logo" />
  </div>

  <div class="support-form">
    <form #submitForm="ngForm" novalidate (ngSubmit)="submit(submitForm)">
      <ion-textarea
        label="Enter your support message below"
        labelPlacement="stacked"
        fill="solid"
        [(ngModel)]="supportMessage"
        name="supportQuestion"
        #supportQuestion="ngModel"
        rows="6"
        errorText="Support message is required"
        required
      >
      </ion-textarea>

      <ion-row>
        <ion-col>
          <ion-button expand="block" type="submit">Submit</ion-button>
        </ion-col>
      </ion-row>
    </form>
  </div>
</ion-content>
```

---

### src/app/pages/support/support.scss

```scss
.support-logo {
  min-height: 200px;

  padding: 20px 0;

  text-align: center;
}

.support-logo img {
  max-width: 150px;
}

.list {
  margin-bottom: 0;
}

.support-form {
  padding: 16px;
}
```

---

### src/app/pages/support/support.ts

```ts
import { Component, inject } from '@angular/core';
import { FormsModule, NgForm } from '@angular/forms';
import {
  AlertController,
  IonButton,
  IonButtons,
  IonContent,
  IonCol,
  IonHeader,
  IonMenuButton,
  IonRow,
  IonTextarea,
  IonTitle,
  IonToolbar,
  ToastController,
} from '@ionic/angular/standalone';

@Component({
    selector: 'page-support',
    templateUrl: 'support.html',
    styleUrls: ['./support.scss'],
    imports: [
        FormsModule,
        IonHeader,
        IonButton,
        IonButtons,
        IonContent,
        IonCol,
        IonHeader,
        IonMenuButton,
        IonRow,
        IonTextarea,
        IonTitle,
        IonToolbar,
    ],
    providers: [AlertController, ToastController]
})
export class SupportPage {
  private toastCtrl = inject(ToastController);

  submitted = false;
  supportMessage: string;

  async ionViewDidEnter() {
    const toast = await this.toastCtrl.create({
      message: 'This does not actually send a support request.',
      duration: 3000,
    });
    await toast.present();
  }

  async submit(form: NgForm) {
    this.submitted = true;

    if (form.valid) {
      this.supportMessage = '';
      this.submitted = false;

      const toast = await this.toastCtrl.create({
        message: 'Your support request has been sent.',
        duration: 3000,
      });
      await toast.present();
    }
  }
}
```

---

### src/app/pages/tabs-page/routes.ts

```ts
import { Routes } from '@angular/router';
import { TabsPage } from './tabs-page';

export const TABS_ROUTES: Routes = [
  {
    path: 'tabs',
    component: TabsPage,
    children: [
      {
        path: 'schedule',
        children: [
          {
            path: '',
            loadComponent: () =>
              import('../schedule/schedule').then(m => m.SchedulePage),
          },
          {
            path: 'session/:sessionId',
            loadComponent: () =>
              import('../session-detail/session-detail').then(
                m => m.SessionDetailPage
              ),
          },
        ],
      },
      {
        path: 'speakers',
        children: [
          {
            path: '',
            loadComponent: () =>
              import('../speaker-list/speaker-list').then(
                m => m.SpeakerListPage
              ),
          },
          {
            path: 'session/:sessionId',
            loadComponent: () =>
              import('../session-detail/session-detail').then(
                m => m.SessionDetailPage
              ),
          },
          {
            path: 'speaker-details/:speakerId',
            loadComponent: () =>
              import('../speaker-detail/speaker-detail').then(
                m => m.SpeakerDetailPage
              ),
          },
        ],
      },
      {
        path: 'map',
        loadComponent: () => import('../map/map').then(m => m.MapPage),
      },
      {
        path: 'about',
        children: [
          {
            path: '',
            loadComponent: () =>
              import('../about/about').then(m => m.AboutPage),
          },
        ],
      },

           // 👇 AGGIUNTA LA ROTTA PLATEFORM DENTRO I TABS
      {
        path: 'plateform/:id',
        loadComponent: () =>
          import('../plateform/plateform.page').then(m => m.PlateformPage),
      },
  {
    path: 'infiorata',
    loadComponent: () =>
      import('../infiorata/infiorata.page').then(m => m.InfiorataPage),
  },
    {
    path: 'turismo',
    loadComponent: () =>
      import('../turismo/turismo.page').then(m => m.TurismoPage),
  },

  {
    path: 'vivere-camerino',
    loadComponent: () =>
      import('../vivere-camerino/vivere-camerino.page')
        .then(m => m.VivereCamerinoPage),
  },
   {
    path: 'cronache-maceratesi',
    loadComponent: () =>
      import('../cronache-maceratesi/cronache-maceratesi.page')
        .then(m => m.CronacheMaceratesiPage),
  },
     {
    path: 'picchio-news',
    loadComponent: () =>
      import('../picchio-news/picchio-news.page')
        .then(m => m.PicchioNewsPage),
  },

    {
    path: 'comune-castelraimondo',
    loadComponent: () =>
      import('../comune-castelraimondo/comune-castelraimondo.page')
        .then(m => m.ComuneCastelraimondoPage),
  },   
  


      {
        path: 'cosmari',
        loadComponent: () =>
          import('../cosmari/cosmari.page').then(m => m.CosmariPage),
      },
      
      {
        path: '',
        redirectTo: '/app/tabs/schedule',
        pathMatch: 'full',
      },
    ],
  },
];
```

---

### src/app/pages/tabs-page/tabs-page.html

```html
<ion-tabs>
  <ion-tab-bar slot="bottom">
    <ion-tab-button tab="schedule">
      <ion-icon name="calendar"></ion-icon>
      <ion-label>Eventi</ion-label>
    </ion-tab-button>

    <ion-tab-button tab="speakers">
      <ion-icon name="people"></ion-icon>
      <ion-label>Attività</ion-label>
    </ion-tab-button>

    <ion-tab-button tab="map">
      <ion-icon name="location"></ion-icon>
      <ion-label>Mappa</ion-label>
    </ion-tab-button>

        <ion-tab-button tab="turismo">
      <ion-icon name="information-circle"></ion-icon>
      <ion-label>Turismo</ion-label>
    </ion-tab-button>

    <ion-tab-button tab="about">
      <ion-icon name="information-circle"></ion-icon>
      <ion-label>About</ion-label>
    </ion-tab-button>
  </ion-tab-bar>
</ion-tabs>
```

---

### src/app/pages/tabs-page/tabs-page.scss

```scss
.tabbar {
  justify-content: center;
}

.tab-button {
  max-width: 200px;
}
```

---

### src/app/pages/tabs-page/tabs-page.spec.ts

```ts
import { CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';
import { TestBed } from '@angular/core/testing';

import { provideRouter } from '@angular/router';
import { routes } from '../../app.routes';
import { TabsPage } from './tabs-page';

describe('TabsPage', () => {
  beforeEach(async () => {
    await TestBed.configureTestingModule({
      declarations: [],
      imports: [TabsPage],
      schemas: [CUSTOM_ELEMENTS_SCHEMA],
      providers: [provideRouter(routes)],
    }).compileComponents();
  });

  it('should create the tabs page', () => {
    const fixture = TestBed.createComponent(TabsPage);
    const app = fixture.debugElement.componentInstance;
    expect(app).toBeTruthy();
  });
});
```

---

### src/app/pages/tabs-page/tabs-page.ts

```ts
import { Component } from '@angular/core';
import { RouterModule } from '@angular/router';
import {
  IonIcon,
  IonLabel,
  IonTabBar,
  IonTabButton,
  IonTabs,
} from '@ionic/angular/standalone';
import { addIcons } from 'ionicons';
import { calendar, informationCircle, newspaperOutline,location, people } from 'ionicons/icons';

@Component({
    templateUrl: 'tabs-page.html',
    imports: [
        IonTabs,
        IonTabBar,
        IonTabButton,
        IonIcon,
        IonLabel,
        RouterModule,
    ]
})
export class TabsPage {
  constructor() {
    addIcons({ calendar, people, location, informationCircle, newspaperOutline });
  }
}
```

---

### src/app/pages/turismo/turismo.page.html

```html
<ion-header>
  <ion-toolbar>
    <ion-title>Turismo Castelraimondo</ion-title>

    <ion-buttons slot="end">
      <ion-button color="danger" (click)="goBack()">
        <ion-icon slot="start" name="arrow-back-outline"></ion-icon>
        Torna indietro
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content fullscreen class="turismo-page">
  <!-- Browser/PWA: iframe con URL “sanitized” e SANDBOX -->
  <iframe
    *ngIf="isBrowser"
    class="ext-frame"
    [src]="safeUrl"
    sandbox="allow-scripts allow-same-origin allow-forms"
    referrerpolicy="no-referrer"
    allow="geolocation 'none'; microphone 'none'; camera 'none'; payment 'none'"
    title="Castelraimondo Turismo"
  ></iframe>

  <!-- App mobile: testo/loader mentre apri eventualmente un browser in-app -->
  <p *ngIf="!isBrowser" class="loading-msg">
    Caricamento Turismo...
  </p>
</ion-content>
```

---

### src/app/pages/turismo/turismo.page.scss

```scss
// :host, ion-content, iframe { display:block; width:100%; height:100%; }

.turismo-page {
  --background: var(--ion-background-color);

  ion-content::part(scroll) {
    height: 100%;
  }

  .ext-frame {
    display: block;
    width: 100%;
    height: 100%;
    border: none;
  }

  .loading-msg {
    padding: 16px;
  }
}
```

---

### src/app/pages/turismo/turismo.page.ts

```ts
import { Component, OnInit } from '@angular/core';
import { NgIf } from '@angular/common';
import {
  IonContent,
  IonHeader,
  IonToolbar,
  IonTitle,
  IonButtons,
  IonButton,
  IonIcon,
} from '@ionic/angular/standalone';
import { Router } from '@angular/router';
import { DomSanitizer, SafeResourceUrl } from '@angular/platform-browser';

declare var cordova: any;

@Component({
  selector: 'app-turismo',
  standalone: true,
  templateUrl: './turismo.page.html',
  styleUrls: ['./turismo.page.scss'],
  imports: [
    NgIf,
    IonContent,
    IonHeader,
    IonToolbar,
    IonTitle,
    IonButtons,
    IonButton,
    IonIcon,
  ],
})
export class TurismoPage implements OnInit {
  readonly url = 'https://castelraimondoturismo.it';
  readonly whitelist = [
    'https://castelraimondoturismo.it',
    'https://www.castelraimondoturismo.it',
    'http://localhost:8100'
  ];

  isBrowser = false;
  safeUrl: SafeResourceUrl | null = null;
  private ref: any;

  constructor(private router: Router, private sanitizer: DomSanitizer) {}

  ngOnInit() {
    // Browser/PWA → iframe con URL "sanitized"
    if (!(window as any).cordova) {
      this.isBrowser = true;
      this.safeUrl = this.sanitizer.bypassSecurityTrustResourceUrl(this.url);
      return;
    }

    // Device (Cordova/Capacitor) → ThemeableBrowser con filtro whitelist
    try {
      this.ref = cordova?.ThemeableBrowser?.open(
        this.url,
        '_blank',
        {
          toolbar: { height: 50, color: '#222222' },
          closeButton: {
            wwwImage: 'assets/icon/close.png',
            align: 'left',
            event: 'closePressed',
          },
        }
      );

      // Chiusura con bottone
      this.ref?.addEventListener?.('closePressed', () => this.ref?.close?.());

      // Controllo link (whitelist)
      this.ref?.addEventListener?.('loadstart', (event: any) => {
        const url = event.url;
        const allowed = this.whitelist.some(domain => url.startsWith(domain));
        if (!allowed) {
          console.warn('Blocked external URL:', url);
          this.ref.stop();
          this.ref.executeScript({ code: "alert('Navigazione non consentita');" });
        }
      });
    } catch (e) {
      // Fallback: se ThemeableBrowser non è disponibile
      window.open(this.url, '_system');
    }
  }

  goBack() {
    this.ref?.close?.();
    this.router.navigate(['/app/tabs/speakers']);
  }
}
```

---

### src/app/pages/tutorial/tutorial.html

```html
<ion-header class="ion-no-border">
  <ion-toolbar class="toolbar-logo">
    <div class="toolbar-container">
      <img src="assets/img/logo_comune.png" alt="Comune di Castelraimondo" />
    </div>

    <ion-buttons slot="end">
      <ion-button color="primary" (click)="startApp()" [hidden]="!showSkip">Skip</ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<!-- NB: #pageContent serve al fix offsetHeight (gestito nel TS) -->
<ion-content #pageContent fullscreen="true" class="kiosk">
  <div class="viewport">
    <!-- Info -->
    <div class="info-kiosk">
      <div class="clock">🕒 {{ currentTime }}</div>
      <div class="date">📅 {{ currentDate }}</div>
      <div class="weather" *ngIf="weather">
        🌤️ {{ weather.name }} - {{ weather.weather[0].description }} ({{ weather.main.temp }}°C)
      </div>
    </div>

    <!-- Slides (solo swipe orizzontale) -->
    <div class="slide-container">
      <!-- SLIDE 1: Carosello A3 -->
      <section #firstSlide class="slide slide-ads">
        <div class="ads-carousel">
          <div
            #adsTrack
            class="ads-track"
            (scroll)="onAdsScroll()"
            (pointerdown)="pauseAdsCarousel(true); $event.stopPropagation()"
            (pointerup)="resumeAdsCarousel()"
            (touchstart)="$event.stopPropagation()"
            (touchend)="resumeAdsCarousel()"
          >
            <figure class="ads-item" *ngFor="let img of adsImages; let i = index" (click)="openImageFull(img)">
              <img [src]="img" (error)="removeBrokenAd(i)" alt="Promozione" loading="eager" />
            </figure>
          </div>

          <div class="ads-dots" *ngIf="adsImages.length > 1">
            <span
              *ngFor="let _ of adsImages; let i = index"
              class="dot"
              [class.active]="i === adsIndex"
              (click)="goToAd(i)"></span>
          </div>
        </div>
      </section>

      <!-- SLIDE 2: Info -->
      <section class="slide slide-info">
        <div class="info-card">
          <img src="assets/img/ica-slidebox-img-1.png" class="slide-image" alt="Logo" />

          <h2 class="slide-title tight">Welcome to <b>CASTELRAIMONDO</b></h2>

          <p class="slide-text">
            Centro commerciale Naturale "<b>Il Cassero 2.0</b>" è il progetto di
            riqualificazione e valorizzazione territoriale realizzato da un' aggregazione di 10 imprese locali che, con
            una comunione di intenti, hanno dato vita ad una serie di interventi volti al potenziamento del decoro delle
            proprie attività e ad un intervento condiviso, che si è tradotto in un totem multimediale per la promozione
            delle imprese e del territorio di Castelraimondo. Un progetto che premia la sinergia e il fare sistema.
          </p>

          <div class="partners-logos">
            <img src="assets/img/loghi_enti.png" alt="Enti e Partner" loading="lazy" />
          </div>
        </div>
      </section>

      <!-- SLIDE 3: Video + CTA in basso -->
      <section #videoSection class="slide slide-video" [class.active]="isVideoActive">
        <video
          #slideVideo
          class="hero-video"
          preload="none"
          [muted]="muted"
          playsinline
          [attr.poster]="'assets/img/video-poster.jpg'"
          [attr.webkit-playsinline]="true"
          (error)="onVideoError($event)">
          <!-- src impostata da TS quando la slide è attiva -->
        </video>

        <!-- Hamburger -->
        <div class="video-chrome">
          <ion-button fill="clear" size="large" (click)="toggleMenu()" aria-label="Apri menu">
            <ion-icon [ios]="'menu-outline'" [md]="'menu-outline'"></ion-icon>
          </ion-button>
        </div>

        <!-- CTA (ancorata sopra il footer) -->
        <div class="video-cta">
          <ion-button size="large" (click)="unmuteAndPlay()" *ngIf="showUnmuteBtn">🔊 Audio ON</ion-button>
          <ion-button
            class="cta"
            size="large"
            color="primary"
            routerLink="/app/tabs/schedule"
            routerDirection="root">
            INIZIA ORA
          </ion-button>
        </div>
      </section>
    </div>
  </div>

  <!-- Modal immagine full-screen -->
  <ion-modal
    [isOpen]="isImageModalOpen"
    (didDismiss)="closeImageFull()"
    class="image-modal"
    backdropDismiss="true">
    <ng-template>
      <div class="image-modal-wrapper" (click)="closeImageFull()">
        <img [src]="modalImageSrc" alt="Anteprima" />
      </div>
    </ng-template>
  </ion-modal>

  <!-- Modal Assistenza / WhatsApp -->
  <ion-modal
    [isOpen]="supportModalOpen"
    (didDismiss)="supportModalOpen = false"
    class="support-modal"
    backdropDismiss="true">
    <ng-template>
      <div class="support-modal-wrap" (click)="$event.stopPropagation()">
        <h3>Assistenza</h3>
        <img [src]="supportQrSrc" alt="QR WhatsApp" class="support-qr" />
        <p class="support-note">
          Scansiona il QR con lo smartphone per aprire WhatsApp<br />
          oppure usa il numero <b>+39 389 986 8381</b>.
        </p>
        <div class="support-actions">
          <ion-button size="small" (click)="copyWhatsAppLink()">Copia link</ion-button>
          <ion-button size="small" fill="outline" (click)="supportModalOpen = false">Chiudi</ion-button>
        </div>
      </div>
    </ng-template>
  </ion-modal>
</ion-content>

<!-- Footer PBC + Endri in CARD -->
<ion-footer class="pbc-footer">
  <ion-card class="pbc-card" mode="md">
    <ion-card-content class="pbc-wrap">
      <img src="assets/img/pbc.png"   alt="PBC - Grafica sito"  class="brand-logo" />
      <img src="assets/img/endri.png" alt="Endri - Grafica sito" class="brand-logo" />
    </ion-card-content>
  </ion-card>
</ion-footer>
```

---

### src/app/pages/tutorial/tutorial.scss

```scss
/* =========================
   VARIABILI REGOLABILI
   ========================= */
:root{
  --pbc-footer-h: 56px;      /* altezza footer (se serve) */
  --cta-gap: 14px;           /* spazio tra Audio ON e INIZIA ORA */
}

/* =========================
   HEADER logo centrato
   ========================= */
.toolbar-logo { position: relative; }
.toolbar-center {
  position: absolute; left: 50%; top: 50%;
  transform: translate(-50%,-50%);
  pointer-events: none;
}
.toolbar-center img { height: 28px; width: auto; object-fit: contain; }

/* =========================
   LAYOUT KIOSK
   ========================= */
.kiosk{ --overflow:hidden; }
.viewport{
  height:100%;
  display:grid;
  grid-template-rows:auto 1fr; /* info | slides */
  row-gap: 2px;
  min-height: 0;               /* fondamentale per scroll figli */
}
ion-toolbar{ --background:transparent; }

/* =========================
   INFO KIOSK
   ========================= */
.info-kiosk{
  text-align:center;
  background:#f4f4f4;
  padding:clamp(10px,1.6vh,18px) 10px;
  color:#222; font-weight:600;
  border-radius:8px;
  margin: 6px 12px 0;
}
.info-kiosk .clock{ font-size:clamp(2rem,4.5vw,3rem); font-weight:800; margin-bottom:4px; }
.info-kiosk .date{  font-size:clamp(1.1rem,2.2vw,1.6rem); margin-bottom:4px; }
.info-kiosk .weather{ font-size:clamp(1rem,2vw,1.4rem); font-style:italic; }

/* =========================
   FOOTER (logos) in “card”
   ========================= */
.pbc-footer{
  --background:transparent;
  --border-color:transparent;
  min-height:var(--pbc-footer-h);
  z-index:1000;
}
.pbc-footer .pbc-wrap{
  width:100%;
  display:flex; justify-content:center; align-items:center;
  gap:18px;
  padding:6px 0 8px;

  /* effetto card */
  background:#fff;
  border-radius:14px 14px 0 0;
  box-shadow: 0 -10px 24px rgba(0,0,0,.10);
  margin: 0 10px;
}
.pbc-footer .brand-logo{
  height:clamp(22px,4vh,36px);
  width:auto; opacity:.95;
  filter:drop-shadow(0 3px 10px rgba(0,0,0,.25));
}

/* =========================
   SLIDES (swipe orizzontale)
   ========================= */
.slide-container{
  height:100%;
  min-height: 0;
  display:grid;
  grid-auto-flow:column;
  grid-auto-columns:100%;
  overflow-x:auto; overflow-y:hidden;
  scroll-snap-type:x mandatory;
  -webkit-overflow-scrolling:touch;
  touch-action:pan-x;             /* orizzontale sul contenitore */
}
.slide{
  position:relative; height:100%; min-height:0;
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  scroll-snap-align:center; scroll-snap-stop:always;
  padding:1px 12px 8px;
  gap:10px;
  text-align:center;
}

/* =========================
   SLIDE 1: CAROSELLO A3 (centrato)
   ========================= */
.slide-ads{
  display:grid;
  place-items:center;
  gap:10px;
}
.ads-carousel{
  position:relative;
  width:min(96%, 980px);
  height:100%;
  max-height:100%;
  margin:0 auto;
  display:grid; place-items:center;
}
.ads-track{
  width:100%; height:100%;
  display:grid;
  grid-auto-flow:column;
  grid-auto-columns:100%;
  overflow:auto;
  scroll-snap-type:x mandatory;
  -webkit-overflow-scrolling:touch;
  gap:0;
}
.ads-item{
  width:100%; height:100%;
  display:grid; place-items:center;
  scroll-snap-align:center;
  padding:8px;
}
.ads-item img{
  width:100%; height:100%;
  object-fit:contain;
  background:#fff;
  border-radius:12px;
  box-shadow:0 8px 24px rgba(0,0,0,.18);
  user-select:none; -webkit-user-drag:none;
  cursor:pointer;
}
.ads-dots{
  position:absolute;
  bottom:12px;
  left:50%; transform:translateX(-50%);
  display:flex; gap:6px;
}
.ads-dots .dot{
  width:9px; height:9px; border-radius:999px;
  background:rgba(255,255,255,.45); outline:1px solid rgba(0,0,0,.25);
}
.ads-dots .dot.active{ background:rgba(255,255,255,.95); }

/* =========================
   SLIDE 2: INFO (SCORREVOLE in verticale)
   ========================= */
.slide-info{
  align-items:stretch;    /* la card si allarga in altezza */
  min-height:0;           /* abilita lo scroll interno */
}
.info-card{
  width:min(96%, 980px);
  margin:0 auto;

  /* layout card */
  background:#fff;
  border-radius:14px;
  box-shadow:0 10px 30px rgba(0,0,0,.12);
  padding:16px 16px 14px;

  /* 🔑 SCROLL INTERNO verticale */
  max-height: 100%;
  overflow: auto;
  -webkit-overflow-scrolling: touch;
  touch-action: pan-y;         /* consenti scroll verticale qui */

  display:flex; flex-direction:column; align-items:center; gap:10px;
  min-height: 0;               /* per iOS/Safari */
}
.slide-image{ max-width:80%; max-height:20vh; margin:6px 0 0; pointer-events:none; }
.slide-title{ margin:8px 0 0; }
.slide-title.tight{ margin-top:8px; }

/* testo giustificato */
.slide-text{
  padding:0 18px;
  color:var(--ion-color-step-600,#60646b);
  font-size:15px;
  line-height:1.55;
  text-align:justify;
}
.slide-text b{ color:var(--ion-text-color,#000); }

.partners-logos{ margin-top:8px; width:100%; display:grid; place-items:center; }
.partners-logos img{ width:min(92%, 760px); height:auto; object-fit:contain; }

/* =========================
   SLIDE 3: VIDEO + CTA (ancorata in basso)
   ========================= */
.slide-video{
  position:relative;
  overflow:hidden;
  display:grid; place-items:center;
}
.hero-video{
  position:relative;
  width:100%; height:100%;
  max-width:100%; max-height:100%;
  object-fit:contain; object-position:center;
  background:#000; z-index:0;
}
.video-chrome, .video-cta{ position:absolute; z-index:3; }
.video-chrome{
  top:max(10px, env(safe-area-inset-top));
  left:10px;
  filter:drop-shadow(0 2px 6px rgba(0,0,0,.4));
}
.video-cta{
  left: 50%;
  transform: translateX(-50%);
  bottom: max(12px, env(safe-area-inset-bottom));
  display: flex;
  flex-direction: column;            /* in colonna; metti row per affiancarli */
  gap: var(--cta-gap);
  text-shadow: 0 2px 8px rgba(0,0,0,.45);
}
.video-cta ion-button{
  width:100%;
  max-width:420px;
  margin-inline:auto;
}
.slide-video:not(.active) .hero-video,
.slide-video:not(.active) .video-cta,
.slide-video:not(.active) .video-chrome{ display:none; }

/* schermi bassi */
@media (max-height:640px){
  .slide-text{ padding:0 12px; }
}

/* =========================
   MODAL IMMAGINE FULL-SCREEN
   ========================= */
.image-modal::part(content){
  --height:100%; --width:100%; --border-radius:0; background:#000;
}
.image-modal .image-modal-wrapper{
  width:100vw; height:100vh; display:grid; place-items:center; background:#000;
}
.image-modal img{ width:100%; height:100%; object-fit:contain; }

/* =========================
   MODAL ASSISTENZA / WHATSAPP
   ========================= */
.support-modal::part(content) {
  --height: auto;
  --width: min(92vw, 420px);
  --border-radius: 14px;
  padding: 16px;
}
.support-modal-wrap { display: grid; gap: 12px; text-align: center; }
.support-modal-wrap h3 { margin: 0 0 4px; font-size: 1.1rem; font-weight: 700; }
.support-qr {
  width: 220px; height: 220px; margin: 0 auto;
  border-radius: 8px; box-shadow: 0 4px 18px rgba(0,0,0,.15); background: #fff;
}
.support-note { margin: 4px 0 0; font-size: 0.9rem; line-height: 1.35; }
.support-actions { display: flex; justify-content: center; gap: 10px; margin-top: 4px; }

/* =========================
   OVERRIDE IPHONE 14 PRO MAX
   ========================= */
@supports (padding: max(0px)){
  @media (device-width:430px) and (device-height:932px) and (orientation:portrait){
    :root{ --cta-gap: 10px; }
  }
}

/* Toast verde */
.toast-green::part(container) {
  --background: #22c55e;  /* verde */
  --color: #ffffff;
  border-radius: 12px;
}
.toast-green::part(button) { color: #ffffff; font-weight: 700; }

/* ==== Nascondi le scrollbar ma mantieni lo swipe ==== */
ion-content.kiosk::-webkit-scrollbar { display: none !important; }
ion-content.kiosk { scrollbar-width: none !important; -ms-overflow-style: none !important; }

.slide-container {
  overflow-x: auto;
  overflow-y: hidden;
  -webkit-overflow-scrolling: touch;
  scroll-snap-type: x mandatory;
  scrollbar-width: none;
  -ms-overflow-style: none;
}
.slide-container::-webkit-scrollbar { width: 0; height: 0; background: transparent; }

.ads-track {
  overflow-x: auto; overflow-y: hidden;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: none; -ms-overflow-style: none;
  overscroll-behavior: contain;
}
.ads-track::-webkit-scrollbar { width: 0; height: 0; background: transparent; }

/* Toolbar host */
.toolbar-logo { --background: transparent; --min-height: 72px; position: relative; }
.toolbar-container {
  position: absolute; inset: 0;
  display: flex; align-items: center; justify-content: center;
  pointer-events: none;
}
.toolbar-container img {
  max-width: 100%; max-height: 100%;
  width: auto; height: 100%; object-fit: contain;
}
```

---

### src/app/pages/tutorial/tutorial.spec.ts

```ts
import { CUSTOM_ELEMENTS_SCHEMA, importProvidersFrom } from '@angular/core';
import { TestBed } from '@angular/core/testing';
import { Router, provideRouter } from '@angular/router';
import { MenuController, provideIonicAngular } from '@ionic/angular/standalone';
import { IonicStorageModule } from '@ionic/storage-angular';
import { routes } from '../../app.routes';
import { TutorialPage } from './tutorial';

describe('TutorialPage', () => {
  let fixture, app;
  beforeEach(async () => {
    const menuSpy = jasmine.createSpyObj('MenuController', [
      'toggle',
      'enable',
    ]);
    const routerSpy = jasmine.createSpyObj('Router', ['navigateByUrl']);

    await TestBed.configureTestingModule({
      declarations: [],
      imports: [TutorialPage],
      schemas: [CUSTOM_ELEMENTS_SCHEMA],
      providers: [
        provideIonicAngular(),
        provideRouter(routes),
        importProvidersFrom(IonicStorageModule.forRoot()),
        { provide: MenuController, useValue: menuSpy },
        { provide: Router, useValue: routerSpy },
      ],
    }).compileComponents();
  });

  beforeEach(() => {
    fixture = TestBed.createComponent(TutorialPage);
    app = fixture.debugElement.componentInstance;
    app.storage.create();
  });
  it('should create the tutorial page', () => {
    expect(app).toBeTruthy();
  });

  it('should check the tutorial status', async () => {
    const didTuts = await app.storage.get('ion_did_tutorial');
    expect(didTuts).toBeFalsy();
  });
});
```

---

### src/app/pages/tutorial/tutorial.ts

```ts
import {
  Component,
  OnInit,
  AfterViewInit,
  OnDestroy,
  ViewChild,
  ElementRef,
  inject,
} from "@angular/core";
import { Router, RouterLink } from "@angular/router";
import {
  IonHeader,
  IonToolbar,
  IonButtons,
  IonButton,
  IonIcon,
  IonContent,
  IonFooter,
  IonModal,
  MenuController,
  ToastController,
  IonCard,            // 👈 aggiunto
  IonCardContent      // 👈 aggiunto
} from "@ionic/angular/standalone";
import { IonContent as IonContentBase } from "@ionic/angular";
import { Storage } from "@ionic/storage-angular";
import { addIcons } from "ionicons";
import { arrowForward, close, menuOutline } from "ionicons/icons";
import { HttpClient } from "@angular/common/http";
import { CommonModule } from "@angular/common";

@Component({
  standalone: true,
  selector: "page-tutorial",
  templateUrl: "tutorial.html",
  styleUrls: ["./tutorial.scss"],
  imports: [
    CommonModule,
    RouterLink,
    IonHeader,
    IonToolbar,
    IonButtons,
    IonButton,
    IonIcon,
    IonContent,
    IonFooter,
    IonModal,
    IonCard,          // 👈 aggiunto
    IonCardContent    // 👈 aggiunto
  ],
})
export class TutorialPage implements OnInit, AfterViewInit, OnDestroy {
  // ============== Services
  private menu = inject(MenuController);
  private router = inject(Router);
  private storage = inject(Storage);
  private http = inject(HttpClient);
  private toastCtrl = inject(ToastController);

  // ============== Header / UI state
  showSkip = true;

  // ============== Clock / Weather
  currentTime!: string;
  currentDate = "";
  weather: any;
  private weatherApiKey = "41266f28a33c8ef363049edf9b38275e";
  private weatherCity = "Castelraimondo";
  private clockInterval?: any;

  // ============== View refs
  @ViewChild("pageContent", { static: true }) pageContent!: IonContentBase;
  @ViewChild("firstSlide", { static: true }) firstSlide!: ElementRef<HTMLElement>;

  // ============== Slide 1: Carosello A3
  @ViewChild("adsTrack", { static: false }) adsTrack!: ElementRef<HTMLDivElement>;
  adsImages: string[] = [
    "assets/poster/a3_01.jpg",
    "assets/poster/a3_02.jpg",
    "assets/poster/a3_03.jpg",
    "assets/poster/a3_04.jpg",
    "assets/poster/a3_05.jpg",
    "assets/poster/a3_06.jpg",
    "assets/poster/a3_07.jpg",
    "assets/poster/a3_08.jpg",
    "assets/poster/a3_09.jpg",
  ];
  adsIndex = 0;
  private readonly ADS_DURATION_MS = 10_000;
  private adsTimer?: any;
  private adsUserPause = false;
  private adsScrollDebounce?: any;

  // Modal immagine per il carosello
  isImageModalOpen = false;
  modalImageSrc = "";
  private modalAutoCloseTimer?: any;

  // ============== Slide 3: Video
  @ViewChild("slideVideo", { static: true }) slideVideo!: ElementRef<HTMLVideoElement>;
  @ViewChild("videoSection", { static: true }) videoSection!: ElementRef<HTMLElement>;

  private readonly VIDEO_SRC = "assets/video/polveredistelle.mp4";
  muted = true;
  showUnmuteBtn = false;
  isPlaying = false;
  isVideoActive = false;
  private videoSrcSet = false;
  private io?: IntersectionObserver; // observer slide video

  // Gesto iniziale per sbloccare audio (solo slide video attiva)
  private firstGestureHandler = async () => {
    if (!this.isVideoActive) return;
    await this.forceUnlockAudio();
    if (!this.muted) {
      window.removeEventListener("pointerdown", this.firstGestureHandler, true);
      window.removeEventListener("keydown", this.firstGestureHandler, true);
    }
  };

  // ============== Toast assistenza (prima slide)
  private ioFirst?: IntersectionObserver;
  isFirstSlideActive = false;
  supportModalOpen = false;
  supportWhatsappLink = "";
  supportQrSrc = "";
  private supportDelayTimer?: any;
  private lastSupportToast = 0;
  private supportToastShown = false;

  private readonly SUPPORT_TOAST_DELAY_MS = 6_000;
  private readonly SUPPORT_TOAST_DURATION_MS = 12_000;
  private readonly SUPPORT_TOAST_COOLDOWN_MS = 12_000;

  constructor() {
    addIcons({ arrowForward, close, menuOutline });
  }

  // ============== Lifecycle
  ngOnInit() {
    this.updateTimeAndDate();
    this.clockInterval = setInterval(() => this.updateTimeAndDate(), 1000);
    this.fetchWeather();
  }

  async ngAfterViewInit() {
    try { await this.pageContent.getScrollElement(); } catch {}

    setTimeout(() => this.goToAd(this.adsIndex, "auto"), 0);
    this.startAdsCarousel();

    this.setupIntersectionObserverForVideo();
    this.setupFirstSlideObserver();

    window.addEventListener("pointerdown", this.firstGestureHandler, true);
    window.addEventListener("keydown", this.firstGestureHandler, true);

    document.addEventListener("visibilitychange", () => {
      if (document.visibilityState === "visible" && this.isVideoActive) {
        this.startVideo();
      }
    });
  }

  ngOnDestroy() {
    if (this.clockInterval) clearInterval(this.clockInterval);

    this.stopAdsCarousel();
    if (this.io) this.io.disconnect();
    if (this.ioFirst) this.ioFirst.disconnect();

    window.removeEventListener("pointerdown", this.firstGestureHandler, true);
    window.removeEventListener("keydown", this.firstGestureHandler, true);

    this.pauseVideo(true);
    this.menu.enable(true);

    this.clearSupportTimers();
    this.supportToastShown = false;
  }

  // ============== Clock / Weather
  updateTimeAndDate() {
    const now = new Date();
    this.currentTime = now.toLocaleTimeString("it-IT", {
      hour: "2-digit", minute: "2-digit", second: "2-digit",
    });
    this.currentDate = now.toLocaleDateString("it-IT", {
      weekday: "long", day: "numeric", month: "long",
    });
  }

  fetchWeather() {
    const url = `https://api.openweathermap.org/data/2.5/weather?q=${this.weatherCity}&appid=${this.weatherApiKey}&units=metric&lang=it`;
    this.http.get(url).subscribe({
      next: (data) => (this.weather = data),
      error: (err) => console.error("Errore meteo:", err),
    });
  }

  // ============== Carosello (slide 1)
  startAdsCarousel() {
    if (!this.adsImages.length) return;
    this.stopAdsCarousel();
    this.adsTimer = setInterval(() => {
      if (this.adsUserPause) return;
      const next = (this.adsIndex + 1) % this.adsImages.length;
      this.goToAd(next);
    }, this.ADS_DURATION_MS);
  }
  stopAdsCarousel() {
    if (this.adsTimer) { clearInterval(this.adsTimer); this.adsTimer = undefined; }
  }
  goToAd(i: number, behavior: ScrollBehavior = "smooth") {
    this.adsIndex = Math.max(0, Math.min(i, this.adsImages.length - 1));
    const track = this.adsTrack?.nativeElement;
    if (!track) return;
    const x = this.adsIndex * track.clientWidth;
    track.scrollTo({ left: x, behavior });
  }
  onAdsScroll() {
    const track = this.adsTrack?.nativeElement;
    if (!track) return;
    const w = track.clientWidth || 1;
    const idx = Math.round(track.scrollLeft / w);
    if (idx !== this.adsIndex) this.adsIndex = idx;
    this.pauseAdsCarousel();
    clearTimeout(this.adsScrollDebounce);
    this.adsScrollDebounce = setTimeout(() => this.resumeAdsCarousel(), 2500);
  }
  pauseAdsCarousel(user = false) { if (user) this.adsUserPause = true; this.stopAdsCarousel(); }
  resumeAdsCarousel() { this.adsUserPause = false; this.startAdsCarousel(); }
  removeBrokenAd(i: number) {
    const missing = this.adsImages[i];
    console.warn("[Carosello] Immagine mancante o non accessibile, rimuovo:", missing);
    this.adsImages.splice(i, 1);
    if (!this.adsImages.length) { this.stopAdsCarousel(); return; }
    this.adsIndex = Math.min(this.adsIndex, this.adsImages.length - 1);
    setTimeout(() => this.goToAd(this.adsIndex, "auto"), 0);
  }

  // Modal immagine
  openImageFull(src: string): void {
    this.modalImageSrc = src;
    this.isImageModalOpen = true;
    if (this.modalAutoCloseTimer) clearTimeout(this.modalAutoCloseTimer);
    this.modalAutoCloseTimer = setTimeout(() => this.closeImageFull(), 10_000);
  }
  closeImageFull(): void {
    this.isImageModalOpen = false;
    if (this.modalAutoCloseTimer) { clearTimeout(this.modalAutoCloseTimer); this.modalAutoCloseTimer = undefined; }
  }

  // ============== Video (slide 3)
  private setupIntersectionObserverForVideo() {
    this.io = new IntersectionObserver(
      ([entry]) => {
        const active = entry.isIntersecting && entry.intersectionRatio > 0.6;
        this.isVideoActive = active;
        this.menu.enable(active);
        if (active) this.startVideo(); else this.pauseVideo();
      },
      { threshold: [0, 0.6, 1] }
    );
    this.io.observe(this.videoSection.nativeElement);
  }
  private startVideo() {
    const v = this.slideVideo.nativeElement;
    if (!this.videoSrcSet) { v.src = this.VIDEO_SRC; this.videoSrcSet = true; }
    v.loop = true;
    v.muted = this.muted;
    v.autoplay = true;
    v.playsInline = true;
    v.setAttribute("webkit-playsinline", "true");
    v.play().then(() => {
      this.isPlaying = true;
      this.tryUnmute();
    }).catch(() => { this.showUnmuteBtn = true; });
  }
  private pauseVideo(clear = false) {
    const v = this.slideVideo?.nativeElement; if (!v) return;
    v.pause(); this.isPlaying = false;
    if (clear) { v.removeAttribute("src"); v.load(); this.videoSrcSet = false; }
  }
  private async tryUnmute() {
    if (!this.isVideoActive) return;
    const v = this.slideVideo.nativeElement;
    try { v.muted = false; await v.play(); this.muted = false; this.showUnmuteBtn = false; this.isPlaying = true; }
    catch { v.muted = true; this.muted = true; this.showUnmuteBtn = true; }
  }
  private async forceUnlockAudio() {
    if (!this.isVideoActive) return;
    try {
      const Ctx = (window as any).AudioContext || (window as any).webkitAudioContext;
      if (Ctx) {
        const ctx = new Ctx();
        if (ctx.state === "suspended") await ctx.resume();
        const src = ctx.createBufferSource();
        src.buffer = ctx.createBuffer(1, 1, ctx.sampleRate);
        src.connect(ctx.destination);
        src.start(0);
      }
    } catch {}
    const v = this.slideVideo?.nativeElement; if (!v) return;
    try { v.muted = false; await v.play(); this.muted = false; this.showUnmuteBtn = false; this.isPlaying = true; }
    catch { v.muted = true; this.muted = true; this.showUnmuteBtn = true; }
  }
  unmuteAndPlay() { this.forceUnlockAudio(); }
  onVideoError(_ev: Event) {
    this.toastCtrl.create({
      message: "Il video non è disponibile. Se il problema persiste, contattaci su WhatsApp: +39 389 986 8381",
      duration: 7000,
      position: "bottom",
      buttons: [{ text: "QR WhatsApp", handler: () => this.openWhatsAppSafe() }],
    }).then(t => t.present());
  }

  // ============== Toast assistenza (prima slide)
  private setupFirstSlideObserver() {
    this.ioFirst = new IntersectionObserver(
      ([entry]) => {
        const active = entry.isIntersecting && entry.intersectionRatio > 0.6;
        this.isFirstSlideActive = active;
        if (active) this.startSupportTimers(); else this.clearSupportTimers();
      },
      { threshold: [0, 0.6, 1] }
    );
    this.ioFirst.observe(this.firstSlide.nativeElement);
  }

  private startSupportTimers() {
    this.clearSupportTimers();

    if (this.supportToastShown) return;
    this.supportDelayTimer = setTimeout(async () => {
      if (!this.isFirstSlideActive || this.supportToastShown) return;
      await this.showSupportToast();
      this.lastSupportToast = Date.now();
      this.supportToastShown = true;
    }, this.SUPPORT_TOAST_DELAY_MS);
  }

  private clearSupportTimers() {
    if (this.supportDelayTimer) { clearTimeout(this.supportDelayTimer); this.supportDelayTimer = undefined; }
  }

  private async showSupportToast() {
    const toast = await this.toastCtrl.create({
      message: "Se noti malfunzionamenti o errori nel totem, contattaci su WhatsApp: +39 389 986 8381",
      position: "bottom",
      duration: this.SUPPORT_TOAST_DURATION_MS,
      cssClass: "toast-green",
      color: "success",
      buttons: [
        { text: "QR WhatsApp", handler: () => this.openWhatsAppSafe() },
        { text: "Chiudi", role: "cancel" },
      ],
    });
    await toast.present();
  }

  // ============== WhatsApp: modal con QR
  openWhatsAppSafe() {
    const msg = "Ciao, nel totem ho notato un problema. Potete verificare?";
    const link = `https://wa.me/393899868381?text=${encodeURIComponent(msg)}`;
    this.supportWhatsappLink = link;
    this.supportQrSrc =
      "https://api.qrserver.com/v1/create-qr-code/?size=220x220&data=" + encodeURIComponent(link);
    this.supportModalOpen = true;
  }

  async copyWhatsAppLink() {
    try {
      await navigator.clipboard.writeText(this.supportWhatsappLink);
      const t = await this.toastCtrl.create({ message: "Link WhatsApp copiato negli appunti.", duration: 2000, position: "bottom" });
      await t.present();
    } catch {
      const t = await this.toastCtrl.create({ message: "Impossibile copiare. Numero: +39 389 986 8381", duration: 3000, position: "bottom" });
      await t.present();
    }
  }

  // ============== Menu & Nav
  async toggleMenu() { try { await this.menu.toggle(); } catch {} }
  startApp() {
    this.router.navigateByUrl("/app/tabs/schedule", { replaceUrl: true })
      .catch(err => console.error("Errore durante startApp:", err));
  }
}
```

---

### src/app/pages/vivere-camerino/vivere-camerino.page.html

```html
<ion-header>
  <ion-toolbar>
    <ion-title>Vivere Camerino</ion-title>

    <ion-buttons slot="end">
      <ion-button color="danger" (click)="goBack()">
        <ion-icon slot="start" name="arrow-back-outline"></ion-icon>
        Torna indietro
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content fullscreen class="vc-page">
  <!-- Browser/PWA: iframe SANDBOX per bloccare uscite (popup/top-navigation) -->
  <iframe
    *ngIf="isBrowser"
    class="ext-frame"
    [src]="safeUrl"
    sandbox="allow-scripts allow-same-origin allow-forms"
    referrerpolicy="no-referrer"
    allow="geolocation 'none'; microphone 'none'; camera 'none'; payment 'none'"
    title="Vivere Camerino"
  ></iframe>

  <!-- App mobile: placeholder/loader; qui puoi aprire un in-app browser se vuoi -->
  <p *ngIf="!isBrowser" class="loading-msg">
    Caricamento Vivere Camerino...
  </p>
</ion-content>
```

---

### src/app/pages/vivere-camerino/vivere-camerino.page.scss

```scss
:host, ion-content, iframe { display:block; width:100%; height:100%; }.vc-page {
  --background: var(--ion-background-color);

  /* fa sì che l'area scrollabile riempia l'intero content */
  ion-content::part(scroll) {
    height: 100%;
  }

  .ext-frame {
    display: block;
    width: 100%;
    height: 100%;
    border: none;
  }

  .loading-msg {
    padding: 16px;
  }
}
```

---

### src/app/pages/vivere-camerino/vivere-camerino.page.ts

```ts
import { Component, OnInit, inject } from '@angular/core';
import { DomSanitizer, SafeResourceUrl } from '@angular/platform-browser';
import { Router } from '@angular/router';

import {
  IonHeader, IonToolbar, IonTitle, IonButtons, IonButton, IonIcon, IonContent
} from '@ionic/angular/standalone';
import { isPlatform, NavController } from '@ionic/angular';
import { CommonModule } from '@angular/common';

import { addIcons } from 'ionicons';
import { arrowBackOutline } from 'ionicons/icons';

@Component({
  standalone: true,
  selector: 'page-vivere-camerino',
  templateUrl: './vivere-camerino.page.html',
  styleUrls: ['./vivere-camerino.page.scss'],
  imports: [
    CommonModule,
    IonHeader, IonToolbar, IonTitle, IonButtons, IonButton, IonIcon, IonContent
  ],
})
export class VivereCamerinoPage implements OnInit {
  private sanitizer = inject(DomSanitizer);
  private nav = inject(NavController);
  private router = inject(Router);

  // URL del sito Vivere Camerino
  private readonly RAW_URL = 'https://www.viverecamerino.it';

  isBrowser = true;          // true = PWA/desktop browser, false = app ibrida
  safeUrl!: SafeResourceUrl; // URL sanitizzato per l'iframe

  constructor() {
    addIcons({ arrowBackOutline });
    // considera "ibrido" se gira dentro Capacitor/Cordova
    this.isBrowser = !(isPlatform('hybrid') || isPlatform('capacitor') || isPlatform('cordova'));
  }

  ngOnInit(): void {
    this.safeUrl = this.sanitizer.bypassSecurityTrustResourceUrl(this.RAW_URL);
  }

  goBack() {
    // torna indietro nello stack (oppure usa navigateRoot('/app/tabs/...') se preferisci)
    this.nav.back();
  }
}
```

---

### src/app/providers/can-deactivate-support.guard.ts

```ts
import { inject } from '@angular/core';
import { CanDeactivateFn } from '@angular/router';
import { AlertController } from '@ionic/angular/standalone';
import { SupportPage } from '../pages/support/support';

export const canDeactivateSupportPage: CanDeactivateFn<SupportPage> = async (
  component: SupportPage
) => {
  // If the support message is empty we should just navigate
  if (
    !component.supportMessage ||
    component.supportMessage.trim().length === 0
  ) {
    return true;
  }

  const alertCtrl = inject(AlertController);
  const alert = await alertCtrl.create({
    header: 'Leave this page?',
    message:
      'Are you sure you want to leave this page? Your support message will not be submitted.',
    buttons: [
      {
        text: 'Stay',
        role: 'cancel',
        handler: () => false,
      },
      {
        text: 'Leave',
        handler: () => true,
      },
    ],
  });

  await alert.present();
  const { role } = await alert.onDidDismiss();
  return role !== 'cancel';
};
```

---

### src/app/providers/check-tutorial.guard.ts

```ts
import { inject } from '@angular/core';
import { Router } from '@angular/router';
import { Storage } from '@ionic/storage-angular';
import { from, map, tap } from 'rxjs';

export const checkTutorialGuard = () => {
  const storage = inject(Storage);
  const router = inject(Router);

  return from(storage.get('ion_did_tutorial')).pipe(
    tap(didTutorial => {
      if (didTutorial === true) {
        router.navigate(['/app', 'tabs', 'schedule']);
      }
    }),
    map(didTutorial => !didTutorial)
  );
};
```

---

### src/app/providers/conference.service.ts

```ts
import { HttpClient } from '@angular/common/http';
import { Injectable, inject } from '@angular/core';
import { of } from 'rxjs';
import { map } from 'rxjs/operators';

import {
  ConferenceData,
  Group,
  ScheduleDay,
  Session,
  Speaker,
} from '../interfaces/conference.interfaces';
import { UserService } from './user.service';

@Injectable({
  providedIn: 'root',
})
export class ConferenceService {
  http = inject(HttpClient);
  user = inject(UserService);
  data: ConferenceData | null = null;

  load() {
    if (this.data) {
      return of(this.data);
    } else {
      return this.http
        .get<ConferenceData>('assets/data/data.json')
        .pipe(map(this.processData, this));
    }
  }

  processData(data: ConferenceData): ConferenceData {
    // just some good 'ol JS fun with objects and arrays
    // build up the data by linking speakers to sessions
    this.data = data;

    // loop through each day in the schedule
    this.data.schedule.forEach((day: ScheduleDay) => {
      // loop through each timeline group in the day
      day.groups.forEach((group: Group) => {
        // loop through each session in the timeline group
        group.sessions.forEach((session: Session) => {
          session.speakers = [];
          if (session.speakerNames) {
            session.speakerNames.forEach((speakerName: string) => {
              const speaker = this.data.speakers.find(
                (s: Speaker) => s.name === speakerName
              );
              if (speaker) {
                session.speakers.push(speaker);
                speaker.sessions = speaker.sessions || [];
                speaker.sessions.push(session);
              }
            });
          }
        });
      });
    });

    return this.data;
  }

  getTimeline(
    dayIndex: number,
    queryText = '',
    excludeTracks: string[] = [],
    segment = 'all'
  ) {
    return this.load().pipe(
      map((data: ConferenceData) => {
        const day = data.schedule[dayIndex];
        day.shownSessions = 0;

        queryText = queryText.toLowerCase().replace(/,|\.|-/g, ' ');
        const queryWords = queryText
          .split(' ')
          .filter(w => !!w.trim().length);

        day.groups.forEach((group: Group) => {
          group.hide = true;

          // Sort sessions within each group by start time
          group.sessions.sort((a, b) => {
            const timeA = new Date('1970/01/01 ' + a.timeStart).getTime();
            const timeB = new Date('1970/01/01 ' + b.timeStart).getTime();
            return timeA - timeB;
          });

          group.sessions.forEach((session: Session) => {
            // check if this session should show or not
            this.filterSession(session, queryWords, excludeTracks, segment);

            if (!session.hide) {
              // if this session is not hidden then this group should show
              group.hide = false;
              day.shownSessions++;
            }
          });
        });

        return day;
      })
    );
  }

  filterSession(
    session: Session,
    queryWords: string[],
    excludeTracks: string[],
    segment: string
  ) {
    let matchesQueryText = false;
    if (queryWords.length) {
      // of any query word is in the session name than it passes the query test
      queryWords.forEach((queryWord: string) => {
        if (session.name.toLowerCase().indexOf(queryWord) > -1) {
          matchesQueryText = true;
        }
      });
    } else {
      // if there are no query words then this session passes the query test
      matchesQueryText = true;
    }

    // if any of the sessions tracks are not in the
    // exclude tracks then this session passes the track test
    let matchesTracks = false;
    session.tracks.forEach((trackName: string) => {
      if (excludeTracks.indexOf(trackName) === -1) {
        matchesTracks = true;
      }
    });

    // if the segment is 'favorites', but session is not a user favorite
    // then this session does not pass the segment test
    let matchesSegment = false;
    if (segment === 'favorites') {
      if (this.user.hasFavorite(session.name)) {
        matchesSegment = true;
      }
    } else {
      matchesSegment = true;
    }

    // all tests must be true if it should not be hidden
    session.hide = !(matchesQueryText && matchesTracks && matchesSegment);
  }

  getSpeakers() {
    return this.load().pipe(map((data: ConferenceData) => data.speakers));
  }

  getTracks() {
    return this.load().pipe(map((data: ConferenceData) => data.tracks));
  }

  getMap() {
    return this.load().pipe(map((data: ConferenceData) => data.map));
  }
}
```

---

### src/app/providers/location.service.ts

```ts
import { Injectable, inject } from '@angular/core';
import { HttpClient } from '@angular/common/http';
import { BehaviorSubject, Observable, catchError, map, of } from 'rxjs';
import { Location } from '../interfaces/conference.interfaces';

@Injectable({
  providedIn: 'root'
})
export class LocationService {
  private http = inject(HttpClient);

  private locationsSubject = new BehaviorSubject<Location[]>([]);
  public readonly locations$ = this.locationsSubject.asObservable();

  loadLocations(): Observable<Location[]> {
    return this.http.get<any>('assets/data/data.json').pipe(
      map(data => {
        if (data.map && Array.isArray(data.map)) {
          // Add IDs to locations
          const locations = data.map.map((location: any, index: number) => ({
            ...location,
            id: index + 1
          }));
          this.locationsSubject.next(locations);
          return locations;
        } else {
          throw new Error('Invalid data format: map array not found');
        }
      }),
      catchError(error => {
        console.error('Error loading locations:', error);
        // Set default locations if data cannot be loaded
        const defaultLocations = [{
          id: 1,
          name: 'Piazza Dante Castelraimondo',
          lat: 43.20751529831467, 
          lng: 13.056397110815189,
          icon: "",
          center: true
        }];
        this.locationsSubject.next(defaultLocations);
        return of(defaultLocations);
      })
    );
  }

  getLocations(): Observable<Location[]> {
    return this.locations$;
  }

  getCenterLocation(): Observable<Location | undefined> {
    return this.locations$.pipe(
      map(locations => locations.find(location => location.center))
    );
  }
}
```

---

### src/app/providers/user.service.ts

```ts
import { Injectable, inject } from '@angular/core';
import { Storage } from '@ionic/storage-angular';

@Injectable({
  providedIn: 'root',
})
export class UserService {
  storage = inject(Storage);

  favorites: string[] = [];
  HAS_LOGGED_IN = 'hasLoggedIn';
  HAS_SEEN_TUTORIAL = 'hasSeenTutorial';

  hasFavorite(sessionName: string): boolean {
    return this.favorites.indexOf(sessionName) > -1;
  }

  addFavorite(sessionName: string): void {
    this.favorites.push(sessionName);
  }

  removeFavorite(sessionName: string): void {
    const index = this.favorites.indexOf(sessionName);
    if (index > -1) {
      this.favorites.splice(index, 1);
    }
  }

  login(username: string): Promise<boolean> {
    return this.storage.set(this.HAS_LOGGED_IN, true).then(() => {
      this.setUsername(username);
      return window.dispatchEvent(new CustomEvent('user:login'));
    });
  }

  signup(username: string): Promise<boolean> {
    return this.storage.set(this.HAS_LOGGED_IN, true).then(() => {
      this.setUsername(username);
      return window.dispatchEvent(new CustomEvent('user:signup'));
    });
  }

  logout(): Promise<any> {
    return this.storage
      .remove(this.HAS_LOGGED_IN)
      .then(() => {
        return this.storage.remove('username');
      })
      .then(() => {
        window.dispatchEvent(new CustomEvent('user:logout'));
      });
  }

  setUsername(username: string): Promise<any> {
    return this.storage.set('username', username);
  }

  getUsername(): Promise<string> {
    return this.storage.get('username').then(value => {
      return value;
    });
  }

  isLoggedIn(): Promise<boolean> {
    return this.storage.get(this.HAS_LOGGED_IN).then(value => {
      return value === true;
    });
  }
}
```

---

### src/app/security/kiosk-whitelist.directive.ts

```ts
import { Directive, EffectRef, OnDestroy, OnInit, inject } from '@angular/core';
import { KioskWhitelistService } from './kiosk-whitelist.service';
import { ToastController } from '@ionic/angular';

@Directive({
  selector: '[appKioskWhitelist]',
  standalone: true,
})
export class KioskWhitelistDirective implements OnInit, OnDestroy {
  private readonly whitelist = inject(KioskWhitelistService);
  private readonly toast = inject(ToastController);

  private originalOpen = window.open;
  private originalAssign = window.location.assign.bind(window.location);
  private originalReplace = window.location.replace.bind(window.location);

  private clickHandler = (ev: MouseEvent) => {
    // intercetta solo click primario
    if (ev.defaultPrevented || ev.button !== 0) return;
    // trova l'anchor più vicino
    const path = ev.composedPath ? ev.composedPath() as HTMLElement[] : [];
    let anchor: HTMLAnchorElement | null = null;

    for (const el of path as any) {
      if (el && (el as HTMLElement).tagName === 'A') {
        anchor = el as HTMLAnchorElement;
        break;
      }
    }
    if (!anchor) {
      // fallback: risale il DOM
      let node = ev.target as HTMLElement | null;
      while (node && node !== document.body) {
        if (node instanceof HTMLAnchorElement) { anchor = node; break; }
        node = node.parentElement;
      }
    }
    if (!anchor) return;

    const href = anchor.getAttribute('href');
    if (!href || href.startsWith('#')) return; // ancora interna: ok

    const allowed = this.whitelist.isAllowed(href);
    if (!allowed) {
      ev.preventDefault();
      ev.stopPropagation();
      this.blockToast();
      return;
    }

    // Se target _blank, impedisci nuova finestra: rimani nell'app
    if (anchor.target === '_blank') {
      ev.preventDefault();
      window.location.href = new URL(href, window.location.href).toString();
    }
  };

  private async blockToast() {
    const t = await this.toast.create({
      message: 'Link non consentito in modalità kiosk.',
      duration: 2000,
      position: 'bottom',
    });
    t.present();
  }

  ngOnInit() {
    // 1) Intercetta click su link
    document.addEventListener('click', this.clickHandler, true);

    // 2) Blocca window.open su URL non whitelisted
    window.open = ((url?: string | URL, target?: string, features?: string) => {
      if (!url) return null;
      const href = typeof url === 'string' ? url : url.toString();
      if (!this.whitelist.isAllowed(href)) {
        this.blockToast();
        return null;
      }
      // Evita aprire nuove finestre: rimani nella webview
      window.location.href = new URL(href, window.location.href).toString();
      return null;
    }) as any;

    // 3) Best-effort: blocca assign/replace verso URL non whitelisted
    window.location.assign = ((url: string | URL) => {
      const href = typeof url === 'string' ? url : url.toString();
      if (!this.whitelist.isAllowed(href)) {
        this.blockToast();
        return;
      }
      this.originalAssign(href);
    }) as any;

    window.location.replace = ((url: string | URL) => {
      const href = typeof url === 'string' ? url : url.toString();
      if (!this.whitelist.isAllowed(href)) {
        this.blockToast();
        return;
      }
      this.originalReplace(href);
    }) as any;
  }

  ngOnDestroy() {
    document.removeEventListener('click', this.clickHandler, true);
    // ripristina API native
    window.open = this.originalOpen;
    window.location.assign = this.originalAssign as any;
    window.location.replace = this.originalReplace as any;
  }
}
```

---

### src/app/security/kiosk-whitelist.service.ts

```ts
import { Injectable, InjectionToken, Inject, Optional } from '@angular/core';

export type WhitelistRule = string | RegExp;

/** Extend ALLOW rules from modules/environments */
export const KIOSK_WHITELIST = new InjectionToken<WhitelistRule[]>('KIOSK_WHITELIST');
/** Extend DENY rules from modules/environments (takes priority) */
export const KIOSK_DENYLIST = new InjectionToken<WhitelistRule[]>('KIOSK_DENYLIST');
/** If true, same-origin URLs are always allowed (default: true) */
export const KIOSK_ALLOW_SAME_ORIGIN = new InjectionToken<boolean>('KIOSK_ALLOW_SAME_ORIGIN');

@Injectable({ providedIn: 'root' })
export class KioskWhitelistService {
  /** Allowed URL schemes (keep tight for kiosk use) */
  private readonly allowedSchemes = new Set(['http:', 'https:', 'tel:', 'mailto:']);

  /** Base allow rules (merge with injected extras) */
  private readonly baseAllow: WhitelistRule[] = [
    // Your sites
    'castelraimondoturismo.it',
    'viverecamerino.it',
    'cronachemaceratesi.it',
    'picchionews.it',
    'comune.castelraimondo.mc.it',
    'cosmariambiente.it',
    'infioratadicastelraimondo.it',

    // Instagram widget providers (runtime)
    'elfsightcdn.com',
    'apps.elfsight.com',
    'cdn.lightwidget.com',

    // Instagram media CDNs
    'cdninstagram.com',
    'fbcdn.net',

    // Examples for path-specific APIs:
    // /https?:\/\/api\.miosito\.it\/v[12]\/.*/,
  ];

  /** Effective (merged) lists */
  private readonly allowRules: WhitelistRule[];
  private readonly denyRules: WhitelistRule[];

  constructor(
    @Optional() @Inject(KIOSK_WHITELIST) extraAllow?: WhitelistRule[],
    @Optional() @Inject(KIOSK_DENYLIST) extraDeny?: WhitelistRule[],
    @Optional() @Inject(KIOSK_ALLOW_SAME_ORIGIN) private allowSameOrigin: boolean = true
  ) {
    this.allowRules = [...this.baseAllow, ...(extraAllow ?? [])];
    this.denyRules = [...(extraDeny ?? [])];
  }

  /**
   * Returns true if the URL is permitted by:
   * 1) scheme check
   * 2) deny rules (first; any hit = blocked)
   * 3) allow rules (string = host/subdomain OR absolute URL prefix; regex = full href test)
   * 4) same-origin bypass (optional)
   */
  isAllowed(rawUrl: string): boolean {
    const url = this.tryParseUrl(rawUrl);
    if (!url) return false;

    // 1) Scheme guard
    if (!this.allowedSchemes.has(url.protocol)) return false;

    // 2) DENY first
    if (this.matchesAny(url, this.denyRules)) return false;

    // 3) ALLOW
    if (this.matchesAny(url, this.allowRules)) return true;

    // 4) Same-origin bypass (optional)
    if (this.allowSameOrigin) {
      const appOrigin = this.safeAppOrigin();
      if (appOrigin && url.origin === appOrigin) return true;
    }

    return false;
  }

  /** Optionally add rules at runtime (e.g., admin UI) */
  addAllowRule(rule: WhitelistRule) { (this.allowRules as WhitelistRule[]).push(rule); }
  addDenyRule(rule: WhitelistRule)  { (this.denyRules  as WhitelistRule[]).push(rule); }

  // ───────────────────────── helpers ─────────────────────────

  private tryParseUrl(raw: string): URL | null {
    try { return new URL(raw, window.location.href); }
    catch { return null; }
  }

  private safeAppOrigin(): string | null {
    try { return new URL(window.location.href).origin; }
    catch { return null; }
  }

  private matchesAny(url: URL, rules: WhitelistRule[]): boolean {
    for (const rule of rules) {
      if (typeof rule === 'string') {
        if (this.stringRuleMatch(url, rule)) return true;
      } else {
        if (rule.test(url.href)) return true;
      }
    }
    return false;
  }

  /**
   * String rules:
   *  - "example.com"  → allow that host and subdomains (host check)
   *  - "https://example.com/path" → allow URL prefix (href startsWith)
   */
  private stringRuleMatch(url: URL, rule: string): boolean {
    const trimmed = rule.trim();

    // Absolute URL prefix rule?
    if (trimmed.includes('://')) {
      // Normalize trailing slash on rule to avoid accidental mismatches
      const prefix = trimmed.endsWith('/') ? trimmed : trimmed;
      return url.href.startsWith(prefix);
    }

    // Host rule (allow domain + subdomains)
    const host = url.hostname.toLowerCase();
    const ruleHost = trimmed.toLowerCase().replace(/^\./, ''); // tolerate ".example.com"
    return host === ruleHost || host.endsWith('.' + ruleHost);
  }
}
```

---

### src/app/services/inactivity.service.ts

```ts
import { Injectable, NgZone, OnDestroy, inject } from '@angular/core';
import { Router } from '@angular/router';
import { fromEvent, merge, Subscription, timer } from 'rxjs';
import { switchMap, startWith } from 'rxjs/operators';

export interface InactivityOptions {
  timeoutMs?: number;           // default 20000 (20s)
  targetUrl?: string;           // default '/tutorial'
  ignoreIfAlreadyOnTarget?: boolean; // default true
}

@Injectable({ providedIn: 'root' })
export class InactivityService implements OnDestroy {
  private router = inject(Router);
  private zone = inject(NgZone);

  private sub?: Subscription;
  private _timeoutMs = 20000;
  private _targetUrl = '/tutorial';
  private _ignoreIfAlreadyOnTarget = true;

  /** Avvia il watcher di inattività */
  start(options: InactivityOptions = {}) {
    this.stop();
    this._timeoutMs = options.timeoutMs ?? 20000;
    this._targetUrl = options.targetUrl ?? '/tutorial';
    this._ignoreIfAlreadyOnTarget = options.ignoreIfAlreadyOnTarget ?? true;

    // SOLO eventi di input utente (niente scroll), così il carosello non resetta
    const userEvents$ = merge(
      fromEvent(document, 'pointerdown', { passive: true }),
      fromEvent(document, 'pointermove', { passive: true }),
      fromEvent(document, 'keydown', { passive: true }),
      fromEvent(document, 'touchstart', { passive: true }),
      fromEvent(document, 'touchmove', { passive: true }),
      fromEvent(document, 'visibilitychange', { passive: true }) // rientro scheda
    );

    this.sub = userEvents$
      .pipe(
        startWith(0),                           // parte subito
        switchMap(() => timer(this._timeoutMs)) // resetta ogni input
      )
      .subscribe(() => {
        this.zone.run(() => {
          if (this._ignoreIfAlreadyOnTarget && this.onTarget()) return;
          // Usa Router per non ricaricare l’app (evita window.location.href)
          this.router.navigateByUrl(this._targetUrl, { replaceUrl: true })
            .catch(() => {/* ignore */});
        });
      });
  }

  /** Ferma il watcher di inattività */
  stop() {
    this.sub?.unsubscribe();
    this.sub = undefined;
  }

  /** Reset manuale del timer (es. su eventi custom) */
  bump() {
    // basta emettere un evento sintetico
    document.dispatchEvent(new PointerEvent('pointerdown'));
  }

  private onTarget(): boolean {
    // Normalizza path (ignora query/hash)
    const urlTree = this.router.parseUrl(this.router.url);
    const current = '/' + (urlTree.root.children['primary']?.segments.map(s => s.path).join('/') ?? '');
    return current === this._targetUrl;
  }

  ngOnDestroy() { this.stop(); }
}
```

---

### src/assets/data/data.json

```json
{
  "schedule": [
    {
      "date": "",
      "groups": [
        {
          "time": "Ottobre 2025",
          "sessions": [
            {
              "name": "Motocalvalcata a cura del Moto Club Castelraimondo",
              "location": "Piazza Dante",
              "description": "Mobile devices and browsers are now advanced enough that developers can build native-quality mobile apps using open web technologies like HTML5, Javascript, and CSS. In this talk, we’ll provide background on why and how we created Ionic, the design decisions made as we integrated Ionic with Angular, and the performance considerations for mobile platforms that our team had to overcome. We’ll also review new and upcoming Ionic features, and talk about the hidden powers and benefits of combining mobile app development and Angular.",
              "speakerNames": [
                "Ted Turtle"
              ],
              "timeStart": "Domenica 12 ore 9.30",
              "timeEnd": "",
              "tracks": [
                "Ionic"
              ],
              "id": "2"
            },
            {
              "name": "26^ Cerimonia di Commemorazione del Sommergibilista Dino Buglioni",
              "location": "Castel Santa Maria",
              "description": "Mobile devices and browsers are now advanced enough that developers can build native-quality mobile apps using open web technologies like HTML5, Javascript, and CSS. In this talk, we’ll provide background on why and how we created Ionic, the design decisions made as we integrated Ionic with Angular, and the performance considerations for mobile platforms that our team had to overcome. We’ll also review new and upcoming Ionic features, and talk about the hidden powers and benefits of combining mobile app development and Angular.",
              "speakerNames": [
                "Rachel Rabbit"
              ],
              "timeStart": "Domenica 12 ore 10.30",
              "timeEnd": "10:00 am",
              "tracks": [
                "Tooling"
              ],
              "id": "3"
            },
            {
              "name": "PittaRosso Pink Parade a cura della A.S.D. Basket Castelraimondo",
              "location": "Piazza Dante",
              "description": "Mobile devices and browsers are now advanced enough that developers can build native-quality mobile apps using open web technologies like HTML5, Javascript, and CSS. In this talk, we’ll provide background on why and how we created Ionic, the design decisions made as we integrated Ionic with Angular, and the performance considerations for mobile platforms that our team had to overcome. We’ll also review new and upcoming Ionic features, and talk about the hidden powers and benefits of combining mobile app development and Angular.",
              "speakerNames": [
                "Ted Turtle"
              ],
              "timeStart": "Domenica 19 ore 9.30",
              "timeEnd": "",
              "tracks": [
                "Ionic"
              ],
              "id": "2"
            },
            {
              "name": "Festa della Castagna , a cura della Società Operaia di Mutuo Soccorso di Crispiero e della Libera Associazione Pro Crispiero",
              "location": "Frazione di Crispiero",
              "description": "Mobile devices and browsers are now advanced enough that developers can build native-quality mobile apps using open web technologies like HTML5, Javascript, and CSS. In this talk, we’ll provide background on why and how we created Ionic, the design decisions made as we integrated Ionic with Angular, and the performance considerations for mobile platforms that our team had to overcome. We’ll also review new and upcoming Ionic features, and talk about the hidden powers and benefits of combining mobile app development and Angular.",
              "speakerNames": [
                "Ted Turtle"
              ],
              "timeStart": "Domenica 19, intera giornata",
              "timeEnd": "",
              "tracks": [
                "Ionic"
              ],
              "id": "2"
            }
          ]
        }
       
      ]
    }
  ],
  "speakers": [
    {
      "name": "Ago's - Ristorante Pizzeria",
      "logo": "/assets/img/speakers/agos_banner.png",
      "profilePic": "/assets/img/speakers/agos_pizza_avatar.png",
      "instagram": "ionicframework",
      "facebook": "ionicfacebook",
      "about_1": "Ago's Castelraimondo. 🍝 Ristorante di Pesce e Carne. 🍕 Pizzeria al Taglio ed al Piatto.",
      "about": "<b>Ago’s Ristorante Pizzeria di Elia e Mara</b> è il luogo ideale per chi ama i sapori autentici e le atmosfere accoglienti.\n\n🍕 Proponiamo pizza al piatto e al taglio, fragrante e preparata con ingredienti freschissimi.\n\n🐟 Specialità di pesce cucinate con cura per esaltare i profumi del mare.\n\n🥩 Piatti di carne selezionata per gusti decisi e genuini.\n\nOgni ricetta è realizzata con attenzione ai dettagli, perché crediamo che la qualità sia la base di ogni buon piatto.\n\nChe sia una pizza classica o una specialità della nostra cucina, ogni assaggio sarà un’esperienza da ricordare.\n\nPerfetto per una cena romantica, una serata tra amici o un pranzo in famiglia, da Ago’s troverai sempre il gusto giusto per te.\n\nIl tutto servito in un ambiente accogliente, con uno staff giovane, dinamico e cordiale, pronto a farti sentire come a casa.\n\nAgo’s non è solo un ristorante: è un luogo dove condividere sapori, sorrisi e momenti speciali.\n\n❤️ Say hello on social media!",
      "title": "Software Engineer",
      "location": "Everywhere",
      "email": "burt@example.com",
      "category": "Pizzeria - Ristorante",
      "description": "",
      "address": "Corso Italia, 37, 62022 Castelraimondo MC",
      "phone": "+39 0737 640318",
      "openingHours": "orario continuato dalle 10:00 alle 23:00",
      "id": "1"
    },
    {
      "name": "Ludwig",
      "logo": "/assets/img/speakers/ludwig_banner.png",
      "profilePic": "/assets/img/speakers/ludwig_pizza_avatar.png",
      "instagram": "ionicframework",
      "twitter": "ionicframework",
      "about": "Dal 1999 Ludwig si trova lungo il corso principale del paese,\n\nIn un ambiente caldo, accogliente e recentemente rinnovato.\n\n🍽️ La cucina di Ludwig si ispira ai piatti tradizionali marchigiani: crescia, affettati e formaggi dei Monti Sibillini, vincisgrassi e olive all'ascolana.\n\n🥩 Selezioniamo con cura produttori locali per le carni dei nostri succulenti hamburger.\n\n✨ Da sottolineare gli esclusivi e originali fritti interamente artigianali: dal celebre cubo di vincisgrasso fritto al cubo all'amatriciana o al riso cacio e pepe, disponibili solo da Ludwig.\n\n🔥 Per chi desidera qualcosa di ancora più insolito, ma preparato con la massima cura, proponiamo una selezione di ricette dal nostro BBQ e specialità bavaresi e messicane.\n\n🌱 Grazie alla stagionalità dei prodotti non mancano mai proposte fuori menu.\n\n🍷 La lista dei vini e delle birre offre un'accurata selezione di etichette, in prevalenza marchigiane, perfette dall'aperitivo al dopo cena.",
      "title": "Software Engineer",
      "location": "Everywhere",
      "email": "ludwigstrasse.instagram@gmail.com",
      "category": "Pub - Ristorante",
      "description": "",
      "address": "Corso Italia 65, Castelraimondo",
      "phone": "+39 351 7010611",
      "openingHours": "pranzo 12:00-15:30 - cena 12:00-22:30",
      "sito": "https://ludwigstrasse.plateform.app",
      "id": "2"
    },
    {
      "name": "Bar L'eclissi",
      "logo": "/assets/img/speakers/eclissi_banner.png",
      "profilePic": "/assets/img/speakers/eclissi_pizza_avatar.png",
      "instagram": "ionicframework",
      "twitter": "ionicframework",
      "about": "Bar L'Eclissi è il punto di riferimento della nostra cittadina dal 2003,\n\nDove la convivialità e l'atmosfera informale creano un ambiente accogliente per tutti.\n\n☕ Offriamo una vasta gamma di servizi: dalla colazione, con una selezione di prodotti locali, ai pranzi veloci e agli aperitivi, fino ai dopocena.\n\n🍽️ La nostra professionalità si unisce alla passione per il buon cibo e il buon bere, rendendoci una scelta ideale per tutte le età.\n\n😎 Unisciti a noi per un momento di relax!",
      "title": "Software Engineer",
      "location": "Everywhere",
      "email": "donald@example.com",
      "category": "Bar - Caffetteria",
      "description": "",
      "address": "Piazza Dante Alighieri, 5, 62022 Castelraimondo",
      "phone": "+39 0737 642131",
      "openingHours": "pranzo 12:00-15:30 - cena 12:00-22:30",
      "sito": "feed",
      "id": "3"
    },
    {
      "name": "Gelateria Carnevali",
      "logo": "/assets/img/speakers/carnevali_banner.png",
      "profilePic": "/assets/img/speakers/carnevali_pizza_avatar.png",
      "instagram": "ionicframework",
      "twitter": "ionicframework",
      "about": "🍨 Carnevali è una gelateria che ha saputo conquistare fama e successo oltre i confini della piccola Castelraimondo e della realtà di provincia, grazie agli sforzi e all’impegno quotidiano di persone semplici ma vere, che hanno creduto giorno dopo giorno in questa attività dando tutta la loro vita.\n\n🏛️ Storica Gelateria · Cioccolateria · Bar Castelraimondo\n\nDal 1958 la famiglia Carnevali delizia i palati di miriadi di clienti a Castelraimondo con un gelato artigianale unico nella zona, noto anche oltre la provincia di Macerata per qualità, gusto e freschezza.\n\n🍫 Gelateria, cioccolateria e produzione artigianale di altri dolci rendono Carnevali un luogo speciale per gli amanti del dolce. Primi in provincia ad acquistare e utilizzare un pastorizzatore, la gelateria ha saputo affinare negli anni la produzione, introducendo gusti nuovi e originali. Tra i prodotti ci sono affogati, cocktail, frullati, brioche, frappè e molto altro.\n\n🏆 Premi e Riconoscimenti\n\n- Affogato al liquore, al caffè, al cioccolato\n- 1973: Premio per la coppa originale “Fior di Loto”\n- 1971: Riconoscimento da parte di Stock per la creazione di una coppa gelato\n- Aquila d’Oro per i 40 anni di attività nel settore turistico e commerciale (Fenacom)\n\n📖 Storia\n\nLa famiglia Carnevali intraprende quest’avventura nel maggio del 1958, quando decide di scommettere su questa attività nonostante i sacrifici. Allievi del maestro Walter Lini di Firenze, i Carnevali acquisiscono le tecniche e i segreti del gelato artigianale. Lo stesso Lini più volte ha espresso soddisfazione per la qualità del gelato Carnevali.\n\n🍦 Cosa facciamo\n\nLa gelateria Carnevali è specializzata nella produzione di gelati artigianali all’interno del proprio laboratorio. Tra le specialità: gelato ai fichi, bacio, mandorlato, nocciola, panna cotta e zuppa inglese. Inoltre, affogati, frappè, frullati e cioccolato artigianale. Offre anche cocktail alcolici e analcolici, oltre a una sala da tè con svariate tipologie e aromi.\n\n⭐ Qualità inconfondibile\n\nLa filosofia Carnevali è semplice: qualità sempre al primo posto. Dalla selezione degli ingredienti — come le nocciole del Piemonte, genuine e di prima scelta — fino alla lavorazione accurata, tutto punta a garantire l’eccellenza.\n\n👨‍🍳 La preparazione del gelato\n\nLa lavorazione prevede fasi precise: realizzazione e raffreddamento del composto a 5°C, riposo, mantecatura, dosaggio e dolcificazione. Carnevali offre anche gelati senza zucchero e gelati per celiaci, mantenendo sempre lo stesso standard di qualità.",
      "category": "Gelateria Artigianale - Bar - Caffetteria",
      "location": "Everywhere",
      "address": "Corso Italia, 57, 62022 Castelraimondo MC",
      "email": "eva@example.com",
      "phone": "+39 0737 641155",
      "openingHours": "pranzo 12:00-15:30 - cena 12:00-22:30",
      "sito": "https://www.gelateriacarnevali.com",
      "id": "4"
    },
    {
      "name": "Tabaccheria Cerqueti",
      "logo": "/assets/img/speakers/tabaccheria_cerqueti_banner.png",
      "profilePic": "/assets/img/speakers/tabaccheria_cerqueti_avatar.png",
      "instagram": "ionicframework",
      "twitter": "ionicframework",
      "about": "🚬 La Tabaccheria Cerqueti è presente nel nostro paese da ben tre generazioni, gestita con passione e dedizione prima da Rolando, poi da Brunella ed infine da me.\n\n📍 La mia attività è cresciuta negli anni nel centro di Castelraimondo, diventando un punto di riferimento per ogni esigenza quotidiana.\n\n📰 Da noi trovate non solo tabacchi, giochi e giornali, ma anche servizi utili e sempre aggiornati.\n\n🙏 Ringrazio ogni cliente che mi permette di lavorare con il sorriso. Insieme ai miei indispensabili collaboratori siamo pronti ad accogliervi e soddisfare ogni esigenza.\n\n❤️ GRAZIE!",
      "title": "Software Engineer",
      "category": "Edicola Tabaccheria",
      "location": "Everywhere",
      "address": "Corso Italia, 84, 62022 Castelraimondo",
      "email": "eva@example.com",
      "phone": "+39 0737 641436",
      "openingHours": "Dal lunedì al martedì 07:15–13, 15:30–20 | domenica 08:30–13:00",
      "id": "5"
    },
    {
      "name": "Ristorante Nuovo Mondo",
      "logo": "/assets/img/speakers/nuovomondo_banner.png",
      "profilePic": "/assets/img/speakers/nuovomondo_pizza_avatar.png",
      "instagram": "ionicframework",
      "twitter": "ionicframework",
      "about": "🌊 Ristorante Nuovo Mondo ti aspetta a Castelraimondo, in Viale Europa 12, in una nuova ed accogliente location.\n\n🏛️ Ristorante di Pesce · Cucina di Mare · Castelraimondo\n\nGusta il sapore del mare in ogni piatto! Scopri il nostro menù stagionale di pesce fresco; offriamo un'ampia scelta di antipasti caldi e freddi, primi, secondi e dolci fatti in casa.\n\n🍤 Specialità\n\n- Frittura mista di pesce croccante e leggera\n- Antipasti caldi e freddi di mare\n- Primi di pesce\n- Secondi di pescato\n- Dolci fatti in casa\n\n✨ Atmosfera & Servizio\n\nNei piatti troverai tradizione, modernità e accuratezza nella scelta della materia prima. Atmosfera accogliente e servizio caloroso: questo è il nostro impegno.\n\n🎉 Occasioni\n\nVieni a trovarci per una serata speciale, un evento importante o semplicemente per un pranzo in famiglia o con gli amici.\n\n⏰ Orari & Asporto\n\nSiamo aperti pranzo e cena.\nServizio d'asporto sempre disponibile.\nMercoledì chiuso.\n\n📍 Indirizzo\n\nViale Europa 12, Castelraimondo (MC)\n\n📞 Prenotazioni\n\n0737 640099\n\n👉 Prenota ora e goditi un'esperienza unica!",
      "title": "Software Engineer",
      "category": "Ristorante",
      "location": "Everywhere",
      "address": "Viale Europa, 12, 14, 62022 Castelraimondo",
      "email": "eva@example.com",
      "phone": "+39 0737 640099",
      "openingHours": "Dalle 12:30 alle 14:30 e dalle 19:30 alle 22:00 - Mercoledì chiuso",
      "id": "6"
    },
    {
      "name": "Gelateria Centrale",
      "logo": "/assets/img/speakers/centrale_banner.png",
      "profilePic": "/assets/img/speakers/centrale_pizza_avatar.png",
      "instagram": "ionicframework",
      "twitter": "ionicframework",
      "about": "☕ Nel cuore di Castelraimondo, il Gran Caffè Centrale è un punto di riferimento per chi cerca gusto, qualità e accoglienza.\n\n🍰 Dalla colazione alla pausa dolce del pomeriggio, ogni momento è quello giusto per fermarsi a gustare un caffè eccellente o un gelato artigianale preparato con ingredienti selezionati.\n\n🥐 Il locale unisce tradizione e modernità, offrendo anche una selezione di pasticceria fresca, aperitivi curati e proposte stagionali.\n\n🏡 Un luogo ideale per ritrovarsi, rilassarsi e lasciarsi coccolare dal sapore autentico di un’eccellenza del territorio.",
      "title": "Software Engineer",
      "category": "Gelateria Artigianale - Bar - Caffetteria",
      "location": "Everywhere",
      "address": "Corso Italia, 21, 62022 Castelraimondo",
      "email": "eva@example.com",
      "phone": "+39 348 382 4257",
      "openingHours": "16:30, 21:00",
      "id": "7"
    },
    {
      "name": "Pizza El Pedro",
      "logo": "/assets/img/speakers/pizza_banner.png",
      "profilePic": "/assets/img/speakers/pizza_pizza_avatar.png",
      "instagram": "ionicframework",
      "twitter": "ionicframework",
      "about": "🍕 Pizza El Pedro nasce 34 anni fa, gestita con discreto successo sino al 2022.\n\n👉 Da quell’anno è iniziata la nuova gestione che ha portato un rinnovamento generale: locali sempre più moderni e confortevoli e, soprattutto, una pizza innovativa per soddisfare le esigenze e i gusti dei clienti.\n\n🌿 Utilizziamo materie prime di qualità e, ove possibile, di provenienza locale per valorizzare e sostenere il territorio.\n\n🔬 Grazie ai frequenti aggiornamenti, alle ricerche e sperimentazioni, è nato un prodotto dalle eccellenti qualità organolettiche che si traducono in una straordinaria facilità di digestione e un’ineguagliabile sensazione al palato.",
      "title": "Developer Advocate",
      "category": "Pizzeria al Taglio",
      "location": "Everywhere",
      "address": "Corso Italia, 146, 62022 Castelraimondo",
      "email": "eva@example.com",
      "phone": "+39 +39 348 3824257",
      "openingHours": "16:30 - 21:00",
      "id": "8"
    },
    {
      "name": "CONAD CITY",
      "logo": "/assets/img/speakers/conad_banner.png",
      "profilePic": "/assets/img/speakers/conad_pizza_avatar.png",
      "instagram": "ionicframework",
      "twitter": "ionicframework",
      "about": "🏬 Qualità, convenienza e territorio.\n\nSiamo il tuo supermercato di fiducia a Castelraimondo: ogni giorno selezioniamo prodotti freschi e di marca Conad, puntando su qualità e convenienza, con un’attenzione particolare ai prodotti del territorio.\n\n🛒 Offriamo anche la spesa a domicilio: portiamo noi la spesa fino a casa tua.\n\n---\n\n⏰ Orari\n\nLunedì–Sabato: 8:30–20:00\nDomenica: chiuso\n(Orari continuati per venire incontro a chi lavora.)\n\n---\n\n🛍️ Cosa trovi da noi\n\n• Reparti freschi e assortimento completo per la spesa di tutti i giorni.\n• Ampia scelta di prodotti a marchio Conad: qualità garantita a prezzi accessibili.\n• Prodotti locali per valorizzare i sapori del territorio.\n• Servizi comodi: consegna a domicilio, accesso senza barriere, pagamenti digitali (Carta Insieme, Conad Card, Conad Pay).\n\n---\n\n💡 Perché sceglierci\n\n• Qualità e prezzi ragionevoli, con promozioni ricorrenti.\n• Personale attento e disponibile, orientato al servizio.\n• Pulizia e ordine in negozio per una spesa rapida e piacevole.\n\n(Questi aspetti sono spesso evidenziati dagli articoli locali e dalle recensioni online sul punto vendita di Castelraimondo)\n\n---\n\n💬 Dicono di noi (dal web)\n\n«Prezzi ragionevoli, tanti prodotti di qualità e personale al servizio del cliente»",
      "title": "Software Engineer",
      "category": "Supermercato",
      "location": "Everywhere",
      "address": "Via Enrico Mattei, 57, 62022 Castelraimondo MC",
      "email": "eva@example.com",
      "phone": "+39 0737 641418",
      "openingHours": "08:30 - 20:00",
      "id": "10"
    },
    {
      "name": "Pizzera La Lanterna",
      "logo": "/assets/img/speakers/lanterna_banner.png",
      "profilePic": "/assets/img/speakers/lanterna_pizza_avatar.png",
      "instagram": "ionicframework",
      "twitter": "ionicframework",
      "about": "🍕 La Lanterna, da oltre 16 anni, mette al primo posto la qualità e la soddisfazione dei propri clienti.\n\nLa Pizzeria Ristorante è gestita a conduzione familiare da Hajri Azizi, capofamiglia e titolare, insieme alla moglie Vera e ai figli Nadia ed Endri.\n\n🏠 Il locale è composto da una sala principale e da una caratteristica taverna con soffitto a volta, che regala un’atmosfera accogliente e conviviale, dove la regina del menù è la pizza.\n\n🔥 La pizza è preparata rigorosamente con forno a legna: sana, leggera, croccante, friabile e molto digeribile grazie alla lievitazione naturale con lievito madre e all'utilizzo di ingredienti freschi e genuini.\n\n🍝 Oltre alla pizza si possono gustare primi, secondi piatti e dolci della tradizione culinaria italiana.\n\n✨ Assaporare, ascoltare, riconoscere, apprezzare: l’arte della meditazione culinaria trova nel Ristorante Pizzeria La Lanterna uno dei suoi templi d’eccellenza. Qui il rito della pizza e della cucina sana è officiato ogni giorno nella splendida atmosfera interna e nelle accoglienti sale dalla famiglia Azizi.\n\n🤝 Punto d’incontro per un’élite locale e internazionale, La Lanterna offre il contesto ideale per una pizza, un pranzo, una cena o uno stuzzichino (aperitivo, happy hour, ecc.), accompagnato da un’accoglienza familiare e un servizio personalizzato.",
      "title": "Software Engineer",
      "category": "Pizzeri Ristorante",
      "location": "Everywhere",
      "address": "Largo della Libertà 4, 62022 Castelraimondo MC",
      "email": "eva@example.com",
      "phone": "+39 0737 642142",
      "openingHours": "18:30 - 02:00",
      "id": "11"
    }
  ],
  "map": [
        {
      "name": "Cassero 2.0",
      "lat": 43.20750943329837,
      "lng": 13.056386381979054,
      "center": true,
      "icon": "assets/speakers/agos_pizza_avatar.png"
    },
    {
      "name": "Gelateria Carnevali",
      "lat": 43.208258901029225,
      "lng": 13.057053668820435,
      "center": true,
      "icon": "assets/icon/gelato.png"
    },

        {
      "name": "Ago's - Ristorante Pizzera",
      "lat": 43.2135979488039,
      "lng": 13.056150574360537,
      "center": true,
      "icon": "assets/icon/gelato.png"
    },

        {
      "name": "Ristorante Nuovo Mondo",
      "lat": 43.20807811012026,
      "lng": 13.055913065880656,
      "center": true,
      "icon": "assets/icon/gelato.png"
    },

        {
      "name": "Pizza El Pedro",
      "lat": 43.20549770868139,
      "lng": 13.055414176691704,
      "center": true,
      "icon": "assets/icon/gelato.png"
    },

        {
      "name": "Bar L'eclissi",
      "lat": 43.20738421252214,
      "lng": 13.056011296569654,
      "center": true,
      "icon": "assets/icon/gelato.png"
    },

        {
      "name": "Pizzera La Lanterna",
      "lat": 43.207702291397084,
      "lng": 13.056773081225085,
      "center": true,
      "icon": "assets/icon/gelato.png"
    },

        {
      "name": "Gelateria Centrale",
      "lat": 43.37351172474246,
      "lng": 13.077083281020434,
      "center": true,
      "icon": "assets/icon/gelato.png"
    },

        { 
      "name": "CONAD CITY",
      "lat": 43.39258357350975,
      "lng": 13.076877149874912,
      "center": true,
      "icon": "assets/icon/gelato.png"
    },

        {
      "name": "Ludwig",
      "lat": 43.20822997528104,
      "lng": 13.057122065054134,
      "center": true,
      "icon": "assets/icon/gelato.png"
    },

        {
      "name": "Tabaccheria Cerqueti",
      "lat": 43.20794607059282,
      "lng": 13.056678711914214,
      "center": true,
      "icon": "assets/icon/gelato.png"
    }

  ],
  "tracks": [
    {
      "name": "TagEsempio1",
      "icon": "logo-angular"
    },
    {
      "name": "Documentation",
      "icon": "document"
    },
    {
      "name": "Food",
      "icon": "restaurant"
    },
    {
      "name": "TagEsempio2",
      "icon": "logo-ionic"
    },
    {
      "name": "Tooling",
      "icon": "hammer"
    },
    {
      "name": "Design",
      "icon": "color-palette"
    },
    {
      "name": "Services",
      "icon": "cog"
    },
    {
      "name": "Workshop",
      "icon": "construct"
    },
    {
      "name": "Communication",
      "icon": "call"
    },
    {
      "name": "Navigation",
      "icon": "compass"
    }
  ]
}```

---

### src/assets/img/speaker-detail2 copy.html

```html
<ion-content class="speaker-detail">
  <ion-header class="ion-no-border">
    <ion-toolbar>
      <ion-buttons slot="start">
        <ion-back-button defaultHref="/app/tabs/speakers"></ion-back-button>
      </ion-buttons>

      @if (speaker) {
      <ion-buttons slot="end">
        <ion-button (click)="openContact(speaker)">
          <ion-icon
            slot="icon-only"
            [ios]="'call-outline'"
            [md]="'call-sharp'"
          ></ion-icon>
        </ion-button>
        <ion-button (click)="openSpeakerShare(speaker)">
          <ion-icon
            slot="icon-only"
            [ios]="'share-outline'"
            [md]="'share-sharp'"
          ></ion-icon>
        </ion-button>
      </ion-buttons>
      }
    </ion-toolbar>
  </ion-header>

  <div class="speaker-background">
    <img
      ngSrc="{{speaker?.profilePic ?? '/assets/placeholder.jpg'}}"
      [alt]="speaker?.name ?? 'Speaker profile'"
      width="70"
      height="70"
      priority
    />
    <h2>{{speaker?.name ?? 'Loading...'}}</h2>
  </div>

  <div class="ion-padding speaker-detail">
    <p>
      {{speaker?.about ?? 'Loading biography...'}} Say hello on social media!
    </p>

    <hr />

    @if (speaker) {
    <div class="social-links">
      <ion-chip
        color="twitter"
        button
        (click)="openExternalUrl('https://twitter.com/' + speaker.twitter)"
        aria-label="Visit Twitter profile"
      >
        <ion-icon name="logo-twitter"></ion-icon>
        <ion-label>Twitter</ion-label>
      </ion-chip>

      <ion-chip
        color="dark"
        button
        (click)="openExternalUrl('https://github.com/ionic-team/ionic')"
        aria-label="Visit GitHub profile"
      >
        <ion-icon name="logo-github"></ion-icon>
        <ion-label>GitHub</ion-label>
      </ion-chip>

      <ion-chip
        color="instagram"
        button
        (click)="openExternalUrl('https://instagram.com/ionicframework')"
        aria-label="Visit Instagram profile"
      >
        <ion-icon name="logo-instagram"></ion-icon>
        <ion-label>Instagram</ion-label>
      </ion-chip>
    </div>
    }
  </div>
</ion-content>```

---

### src/assets/manifest.webmanifest

```
{
  "name": "app",
  "short_name": "app",
  "theme_color": "#1976d2",
  "background_color": "#fafafa",
  "display": "standalone",
  "scope": "./",
  "start_url": "./",
  "icons": [
    {
      "src": "icons/72.png",
      "sizes": "72x72",
      "type": "image/png",
      "purpose": "maskable any"
    },
    {
      "src": "icons/96.png",
      "sizes": "96x96",
      "type": "image/png",
      "purpose": "maskable any"
    },
    {
      "src": "icons/128.png",
      "sizes": "128x128",
      "type": "image/png",
      "purpose": "maskable any"
    },
    {
      "src": "icons/144.png",
      "sizes": "144x144",
      "type": "image/png",
      "purpose": "maskable any"
    },
    {
      "src": "icons/152.png",
      "sizes": "152x152",
      "type": "image/png",
      "purpose": "maskable any"
    },
    {
      "src": "icons/180.png",
      "sizes": "180x180",
      "type": "image/png",
      "purpose": "maskable any"
    },
    {
      "src": "icons/192.png",
      "sizes": "192x192",
      "type": "image/png",
      "purpose": "maskable any"
    },
    {
      "src": "icons/384.png",
      "sizes": "384x384",
      "type": "image/png",
      "purpose": "maskable any"
    },
    {
      "src": "icons/512.png",
      "sizes": "512x512",
      "type": "image/png",
      "purpose": "maskable any"
    }
  ]
}
```

---

### src/environments/environment.prod.ts

```ts
export const environment = {
  production: true,
};
```

---

### src/environments/environment.ts

```ts
// The file contents for the current environment will overwrite these during build.
// The build system defaults to the dev environment which uses `environment.ts`, but if you do
// `ng build --env=prod` then `environment.prod.ts` will be used instead.
// The list of which env maps to which file can be found in `.angular-cli.json`.
export const environment = {
  production: false,
};

/*
 * In development mode, to ignore zone related error stack frames such as
 * `zone.run`, `zoneDelegate.invokeTask` for easier debugging, you can
 * import the following file, but please comment it out in production mode
 * because it will have performance impact when throw error
 */
// import 'zone.js/plugins/zone-error';  // Included with Angular CLI.
```

---

### src/global.scss

```scss
/*
 * App Global CSS
 * ----------------------------------------------------------------------------
 * Put style rules here that you want to apply globally. These styles are for
 * the entire app and not just one component. Additionally, this file can be
 * used as an entry point to import other CSS/Sass files to be included in the
 * output CSS.
 * For more information on global stylesheets, visit the documentation:
 * https://ionicframework.com/docs/layout/global-stylesheets
 */

/* Core CSS required for Ionic components to work properly */
@use '@ionic/angular/css/core.css';

/* Basic CSS for apps built with Ionic */
@use '@ionic/angular/css/normalize.css';
@use '@ionic/angular/css/structure.css';
@use '@ionic/angular/css/typography.css';

/* Optional CSS utils that can be commented out */
@use '@ionic/angular/css/padding.css';
@use '@ionic/angular/css/float-elements.css';
@use '@ionic/angular/css/text-alignment.css';
@use '@ionic/angular/css/text-transformation.css';
@use '@ionic/angular/css/flex-utils.css';

/*
 * App CSS
 * ----------------------------------------------------------------------------
 * Imports a file that can contain Sass/CSS that should be used throughout
 * the entire app.
 */

@use './app/app.scss';

/**
 * Ionic Dark Mode
 * -----------------------------------------------------
 * For more info, please see:
 * https://ionicframework.com/docs/theming/dark-mode
 */

// @use "@ionic/angular/css/palettes/dark.always.css";
// @use "@ionic/angular/css/palettes/dark.system.css";
@use '@ionic/angular/css/palettes/dark.class.css';


/* ---- TOAST VERDE GLOBALE ---- */
ion-toast.toast-green {
  /* usa le CSS variables esposte dal toast host */
  --background: #22c55e; /* verde */
  --color: #ffffff;      /* testo bianco */
  --border-radius: 12px;
  /* opzionale: alzalo un filo se il footer può coprirlo */
  margin-bottom: 8px;
}

/* colore dei bottoni dentro al toast */
ion-toast.toast-green::part(button) {
  color: #ffffff;
  font-weight: 700;
}
```

---

### src/index.html

```html
<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="UTF-8"/>
    <title>Ionic Conference App</title>

    <meta name="viewport" content="viewport-fit=cover, width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <meta name="format-detection" content="telephone=no"/>
    <meta name="msapplication-tap-highlight" content="no"/>
    <meta name="theme-color" content="#387ef5"/>

    <base href="/"/>
      <script async src="https://www.instagram.com/embed.js"></script>

    <link rel="shortcut icon" type="image/png" href="/assets/icon/favicon.png" />

    <!-- add to homescreen for ios -->
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-title" content="Ionic Conference App" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  </head>

  <body>
    <app-root></app-root>

    <noscript>Please enable JavaScript to continue using this application.</noscript>
  </body>
</html>
```

---

### src/karma.conf.js

```js
// Karma configuration file, see link for more information
// https://karma-runner.github.io/1.0/config/configuration-file.html

process.env.CHROME_BIN = require('puppeteer').executablePath();

module.exports = function (config) {
  config.set({
    basePath: '',
    frameworks: ['jasmine', '@angular-devkit/build-angular'],
    plugins: [
      require('karma-jasmine'),
      require('karma-chrome-launcher'),
      require('karma-jasmine-html-reporter'),
      require('karma-coverage-istanbul-reporter'),
      require('@angular-devkit/build-angular/plugins/karma'),
    ],
    client: {
      clearContext: false, // leave Jasmine Spec Runner output visible in browser
    },
    coverageIstanbulReporter: {
      dir: require('path').join(__dirname, 'coverage'),
      reports: ['html', 'lcovonly'],
      fixWebpackSourcePaths: true,
    },
    reporters: ['progress', 'kjhtml'],
    port: 9876,
    colors: true,
    logLevel: config.LOG_INFO,
    autoWatch: true,
    browsers: ['Chrome', 'ChromeHeadless'],
    customLaunchers: {
      ChromeHeadlessCI: {
        base: 'ChromeHeadless',
        flags: ['--no-sandbox', '--disable-gpu'],
      },
    },
    singleRun: false,
  });
};
```

---

### src/main.ts

```ts
import '@angular/compiler';

import { enableProdMode, importProvidersFrom, isDevMode } from '@angular/core';
import {
  IonicRouteStrategy,
  provideIonicAngular,
} from '@ionic/angular/standalone';

import { provideHttpClient } from '@angular/common/http';
import { bootstrapApplication } from '@angular/platform-browser';
import {
  PreloadAllModules,
  provideRouter,
  RouteReuseStrategy,
  withComponentInputBinding,
  withPreloading,
} from '@angular/router';
import {
  provideServiceWorker,
  ServiceWorkerModule,
} from '@angular/service-worker';
import { IonicStorageModule } from '@ionic/storage-angular';
import { AppComponent } from './app/app.component';
import { routes } from './app/app.routes';
import { environment } from './environments/environment';

if (environment.production) {
  enableProdMode();
}

bootstrapApplication(AppComponent, {
  providers: [
    { provide: RouteReuseStrategy, useClass: IonicRouteStrategy },
    provideIonicAngular(),
    provideRouter(
      routes,
      withPreloading(PreloadAllModules),
      withComponentInputBinding()
    ),
    provideHttpClient(),
    importProvidersFrom(
      IonicStorageModule.forRoot(),
      ServiceWorkerModule.register('ngsw-worker.js', {
        enabled: environment.production,
      })
    ),
    provideServiceWorker('ngsw-worker.js', {
      enabled: !isDevMode(),
      registrationStrategy: 'registerWhenStable:30000',
    }),
  ],
}).catch(err => console.error(err));
```

---

### src/polyfills.ts

```ts
/**
 * This file includes polyfills needed by Angular and is loaded before the app.
 * You can add your own extra polyfills to this file.
 *
 * This file is divided into 2 sections:
 *   1. Browser polyfills. These are applied before loading ZoneJS and are sorted by browsers.
 *   2. Application imports. Files imported after ZoneJS that should be loaded before your main
 *      file.
 *
 * The current setup is for so-called "evergreen" browsers; the last versions of browsers that
 * automatically update themselves. This includes Safari >= 10, Chrome >= 55 (including Opera),
 * Edge >= 13 on the desktop, and iOS 10 and Chrome on mobile.
 *
 * Learn more in https://angular.io/guide/browser-support
 */

// BROWSER POLYFILLS
// ---------------------------------------------------------------------------------

// IE9, IE10 and IE11 requires all of the following polyfills.
// import 'core-js/es6/symbol';
// import 'core-js/es6/object';
// import 'core-js/es6/function';
// import 'core-js/es6/parse-int';
// import 'core-js/es6/parse-float';
// import 'core-js/es6/number';
// import 'core-js/es6/math';
// import 'core-js/es6/string';
// import 'core-js/es6/date';
// import 'core-js/es6/array';
// import 'core-js/es6/regexp';
// import 'core-js/es6/map';
// import 'core-js/es6/weak-map';
// import 'core-js/es6/set';

/** IE10 and IE11 requires the following for the Reflect API. */
// import 'core-js/es6/reflect';

// Evergreen browsers require these.
// Used for reflect-metadata in JIT. If you use AOT (and only Angular decorators), you can remove.

// Required to support Web Animations `@angular/platform-browser/animations`.

// Zone JS is required by Angular itself.
import 'zone.js'; // Included with Angular CLI.

// APPLICATION IMPORTS
// ------------------------------------------------------------------------

/**
 * Date, currency, decimal and percent pipes.
 * Needed for: All but Chrome, Firefox, Edge, IE11 and Safari 10
 */
// import 'intl';  // Run `npm install --save intl`.
/**
 * Need to import at least one locale-data with intl.
 */
// import 'intl/locale-data/jsonp/en';
```

---

### src/test.ts

```ts
// This file is required by karma.conf.js and loads recursively all the .spec and framework files

import { getTestBed } from '@angular/core/testing';
import {
  BrowserDynamicTestingModule,
  platformBrowserDynamicTesting,
} from '@angular/platform-browser-dynamic/testing';
import 'zone.js/testing';

// First, initialize the Angular testing environment.
getTestBed().initTestEnvironment(
  BrowserDynamicTestingModule,
  platformBrowserDynamicTesting(),
  {
    teardown: { destroyAfterEach: false },
  }
);
```

---

### src/theme/variables.scss

```scss
/*
 * Ionic Variables and Theming
 * ----------------------------------------------------------------------------
 * For more information, please see
 * https://www.ionicframework.com/docs/theming/
 */

/*
 * Additional Ionic Colors
 * ----------------------------------------------------------------------------
 * In order to add colors to be used within Ionic components,
 * the color should be added as a class with the convention `.ion-color-{COLOR}`
 * where `{COLOR}` is the color to be used on the Ionic component.
 * For more information on adding new colors, please see
 * https://ionicframework.com/docs/theming/colors#adding-colors
 *
 * To generate the code for a new color, check out our new color creator:
 * https://ionicframework.com/docs/theming/colors#new-color-creator
 */

:root {
  --ion-color-favorite: #69bb7b;
  --ion-color-favorite-rgb: 105, 187, 123;
  --ion-color-favorite-contrast: #ffffff;
  --ion-color-favorite-contrast-rgb: 255, 255, 255;
  --ion-color-favorite-shade: #5ca56c;
  --ion-color-favorite-tint: #78c288;

  --ion-color-twitter: #1da1f4;
  --ion-color-twitter-rgb: 29, 161, 244;
  --ion-color-twitter-contrast: #ffffff;
  --ion-color-twitter-contrast-rgb: 255, 255, 255;
  --ion-color-twitter-shade: #1a8ed7;
  --ion-color-twitter-tint: #34aaf5;

  --ion-color-instagram: #5956d8;
  --ion-color-instagram-rgb: 89, 86, 216;
  --ion-color-instagram-contrast: #ffffff;
  --ion-color-instagram-contrast-rgb: 255, 255, 255;
  --ion-color-instagram-shade: #4e4cbe;
  --ion-color-instagram-tint: #6a67dc;

  --ion-color-vimeo: #23b6ea;
  --ion-color-vimeo-rgb: 35, 182, 234;
  --ion-color-vimeo-contrast: #ffffff;
  --ion-color-vimeo-contrast-rgb: 255, 255, 255;
  --ion-color-vimeo-shade: #1fa0ce;
  --ion-color-vimeo-tint: #39bdec;

  --ion-color-facebook: #3b5998;
  --ion-color-facebook-rgb: 59, 89, 152;
  --ion-color-facebook-contrast: #ffffff;
  --ion-color-facebook-contrast-rgb: 255, 255, 255;
  --ion-color-facebook-shade: #344e86;
  --ion-color-facebook-tint: #4f6aa2;
}

.ion-color-favorite {
  --ion-color-base: var(--ion-color-favorite);
  --ion-color-base-rgb: var(--ion-color-favorite-rgb);
  --ion-color-contrast: var(--ion-color-favorite-contrast);
  --ion-color-contrast-rgb: var(--ion-color-favorite-contrast-rgb);
  --ion-color-shade: var(--ion-color-favorite-shade);
  --ion-color-tint: var(--ion-color-favorite-tint);
}

.ion-color-twitter {
  --ion-color-base: var(--ion-color-twitter);
  --ion-color-base-rgb: var(--ion-color-twitter-rgb);
  --ion-color-contrast: var(--ion-color-twitter-contrast);
  --ion-color-contrast-rgb: var(--ion-color-twitter-contrast-rgb);
  --ion-color-shade: var(--ion-color-twitter-shade);
  --ion-color-tint: var(--ion-color-twitter-tint);
}

.ion-color-google {
  --ion-color-base: var(--ion-color-google);
  --ion-color-base-rgb: var(--ion-color-google-rgb);
  --ion-color-contrast: var(--ion-color-google-contrast);
  --ion-color-contrast-rgb: var(--ion-color-google-contrast-rgb);
  --ion-color-shade: var(--ion-color-google-shade);
  --ion-color-tint: var(--ion-color-google-tint);
}

.ion-color-instagram {
  --ion-color-base: var(--ion-color-instagram);
  --ion-color-base-rgb: var(--ion-color-instagram-rgb);
  --ion-color-contrast: var(--ion-color-instagram-contrast);
  --ion-color-contrast-rgb: var(--ion-color-instagram-contrast-rgb);
  --ion-color-shade: var(--ion-color-instagram-shade);
  --ion-color-tint: var(--ion-color-instagram-tint);
}

.ion-color-vimeo {
  --ion-color-base: var(--ion-color-vimeo);
  --ion-color-base-rgb: var(--ion-color-vimeo-rgb);
  --ion-color-contrast: var(--ion-color-vimeo-contrast);
  --ion-color-contrast-rgb: var(--ion-color-vimeo-contrast-rgb);
  --ion-color-shade: var(--ion-color-vimeo-shade);
  --ion-color-tint: var(--ion-color-vimeo-tint);
}

.ion-color-facebook {
  --ion-color-base: var(--ion-color-facebook);
  --ion-color-base-rgb: var(--ion-color-facebook-rgb);
  --ion-color-contrast: var(--ion-color-facebook-contrast);
  --ion-color-contrast-rgb: var(--ion-color-facebook-contrast-rgb);
  --ion-color-shade: var(--ion-color-facebook-shade);
  --ion-color-tint: var(--ion-color-facebook-tint);
}

.ion-color-github {
  --ion-color-base: #211f1f;
  --ion-color-base-rgb: 33, 31, 31;
  --ion-color-contrast: #ffffff;
  --ion-color-contrast-rgb: 255, 255, 255;
  --ion-color-shade: #1d1b1b;
  --ion-color-tint: #373535;
}

.ion-color-instagram {
  --ion-color-base: #9537bc;
  --ion-color-base-rgb: 149, 55, 188;
  --ion-color-contrast: #ffffff;
  --ion-color-contrast-rgb: 255, 255, 255;
  --ion-color-shade: #8330a5;
  --ion-color-tint: #a04bc3;
}

/*
 * Shared Variables
 * ----------------------------------------------------------------------------
 * To customize the look and feel of this app, you can override
 * the CSS variables found in Ionic's source files.
 * To view all of the possible Ionic variables, see:
 * https://ionicframework.com/docs/theming/css-variables#ionic-variables
 */

$tracks: (
  ionic,
  angular,
  communication,
  tooling,
  services,
  design,
  workshop,
  food,
  documentation,
  navigation
);

:root {
  --ion-headings-font-weight: 300;

  --ion-color-ionic: var(--ion-color-primary);
  --ion-color-angular: #ac282b;
  --ion-color-communication: #8e8d93;
  --ion-color-tooling: #fe4c52;
  --ion-color-services: #fd8b2d;
  --ion-color-design: #fed035;
  --ion-color-workshop: #69bb7b;
  --ion-color-food: #3bc7c4;
  --ion-color-documentation: #b16be3;
  --ion-color-navigation: #6600cc;
}

/*
 * App iOS Variables
 * ----------------------------------------------------------------------------
 * iOS only CSS variables can go here
 */

.ios {
}

/*
 * App Material Design Variables
 * ----------------------------------------------------------------------------
 * Material Design only CSS variables can go here
 */

.md {
}
```

---

### src/zone-flags.ts

```ts
/**
 * Prevents Angular change detection from
 * running with certain Web Component callbacks
 */
(window as any).__Zone_disable_customElements = true;
```
